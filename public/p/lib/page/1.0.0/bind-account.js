define("libpage.0.0/bind-account",["lib/components/khValidate/1.0.0/khValidate"],function(e,r,t){function n(e){var r=e.siblings(".level"),t=$.trim(e.val()),n=0;e.siblings(".info-tips").show(),t.length>20||t.length<6?r.hide():(/[0-9]/.test(t)&&n++,/[a-z]/.test(t)&&n++,/[A-Z]/.test(t)&&n++,/[-_.]/.test(t)&&n++,1==n&&r.addClass("level1").removeClass("level2 level3").show().find(".level-tips").html("弱"),2==n&&r.addClass("level2").removeClass("level1 level3").show().find(".level-tips").html("中"),n>=3&&r.addClass("level3").removeClass("level1 level2").show().find(".level-tips").html("强"))}function o(e,r,t){var n=e.val();n=n.replace(/\s/g,""),$.ajax({url:p.checkIsMember,dataType:"jsonp",data:{username:n,key:$("#J_security").val(),name:$("#J_security").attr("name")},success:function(t){"succ"==t.status?(l(e,r,"error"),d=!0):(l(e,"","ok"),d=!1,h=!0),c(t.pin)}})}function a(e,r,t){var n=e;r.css("top","-9999px"),t.show();var o=setInterval(function(){0>=e?(clearInterval(o),r.css("top","auto").html("重新获取验证码"),t.html(n+"秒").hide()):(e-=1,t.html(e+"秒"))},1e3)}function i(e,r){return k>=3?void l(e,"您本次发送手机验证码次数已经用完,请刷新页面重试.","error"):(k++,a(60,$("#J_getPhoneCode"),$("#J_countDownWrap")),void $.ajax({url:p.sendPhoneCode,data:{phone:r,h:$("#J_security").val(),m:$("#J_security").attr("name"),n:k,r:Math.random()},dataType:"jsonp"}).done(function(e){"succ"==e.status&&c(e.pin)}).fail(function(){l(e,"发送失败，请检查网络是否通畅","error")}))}function s(e){$.ajax({url:p.checkPhoneCode,data:{phonecode:e.val()},dataType:"jsonp"}).done(function(r){"succ"==r.status?(f=!0,l(e,"","ok")):l(e,"验证码错误，请确认。","error")}).fail(function(){showTip(e,"发送失败，请检查网络是否通畅","error")})}function c(e){var r=$("#J_security");r.val(e[1]),r.attr("name",e[0])}function l(e,r,t){switch(t){case"ok":e.siblings(".icon-tip-ok").show();break;case"error":e.addClass("error").siblings(".error-tips").show().find(".tips-info").html(r)}}var u=e("../../components/khValidate/1.0.0/khValidate");$("#J_slideBox .hd-item").on("click",function(){var e=$(this),r=e.index();e.addClass("active").siblings(".hd-item").removeClass("active"),$(".JQ_content").eq(r).addClass("active").siblings(".JQ_content").removeClass("active")}).on("mouseover mouseout",function(){$(this).toggleClass("on")}),$(".protocol").on("click",function(){var e=$(this).find(".icon");e.toggleClass("icon-box-normal")});var d=!1,h=!1,v=!1,f=!1,p={checkIsMember:cdnConfig.apiPath+"/member/validatemem",sendPhoneCode:cdnConfig.apiPath+"/member/sendphonecode",checkPhoneCode:cdnConfig.apiPath+"/member/validateiphonecode",registerPath:"/oauth/dobind",loginPath:"/oauth/dobind"};$(".JQ_content").on("keyup",function(e){var r=$(e.target),t=r.attr("id"),o=r.val();if("J_phone"===t)o.length>1&&o.length>11&&r.val(o.substr(0,11));else if("J_regPsw"===t)n(r);else if("J_userName"===t||"J_userPsw"===t){var a=r.parent();o.length>0&&a.removeClass("error")}}).on("focusout",function(e){var r=$(e.target),t=r.attr("id"),n=r.val();if(""!==n)if("J_phone"===t)u.chkPhone(n)?o(r,"此手机号已经被注册，请更换其他手机号"):l(r,"手机号码格式有误，请输入正确的手机号","error");else if("J_regPsw"===t){if(n.length>20||n.length<6)return r.siblings(".info-tips").hide(),void l(r,"密码长度为6-20个字符，且区分大小写","error");if(!u.chkPass(n))return void l(r,"不能使用特殊字符","error");l(r,"","ok"),v=!0}else if("J_regCode"===t)u.chkNumber(n,6)?s(r):l(r,"请输入6位手机验证码","error");else if("J_userName"===t||"J_userPsw"===t){var a=r.parent();n.length>0&&(l(r,"","ok"),a.removeClass("error"))}}).on("focusin",function(e){var r=$(e.target),t=r.attr("name");r.removeClass("error").siblings(".error-tips").hide().end().siblings(".icon-tip-ok").hide(),"J_regPsw"===t&&r.siblings(".info-tips").show()}),$("#J_getPhoneCode").on("click",function(){var e=($(this),$("#J_phone")),r=$("#J_regCode"),t=e.val();return d?void 0:u.chkPhone(t)?void i(r,t):void l(e,"手机号码格式有误，请输入正确的手机号","error")}),$("#J_reg").on("click",function(){var e=$("#J_phone"),r=$("#J_regPsw"),t=$("#J_regCode"),n=e.val(),o=r.val(),a=t.val(),i=$(".protocol .icon").hasClass("icon-box-normal");if(""==n)return void l(e,"请输入要注册的手机号码","error");if(""==o)return $(".info-tips").hide(),void l(r,"请设置登录密码","error");if(""==a)return void l(t,"请输入手机验证码","error");if(""==a)return void l(o,"请输入图片验证码","error");if(i)return void $(".protocol .error-tips").show();if(h&&f){var s={};s.bind_type="register",s.phone=n,s.password=o,s.code=a,s.agree=1,$.ajax({url:p.registerPath,type:"POST",data:s,dataType:"json",success:function(e){0==e.code?e.url&&(window.location.href=e.url):(e.msg&&(t.siblings(".icon-tip-ok").hide(),l(t,e.msg,"error")),t.parent().addClass("error"),$("#J_reg").html("立即注册及绑定"))},fail:function(){}})}});var k=0;$("#J_login").on("click",function(){var e=$("#J_userName"),r=$("#J_userPsw"),t=$.trim(e.val()),n=$.trim(r.val());$("#J_loginToken");if(""===t)return e.siblings(".icon-tip-ok").hide(),l(e,"请输入帐户名","error"),void e.parent().addClass("error");if(""==n)return r.siblings(".icon-tip-ok").hide(),l(r,"请输入密码","error"),void r.parent().addClass("error");$("#J_login").html("绑定中...");var o=$("#J_loginForm").serialize();$.ajax({url:p.loginPath,type:"POST",data:o,dataType:"json",success:function(e){0==e.code?e.url&&(window.location.href=e.url):(e.msg&&(r.siblings(".icon-tip-ok").hide(),l(r,e.msg,"error")),r.parent().addClass("error"),$("#J_login").html("立即绑定"))},fail:function(){}})}),$(function(){function e(){r=n.height(),t=$(window).scrollTop()+$(window).height()-r+"px",$(document.body).height()<$(window).height()?(n.css({position:"absolute",marginTop:0,top:t}),n.show()):(n.css({position:"static"}),n.show())}var r=0,t=0,n=$(".member-foot");e(),$(window).scroll(e).resize(e)})}),define("lib/components/khValidate/1.0.0/khValidate",[],function(e,r,t){var n={chkEnName:function(e){var r=/^[a-zA-Z|0-9]{3,20}$/;return r.test(e)},chkCnName:function(e){var r=/^[\u2E80-\u9FFF]{2,20}$/;return r.test(e)},chkIsChinese:function(e){var r=/[\u4E00-\u9FA5\uF900-\uFA2D]/;return r.test(e)},chkUserName:function(e){var r=/^[\u2E80-\u9FFF|0-9|a-zA-Z|_]{2,20}$/;return r.test(e)},chkTelephone:function(e){var r=/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/;return r.test(e)},chkPhone:function(e){var r=/^(13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/;return r.test(e)},chkPass:function(e){var r=/^[a-zA-Z0-9_-]{6,20}$/;return r.test(e)},chkPassNew:function(e){var r=/^[^\u2E80-\uFFA0\s]{6,20}$/;return r.test(e)},chkNumber:function(e,r){var t;switch(r){case 4:t=/^[0-9]{4}$/;break;case 5:t=/^[0-9]{5}$/;break;case 6:t=/^[0-9]{6}$/;break;case 7:t=/^[0-9]{7}$/;break;case 8:t=/^[0-9]{8}$/;break;case 9:t=/^[0-9]{9}$/;break;case 10:t=/^[0-9]{10}$/;break;case 11:t=/^[0-9]{11}$/;break;case 12:t=/^[0-9]{12}$/;break;case 13:t=/^[0-9]{13}$/;break;case 14:t=/^[0-9]{14}$/;break;case 15:t=/^[0-9]{15}$/;break;case 16:t=/^[0-9]{16}$/;break;case 17:t=/^[0-9]{17}$/;break;case 18:t=/^[0-9]{18}$/;break;default:t=/^[0-9]{6}$/}return t.test(e)},chkAliAcount:function(e){var r=/^[0-9]{11}|^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;return r.test(e)},chkBankName:function(e){var r=/^[\u2E80-\u9FFF]{4,20}$/;return r.test(e)},chkBankAcount:function(e){var r=/^[0-9]{15,23}$/;return r.test(e)},chkBankOrderNum:function(e){var r=/^[0-9]{8,}$/;return r.test(e)},chkPrice:function(e){var r=/^[0-9]{1,10}[\.][0-9]{2}$/;return r.test(e)},chkEmail:function(e){var r=/^([a-zA-Z0-9_\.-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;return r.test(e)},chkURL:function(e){var r=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;return r.test(e)},chkIP:function(e){var r=/((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)/;return r.test(e)},chkScript:function(e){var r=/^[A-Za-z0-9|_|-|\u4E00-\u9FA5\uF900-\uFA2D|@|#|,|.|;]+$/;return r.test(e)}};t.exports=n});