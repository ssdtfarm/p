/*! kinhom by linyandi 2014-12-02 */
function loadLoginDialog(){$(document.body).append('<div class="ui-login-dialog-mark"></div>'),$(".ui-login-dialog-mark").css({width:$("html,body").outerWidth(),height:$("html,body").height()}),$("#dialogLogin").show(),$(".login-dialog-close-btn").click(function(){$(this).parent().parent().hide(),$(".ui-login-dialog-mark").hide()}),$(".ui-login-hide").on("focus",function(){$(this).hide().next("input").show().focus()}),$(".ui-login-show").on("blur",function(){""==$(this).val()?$(this).hide().prev("input").show():$(this).prev("input").hide()})}function submitForm(){var user_name=$(".input_username").val(),password=$(".input_password").val(),formhash=$('input[name="formhash"]').val(),form_submit=$('input[name="form_submit"]').val(),nchash=$('input[name="nchash"]').val(),param={user_name:user_name,password:password,formhash:formhash,form_submit:form_submit,nchash:nchash};chkUserName(user_name)&&chkUserPass(password)&&$.post("/index.php?act=login&ajax=1",param,function(result){result=eval("("+result+")"),1==result.status?location.reload(!0):result.status<0&&alert(result.msg)})}function submitEvent(){var a=$(".input_username").val(),b=$(".input_password").val();return chkUserName(a)&&chkUserPass(b)?!0:!1}function chkUserName(a){var a=a,b=0;if(isEmpty(a))return alert("用户名不能为空！"),!1;if(isChineseChar(a))return alert("用户名不能包含中文字符！"),!1;if(checkIsEmail(a)){var c=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!c.test(a))return alert("邮箱地址不正确，请重新输入"),!1;b=1}return stripscript(a)&&!b?(alert("用户名需为字母、数字、点、减号、下划线组成"),!1):/^[0-9]*$/.test(a)&&a.length>11?(alert("用户名不能为长于11位的纯数字!"),!1):a.length<6||a.length>20?(alert("用户名长度为6~20个字符"),!1):!0}function chkUserPass(a){return isEmpty(a)?(alert("请输入您的密码！"),!1):a.length<6||a.length>20?(alert("密码长度为6-20个字符，且区分大小写!"),!1):stripscript(a)?(alert("请勿输入特殊字符"),!1):!0}function isEmpty(a){var b=$.trim(a);return""==b?!0:!1}function isChineseChar(a){var b=/[\u4E00-\u9FA5\uF900-\uFA2D]/;return b.test(a)}function stripscript(a){var b=/^[A-Za-z0-9_-]+$/gi;return b.test(a)?!1:!0}function checkIsEmail(a){var b=/^([a-zA-Z0-9._-])+@+/,c=/^([a-zA-Z0-9._-])+@([a-zA-Z0-9_-])+/;return b.test(a)||c.test(a)?!0:!1}$(document).on("keydown",".input_password,.input_username",function(a){"13"==a.keyCode&&(submitForm(),a.preventDefault())});