<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>迎战618，2000元红包来即送！免费送手持吸尘器，大转盘抽现金大奖，100%中奖！</title>

    <link href="css/ac_201503.css" rel="stylesheet" type="text/css" />

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/jQueryRotate-2.3.min.js"></script>
    <script type="text/javascript" src="js/jquery.easing.min.js"></script>

</head>
<body>

<div class="ly-plate">
    <div class="rotate-bg"></div>
    <div class="lottery-star"><img src="img/rotate-static.png" id="lotteryBtn"></div>
</div>

<script type="text/javascript">
    $(function(){
        var timeOut = function(){  //超时函数
            $("#lotteryBtn").rotate({
                angle:0,
                duration: 10000,
                animateTo: 2160, //这里是设置请求超时后返回的角度，所以应该还是回到最原始的位置，2160是因为我要让它转6圈，就是360*6得来的
                callback:function(){
                    alert('网络超时')
                }
            });
        };
        var rotateFunc = function(awards,angle,text){  //awards:奖项，angle:奖项对应的角度
            $('#lotteryBtn').stopRotate();
            $("#lotteryBtn").rotate({
                angle:0,
                duration: 5000,
                animateTo: angle+1440, //angle是图片上各奖项对应的角度，1440是我要让指针旋转4圈。所以最后的结束的角度就是这样子^^
                callback:function(){
                    alert(text)
                }
            });
        };

        var flag = false;
        $("#lotteryBtn").rotate({
            bind:
            {
                click: function(){
                    // var time = [0,1];
                    //     time = time[Math.floor(Math.random()*time.length)];
                    // if(time==0){
                    //     timeOut(); //网络超时
                    // }
                    if(!flag){
                        var time =1;
                        flag = true;
                        if(time==1){
                            var data = [1,2,3,0]; //返回的数组
                            data = data[Math.floor(Math.random()*data.length)];
                            if(data==1){
                                rotateFunc(1,337,'恭喜您抽中的一等奖')
                            }
                            if(data==2){
                                rotateFunc(2,67,'恭喜您抽中的二等奖')
                            }
                            if(data==3){
                                rotateFunc(3,202,'恭喜您抽中的三等奖')
                            }
                            if(data==0){
                                var angle = [22,67,112,157,247,292];
                                // var angle = [0];
                                angle = angle[Math.floor(Math.random()*angle.length)];
                                rotateFunc(0,angle,'很遗憾，这次您未抽中奖')
                            }
                        }
                    }else{
                        alert("只能抽一次！");
                    }
                }
            }

        });

    });
</script>

</body>
</html>