define(function(require,exports,module){function itemLoadPage(config){function init(){$.ajax({url:loadURL,data:data,dataType:"jsonp",success:function(result){"succ"==result.status?(result.data.sPage=getStartPage(result.data.curPage,result.data.pages),result.data.ePage=getEndPage(result.data.curPage,result.data.pages),result.data.nextPage=result.data.curPage==result.data.pages?result.data.pages:parseInt(result.data.curPage)+1,dataDom.html(template(dataTplName,result.data)),pageDom.html(template(pageTplName,result.data)),addEvent(pageDom)):dataDom.html("暂无数据")}})}function addEvent(){pageDomID=pageDom.attr("id"),pageArr=pageDom.find("a"),pageArr.each(function(index){$(this).on("click",function(event){event.preventDefault(),loadMore($(this).attr("data-page"))})})}function loadMore(pageNum){var loadPage=pageNum;$.ajax({url:loadURL,data:{curPage:loadPage},dataType:"jsonp",success:function(result){"succ"==result.status?(result.data.sPage=getStartPage(result.data.curPage,result.data.pages),result.data.ePage=getEndPage(result.data.curPage,result.data.pages),result.data.nextPage=result.data.curPage==result.data.pages?result.data.pages:parseInt(result.data.curPage)+1,dataDom.html(template(dataTplName,result.data)),pageDom.html(template(pageTplName,result.data)),addEvent(pageDom)):dataDom.html("暂无数据")}})}function getStartPage(cPage,pages){var sPage=0;return sPage=5>=pages?1:cPage==pages?pages>=7?parseInt(pages)-6:1:4>=cPage?1:parseInt(cPage)-2}function getEndPage(cPage,pages){var ePage=0;return ePage=5>=pages?pages:cPage==pages?pages:parseInt(cPage)+2<=pages?parseInt(cPage)+2:pages}var config=config||{},loadURL=config.loadURL||"",data=(config.curPage||1,config.pages||1,config.data||{}),template=(config.dataList||function(){},config.pageList||function(){},config.template||function(){}),dataTplName=config.dataTplName||"",pageTplName=config.pageTplName||"",dataDom=config.dataDom||"",pageDom=config.pageDom||"",pageArr="";init()}module.exports=itemLoadPage});