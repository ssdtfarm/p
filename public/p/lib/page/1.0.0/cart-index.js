define("libpage.0.0/cart-index",["lib/template/tempcart","lib/template/tempcomment","lib/components/dialog/1.0.0/dialog","lib/components/dialog/1.0.0/popup","lib/components/dialog/1.0.0/dialog-config","lib/components/khCheckbox/1.0.0/khCheckbox","lib/components/qrcode/1.0.0/qrcode"],function(t,e,a){function n(t){$.ajax({url:cdnConfig.cartApiPath+"/delete/"+t,dataType:"jsonp",success:function(t){window.location.reload()}})}function i(){var t=$("input[name=skuArr]").val(),e=$("input[name=numArr]").val(),a=$("input[name=werksID]").val(),n=cdnConfig.m+"/cart/werks?id="+t+"&num="+e+"&werks_sn="+a;$("#qrcodeCanvas").html('<i><img src="http://misc.jjcdn.com/p/images/qrcode-logo.png"></i>');var i=navigator.userAgent.toLowerCase();renderType="canvas",/msie/gi.test(i)&&(renderType="table"),$("#qrcodeCanvas").qrcode({text:n,render:renderType,width:120,height:120})}function s(t){var e=$(t);e.each(function(t){var e=$(this),a=e.find(".JQ_subNumber"),n=e.find(".JQ_addNumber"),i=e.find("input[name=number]"),s=$.trim(e.parents("tr").find("input[name=cartId]").val());n.on("click",function(){var t=$.trim(i.val());num=parseInt(t)+1,i.val(num),c(),o(s,$.trim(i.val()))}),a.on("click",function(){var t=i.val();t=1>=t?1:parseInt(t)-1,i.val(t),c(),o(s,$.trim(i.val()))}),i.on("keyup",function(){var t=parseInt($(this).val());t=0>=t?$(this).val(1):t;var e=/^[0-9]{1,}$/g;e.test(t)||$(this).val(1),c(),o(s,$.trim(i.val()))})})}function o(t,e){$.ajax({url:cdnConfig.cartApiPath+"/update/"+t+"/"+e,dataType:"jsonp",success:function(t){}})}function r(t){new b({title:"提示",width:400,fixed:!0,content:t,button:[{value:"确定",className:"ui-btns-orange",callback:function(){}},{value:"取消",className:"ui-btns-gray",callback:function(){}}]}).showModal()}function l(t,e,a){var n=new b({align:a,content:t}).show(document.getElementById(e));setTimeout(function(){n.remove()},1500)}function c(){h(),u(),d(),p(),i(),f(),g()}function d(){var t=$("input[name=chkItem][checked=checked]"),e=[];t.each(function(t){e.push($(this).siblings("input[name=cartId]").val())}),$("input[name=cartIdArr]").val(e)}function u(){var t=$("input[name=chkItem][checked=checked]"),e=[];t.each(function(){var t=$(this),a=t.val();e.push(a)}),$("input[name=skuArr]").val(e)}function h(){var t=$("input[name=chkItem][checked=checked]"),e=[];t.each(function(){var t=$(this),a=t.parents("tr").find("input[name=number]").val();e.push(a)}),$("input[name=numArr]").val(e)}function p(){var t=$("input[name=chkItem][checked=checked]").length;$("#J_chkNums").html(t)}function f(){var t=$("input[name=chkItem][checked=checked]");t.each(function(t){var e=$(this),a=e.parents("tr").find(".JQ_itemPrice"),n=e.parents("tr").find(".JQ_itemPoints"),i=e.parents("tr").find("input[name=number]").val(),s=e.parents("tr").find(".JQ_salePrice").html();s="undefined"==typeof s?0:s;var o=e.parents("tr").find(".JQ_usePoints").html();a.html(i*s),n.html(i*o)}),m()}function m(){var t=0,e=$("input[name=chkItem][checked=checked]"),a=$("input[name=chkItem][checked=checked]").length;0!=a?(e.each(function(){var e=$(this).parents("tr").find(".JQ_itemPrice").html();e="undefined"==typeof e?0:e,t+=parseInt(e)}),$("#J_total").html(t.toFixed(2))):$("#J_total").html(0)}function g(){var t=0,e=$("input[name=chkItem][checked=checked]"),a=$("input[name=chkItem][checked=checked]").length;0!=a?(e.each(function(){var e=$.trim($(this).parents("tr").find(".JQ_itemPoints").html());e=""==e?0:e,t+=parseInt(e)}),$("input[name=totalPonits]").val(t)):$("input[name=totalPonits]").val(0)}var v=t("../../template/tempcart"),b=(t("../../template/tempcomment"),t("../../components/dialog/1.0.0/dialog")),_=t("../../components/khCheckbox/1.0.0/khCheckbox");t("../../components/qrcode/1.0.0/qrcode");c(),s(".JQ_setNumer"),$(".JQ_favorite").on("click",function(){var t=$(this),e=t.parents("tr").find("input[name=chkItem]").val(),a=t.attr("id");if(t.hasClass("icon-cart-favorite-off"))$.ajax({url:cdnConfig.apiPath+"/favorite/add/"+e,dataType:"jsonp",success:function(e){"succ"==e.status&&"succ"==e.data.status?(t.removeClass("icon-cart-favorite-off").addClass("icon-cart-favorite-on"),l("已成功加入收藏夹",a,"top")):l(e.data.msg,a,"top")}});else{new b({title:"提示",content:'<p>&nbsp;</p><p class="fs-14 fc-333>您已经收藏过此商品。</p>',fixed:!0,width:400,height:80,okValue:"确定",ok:function(){}})}}),$(".JQ_deleteItem").on("click",function(){var t='<p class="tc fs-14">是否删除此商品？</p>',e=$(this).attr("id");new b({title:"提示",width:400,fixed:!0,content:t,button:[{value:"确定",className:"ui-btns-orange",callback:function(){n(e)}},{value:"取消",className:"ui-btns-gray",callback:function(){}}]}).showModal()}),$(".JQ_deleteAll").on("click",function(t){t.preventDefault();var e=new b({title:"提示",width:400,fixed:!0}),a='<p class="tc fs-14">请选择要删除的商品！</p>',i='<p class="tc fs-14">是否要删除选中的商品？</p>',s=$("input[name=chkItem][checked=checked]").length;0==s?(e.content(a),e.button([{value:"确定",className:"ui-btns-orange",callback:function(){}}]),e.showModal()):(e.content(i),e.button([{value:"确定",className:"ui-btns-orange",callback:function(){n($("input[name=cartIdArr]").val())}},{value:"取消",className:"ui-btns-gray",callback:function(){}}]),e.showModal())}),_({mainCell:"#J_cartForm",chkAll:{domID:".JQ_chkAll",callback:function(t){c()}},chkItem:{domID:".JQ_chkItem",callback:function(){c()}},button:[{domID:"#J_cartSubmit",callback:function(t){var e=$("input[name=totalPonits]").val(),a='<p class="tc fs-14>请选择要购买的商品！</p>',n='<p class="tc fs-14">您的积分不够，不能使用积分换购！</p>',i=$("input[name=chkItem][checked=checked]").length;return 0==i?r(a):$.ajax({url:cdnConfig.apiPath+"/login/status",dataType:"jsonp",success:function(t){"succ"!=t.status||t.data.islogin?e>0?$.ajax({url:cdnConfig.cartApiPath+"/cart/integral",dataType:"jsonp",success:function(t){return"failed"==t.status?(r(n),!1):void(parseInt(t.data.points)>=parseInt(e)?$("#J_cartForm").submit():r(n))}}):$("#J_cartForm").submit():window.location.href=cdnConfig.passport+"?url="+window.location.href}}),!1}}]}),$.ajax({url:cdnConfig.cartApiPath+"/cart/ad",dataType:"jsonp",success:function(t){"succ"==t.status?$("#J_cartHotList").html(v("tplHotList",t.data)):$("#J_cartHotList").html("")}})}),!function(){function t(t,e){return(/string|function/.test(typeof e)?r:o)(t,e)}function e(t,a){return"string"!=typeof t&&(a=typeof t,"number"===a?t+="":t="function"===a?e(t.call(t)):""),t}function a(t){return u[t]}function n(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function i(t,e){if(h(t))for(var a=0,n=t.length;n>a;a++)e.call(t,t[a],a,t);else for(a in t)e.call(t,t[a],a)}function s(t,e){var a=/(\/)[^/]+\1\.\.\1/,n=("./"+t).replace(/[^/]+$/,""),i=n+e;for(i=i.replace(/\/\.\//g,"/");i.match(a);)i=i.replace(a,"/");return i}function o(e,a){var n=t.get(e)||l({filename:e,name:"Render Error",message:"Template not found"});return a?n(a):n}function r(t,e){if("string"==typeof e){var a=e;e=function(){return new d(a)}}var n=c[t]=function(a){try{return new e(a,t)+""}catch(n){return l(n)()}};return n.prototype=e.prototype=p,n.toString=function(){return e+""},n}function l(t){var e="{Template Error}",a=t.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var n in t)a+="<"+n+">\n"+t[n]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+a),e}}var c=t.cache={},d=this.String,u={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},h=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},p=t.utils={$helpers:{},$include:function(t,e,a){return t=s(a,t),o(t,e)},$string:e,$escape:n,$each:i},f=t.helpers=p.$helpers;t.get=function(t){return c[t.replace(/^\.\//,"")]},t.helper=function(t,e){f[t]=e},"function"==typeof define?define("lib/template/tempcart",[],function(e,a,n){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("tplAddressList",function(t,e){"use strict";for(var a=this,n=(a.$helpers,t.i),i=t.list,s=a.$escape,o="",n=0;n<i.length;n++)o+=" ",0==n&&(o+=' <input type="hidden" name="addressID" value="',o+=s(i[n].addressID),o+='" /> '),o+=' <dl class="ship-address-list"> <dt class="JQ_chkAddress" data-value="',o+=s(i[n].addressID),o+=",",o+=s(i[n].areaID),o+='"> <a href="javascript:void(0);" class="icon-radio-off ',0==n&&(o+="icon-radio-on"),o+=' JQ_radio"></a> ',o+=1==i[n].def?' <i class="JQ_labelIcon icon-label-f60"></i> ':' <i class="JQ_labelIcon icon-empty"></i> ',o+=' <label class="JQ_userName address-name" title="',o+=s(i[n].name),o+='">',o+=s(i[n].name),o+='</label> <span class="JQ_area address-area" title="',o+=s(i[n].proName),o+=s(i[n].cityName),o+=s(i[n].areaName),o+='" data-value="',o+=s(i[n].proID),o+=",",o+=s(i[n].cityID),o+=",",o+=s(i[n].areaID),o+=",",o+=s(i[n].proName),o+=",",o+=s(i[n].cityName),o+=",",o+=s(i[n].areaName),o+='"> ',o+=s(i[n].proName),o+=s(i[n].cityName),o+=s(i[n].areaName),o+=' </span> <span class="JQ_address address-detail" title="',o+=s(i[n].address),o+='"> ',o+=s(i[n].address),o+=' </span> <span class="JQ_telephone address-phone" title="手机/电话：',o+=s(i[n].mobile),o+="/",o+=s(i[n].telphone),o+='" data-value="',o+=s(i[n].mobile),o+=",",o+=s(i[n].telphone),o+='"> 手机/电话：',o+=s(i[n].mobile),o+="/",o+=s(i[n].telphone),o+=' </span> <input type="hidden" class="JQ_default" value="',o+=s(i[n].def),o+='"> ',1==i[n].def?o+=' <span class="default-address-text JQ_defaultText">默认地址</span> ':(o+=' <a href="javascript:void(0);" data-id="',o+=s(i[n].addressID),o+='" class="list-set-label JQ_setDefault">设为默认地址</a> '),o+=' <a href="//my.kinhom.com/user/addressdo?type=3" class="icon-modify-8c8 JQ_modifyAddress"></a> </dt> </dl> ';return new d(o)}),t("tplCartCash",function(t,e){"use strict";var a=this,n=(a.$helpers,t.list),i=a.$escape,s=t.labelName,o=t.j,r="";if(r+='<div id="J_cashWrap" style="display: none;"> <div id="J_cash" class="select-gray fl"> <i class="select-corner icon-gray-left"></i> ',0==n.length?(r+=' <label class="JQ_option select-option ">',r+=i(s),r+="</label> "):r+=' <label class="JQ_option select-option ">选择可用的现金券</label> ',r+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"> <i class="triangle-down"></i> </a> <input type="hidden" name="selectCash" /> <input type="hidden" name="selectCashPrice" value="0.00" /> ',0!=n.length){r+=' <ul id="J_cashList"> ';for(var o=0;o<n.length;o++)r+=' <li> <a href="javascript:void(0);" data-value="',r+=i(n[o].cash),r+='" data-price="',r+=i(n[o].price),r+='"> ',r+=i(n[o].name),r+=" </a> </li> ";r+=" </ul> "}return r+=" </div> </div>",new d(r)}),t("tplCoupon",function(t,e){"use strict";var a=this,n=(a.$helpers,t.list),i=a.$escape,s=t.labelName,o=t.j,r="";if(r+='<div id="J_couponWrap" style="display: none;"> <div id="J_coupon" class="select-gray fl"> <i class="select-corner icon-gray-left"></i> ',0==n.length?(r+=' <label class="JQ_option select-option ">',r+=i(s),r+="</label> "):r+=' <label class="JQ_option select-option ">选择可用的优惠券</label> ',r+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"> <i class="triangle-down"></i> </a> <input type="hidden" name="selectCoupon" /> <input type="hidden" name="selectCouponPrice" value="0.00" /> ',0!=n.length){r+=' <ul id="J_couponList"> ';for(var o=0;o<n.length;o++)r+=' <li> <a href="javascript:void(0);" data-value="',r+=i(n[o].coupon),r+='" data-price="',r+=i(n[o].price),r+='"> ',r+=i(n[o].name),r+=" </a> </li> ";r+=" </ul> "}return r+=" </div> </div>",new d(r)}),t("tplHotList",function(t,e){"use strict";var a=this,n=(a.$helpers,t.list),i=t.i,s=t.len,o=a.$escape,r="";if(r+='<dl class="cart-hot-list clearfix"> <dt>热销单品</dt> ',0!=n.length){r+=" ";for(var i=0;s=n.length,s>i;i++)r+=' <dd> <a href="',r+=o(n[i].linkURL),r+='"><img src="',r+=o(n[i].imgURL),r+='" width="190" height="127" /></a> <a href="',r+=o(n[i].linkURL),r+='" class="cart-hot-list-title">',r+=o(n[i].title),r+='</a> <p> <label class="cart-hot-list-price">&yen ',r+=o(n[i].price),r+='</label> <span class="cart-hot-list-text">已有<i>',r+=o(n[i].saleNum),r+="</i>人购买</span> </p> </dd> "}return r+=" </dl>",new d(r)}),t("tplSelectShip",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.labelName,s=t.list,o=t.j,r=t.len,l="";if(l+='<i class="select-corner icon-gray-left"></i> <label class="JQ_option select-option">',l+=n(i),l+='</label> <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"> <i class="triangle-down"></i> </a> ',0!=s.length){l+=' <input name="shipType" type="hidden" value="',l+=n(s[0].shipType),l+='" /> <ul> ';for(var o=0;r=s.length,r>o;o++)l+=' <li> <a href="javascript:void(0);" data-value="',l+=n(s[o].shipType),l+='" data-price="',l+=n(s[o].price),l+='">',l+=n(s[o].name),l+="</a> </li> ";l+=" </ul> "}else l+=" <ul></ul> ";return new d(l)})}(),!function(){function t(t,e){return(/string|function/.test(typeof e)?r:o)(t,e)}function e(t,a){return"string"!=typeof t&&(a=typeof t,"number"===a?t+="":t="function"===a?e(t.call(t)):""),t}function a(t){return u[t]}function n(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function i(t,e){if(h(t))for(var a=0,n=t.length;n>a;a++)e.call(t,t[a],a,t);else for(a in t)e.call(t,t[a],a)}function s(t,e){var a=/(\/)[^/]+\1\.\.\1/,n=("./"+t).replace(/[^/]+$/,""),i=n+e;for(i=i.replace(/\/\.\//g,"/");i.match(a);)i=i.replace(a,"/");return i}function o(e,a){var n=t.get(e)||l({filename:e,name:"Render Error",message:"Template not found"});return a?n(a):n}function r(t,e){if("string"==typeof e){var a=e;e=function(){return new d(a)}}var n=c[t]=function(a){try{return new e(a,t)+""}catch(n){return l(n)()}};return n.prototype=e.prototype=p,n.toString=function(){return e+""},n}function l(t){var e="{Template Error}",a=t.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var n in t)a+="<"+n+">\n"+t[n]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+a),e}}var c=t.cache={},d=this.String,u={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},h=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},p=t.utils={$helpers:{},$include:function(t,e,a){return t=s(a,t),o(t,e)},$string:e,$escape:n,$each:i},f=t.helpers=p.$helpers;t.get=function(t){return c[t.replace(/^\.\//,"")]},t.helper=function(t,e){f[t]=e},"function"==typeof define?define("lib/template/tempcomment",[],function(e,a,n){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("tplAddressForm",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.actionURL,s=t.addressID,o=t.userName,r=t.address,l=t.telephone,c=t.mobilephone,u=t.defaultAdd,h="";return h+='<form id="J_addressForm" action="',h+=n(i),h+='" method="post"> <input type="hidden" name="addressID" value="',h+=n(s),h+='"> <table id="J_add" class="person-address-add-table"> <tbody class="person-address"> <tr class="item"> <th class="address-add-head">收货人：</th> <td> <input id="J_userName" class="person-address-add-input" name="userName" value="',h+=n(o),h+='" /> <span class="fc-f60">*</span> </td> </tr> <tr class="item"> <th class="address-add-head">详细地址：</th> <td id="J_selectAddress"></td> </tr> <tr class="item"> <th>&nbsp;</th> <td> <p> <input id="J_address" class="person-address-add-input detailed-address-input" name="address" placeholder="具体地址" value="',h+=n(r),h+='" /> <span class="fc-f60">*</span> </p> <p> <label class="person-address-add-tip">&nbsp;&nbsp;&nbsp;(不需要重复填写省/市/区)</label> </p> </td> </tr> <tr class="item"> <th class="address-add-head">固定电话：</th> <td> <input id="J_tel" class="person-address-add-input" name="tel" value="',h+=n(l),h+='" /> <label class="person-address-add-tip"><span>*</span>&nbsp;&nbsp;（示例：020-88888888-999）</label> </td> </tr> <tr class="item"> <th class="address-add-head">手机：</th> <td> <input id="J_phone" class="person-address-add-input" name="phone" value="',h+=n(c),h+='" /> <label class="person-address-add-tip"><span>*</span>&nbsp;&nbsp;（手机或固话必填一项）</label> </td> </tr> <tr class="item"> <th>&nbsp;</th> <td> <div class="defult-address-choose"> ',h+="1"==u?' <a id="J_setDefault" href="javascript:void(0);" class="icon icon-box-checked"></a> ':' <a id="J_setDefault" href="javascript:void(0);" class="icon icon-box-normal"></a> ',h+=' <span class="address-font-gray">设为默认地址</span> <input type="hidden" name="setDefault" value="',h+=n(u),h+='" /> </div> </td> </tr> </tbody> </table> </form>',new d(h)}),t("tplBottomAd",function(t,e){"use strict";var a=this,n=(a.$helpers,t.link),i=a.$escape,s=t.linkURL,o=t.title,r=t.imgURL,l="";return l+='<div class="full-ad-wrap" style="width: 100%; overflow: hidden;"> <div style="background:url(http://misc.jjcdn.com/p/images/loading-t.gif) center center no-repeat;"> <a href="',""!=n&&(l+=i(n)),""!=s&&(l+=i(s)),l+='" target="_blank" title="',l+=i(o),l+='" style=" display:block; width:100%;min-height: 80px;background:url(',l+=i(r),l+=') center top no-repeat; "> <img src="',l+=i(r),l+='" style="visibility: hidden;display: block" /> </a> <a href="javascript:void(0);" class="full-ad-close" id="J_itemBottomAdClose"><span></span></a> </div> </div>',new d(l)}),t("tplEditPassForm",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.actionURL,s="";return s+='<form id="J_editPassForm" action="',s+=n(i),s+='" method="post"> <div class="fc-8c8">为了您的账户安全，请定期更换登录密码，并确保登录密码设置与提现密码不同。</div> <input type="hidden" name="form" value="form"> <div class="a-edit-pass-tr"> <p id="J_oldPass" class="edit-input-wrap"> <input type="password" name="old_passwd" placeholder="原密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> <div class="a-edit-pass-tr fc-8c8"> <p id="J_newPass" class="edit-input-wrap"> <input type="password" name="new_passwd" placeholder="输入新密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> <div class="a-edit-pass-tr fc-8c8"> <p id="J_confirmNewPass" class="edit-input-wrap"> <input type="password" name="confirmNewPass" placeholder="再次输入新密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> </form>',new d(s)}),t("tplFloatNav",'<div id="J_floatNav" class="float-nav"> <a href="http://chat10.live800.com/live800/chatClient/chatbox.jsp?companyID=201143&jid=2104161973" class="float-nav-char-wrap JQ_floatNavNormal" target="_blank"> <span class="floag-online-chat">在线客服</span> <i class="icon-float-chat normal-icon"></i> </a> <a href="http://crm2.qq.com/page/portalpage/wpa.php?uin=4006538038&aty=0&a=0&curl=&ty=1" class="float-nav-qq JQ_floatNavNormal" target="_blank"> <span>QQ客服</span> <i class="icon-float-qq normal-icon"></i> </a> <a href="http://cart.kinhom.com/list.html" class="float-nav-cart JQ_floatNavNormal" target="_blank"> <span>购物车</span> <i class="icon-float-cart normal-icon"></i> <i class="icon-cart-num num-icon">0</i> </a> <a href="javascript:void(0);" class="float-nav-wechat JQ_floatNavWechat"> <span> <img src="http://misc.jjcdn.com/p/images/float_wechat.png" width="40" height="40" /> </span> <i class="icon-float-wechat normal-icon"></i> </a> <a href="http://www.wenjuan.com/s/qU36f2/" target="_blank" class="float-nav-feedback JQ_floatNavNormal"> <span>意见反馈</span> <i class="icon-float-feedback normal-icon"></i> </a> <a id="J_floatGoTop" href="javascript:void(0);" class="float-nav-top JQ_floatNavNormal"> <span>返回顶部</span> <i class="icon-float-top normal-icon"></i> </a> </div>'),t("tplLoginDialog",'<div class="login-dialog"> <div class="login-dialog-form"> <form action="javascript:void(0);" method="post"> <p class="login-dialog-form-tr" id="J_loginUserName"> <label>用户名：</label> <input type="text" name="loginUserName" placeholder="输入用户名/邮箱/手机"> </p> <p class="login-dialog-form-tip"></p> <p class="login-dialog-form-tr" id="J_loginPassword"> <label>密&nbsp;&nbsp;&nbsp;码：</label> <input type="password" name="loginPassword" placeholder="输入密码"> </p> <p class="login-dialog-form-tip"></p> </form> </div> </div> '),t("tplMinBar",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.live800,s=t.cdnPath,o=t.wapQQ,r=t.cart,l=t.mobile,c=t.wechat,u=t.feedback,h=t.gotop,p="";return p+=' <section id="J_minBar" class="min-bar"> <div class="min-bar-tabs"> <div class="min-bar-tab min-bar-online"> <div class="min-bar-online-icon"> <a href="',p+=n(i.clientLink),p+='" class="blankLink JQ_minBarOnline" target="_blank"> <img src="',p+=n(s),p+=n(i.iconPath),p+='" width="',p+=n(i.iconWidth),p+='" height="',p+=n(i.iconHeight),p+='" alt="',p+=n(i.iconText),p+='"/> <label class="min-bar-chat-num">',p+=n(i.chatNum),p+='</label> </a> <span class="min-bar-online-pop"> <span class="pop-close">&nbsp;</span> <a href="',p+=n(i.clientLink),p+='" class="pop-chat" target="_blank">&nbsp;</a> </span> </div> </div> <div class="min-bar-tab min-bar-qq min-text"> <div class="min-bar-qq-icon"> <a href="',p+=n(o.clientLink),p+='" class="blankLink" target="_blank"> <img src="',p+=n(s),p+=n(o.iconPath),p+='" width="',p+=n(o.iconWidth),p+='" height="',p+=n(o.iconHeight),p+='" alt="',p+=n(o.iconText),p+='"/> </a> <span class="min-bar-qq-text text">',p+=n(o.iconText),p+='</span> </div> </div> <div class="min-bar-tab min-bar-cart min-cart"> <div class="min-bar-cart-icon"> <a href="',p+=n(r.clientLink),p+='" class="icon-float-cart"> <span id="J_cartNum" class="min-bar-cart-num">',p+=n(r.chatNum),p+='</span> </a> </div> <div id="J_minBarPlugin" class="min-bar-plugin"> <div class="bar-plugin-cart"> <ul id="J_pluginCart"> </ul> <div class="plugin-cart-info"> <p class="cart-info-price"> <span class="cart-info-num"> 共 <label id="J_minBarCartNum">0</label> 件商品 </span> <span class="cart-info-total"> 合计: <small>&yen;</small> <label id="J_minBarCartTotal">0</label> </span> </p> <p class="cart-info-shipping">(不含运费)</p> <p class="cart-info-btn"> <a href="javascript:void(0);" id="J_minBarBtn" class="btn-gray" target="_blank">查看购物车</a> </p> </div> </div> </div> </div> <div class="min-bar-tab min-bar-phone min-phone"> <div class="min-bar-phone-icon"> <a href="',p+=n(l.clientLink),p+='" class="icon-float-phone">&nbsp;</a> <span class="min-bar-phone-img phone"> <img src="',p+=n(s),p+=n(l.iconPath),p+='" width="',p+=n(l.iconWidth),p+='" height="',p+=n(l.iconHeight),p+='" alt="',p+=n(l.iconText),p+='" /> </span> </div> </div> <div class="min-bar-tab min-bar-wechat min-wechat"> <div class="min-bar-wechat-icon"> <a href="',p+=n(c.clientLink),p+='" class="icon-float-wechat">&nbsp;</a> <span class="min-bar-wechat-img wechat"> <img src="',p+=n(s),p+=n(c.iconPath),p+='" width="',p+=n(c.iconWidth),p+='" height="',p+=n(c.iconHeight),p+='" alt="',p+=n(c.iconText),p+='" /> </span> </div> </div> <div class="min-bar-tab min-bar-feedback min-text"> <div class="min-bar-feedback-icon"> <a href="',p+=n(u.clientLink),p+='" class="icon-float-feedback blankLink" target="_blank">&nbsp;</a> <span class="min-bar-feedback-text text">',p+=n(u.iconText),p+='</span> </div> </div> <div class="min-bar-tab min-bar-gtop min-text"> <div class="min-bar-gtop-icon" id="J_minBarGoTop"> <a href="',p+=n(h.clientLink),p+='" class="icon-float-top">&nbsp;</a> <span class="min-bar-gtop-text text">',p+=n(h.iconText),p+='</span> </div> </div> </div> </section> <section class="min-bar-mark"></section> ',new d(p)}),t("tplSelectAddress",function(t,e){"use strict";var a=this,n=(a.$helpers,t.valCity),i=a.$escape,s=t.textPro,o=t.valPro,r=t.textCity,l=t.valArea,c=t.textArea,u="";return u+='<div id="J_selectProvience" class="select-gray fl"> <i class="select-corner icon-gray-left"></i> ',""==n?u+=' <label class="JQ_option select-option w90" data-value="0">请选择省</label> ':(u+=' <label class="JQ_option select-option w90" data-value="0">',u+=i(s),u+="</label> "),u+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_proList"></ul> <input type="hidden" name="valProvince" value="',u+=i(o),u+='" /> </div> <div class="select-gray fl JQ_addressCity"> <i class="select-corner icon-gray-left"></i> ',""==n?u+=' <label class="JQ_option select-option w90" data-value="0">请选择市</label> ':(u+=' <label class="JQ_option select-option w90" data-value="0">',u+=i(r),u+="</label> "),u+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_cityList"></ul> <input type="hidden" name="valCity" value="',u+=i(n),u+='" /> </div> <div class="select-gray fl JQ_addressArea"> <i class="select-corner icon-gray-left"></i> ',""==l?u+=' <label class="JQ_option select-option w90" data-value="0">请选择区</label> ':(u+=' <label class="JQ_option select-option w90" data-value="0">',u+=i(c),u+="</label> "),u+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_areaList"></ul> <input type="hidden" name="valArea" value="',u+=i(l),u+='" /> </div> ',new d(u)}),t("tplTopAd",function(t,e){"use strict";var a=this,n=(a.$helpers,t.link),i=a.$escape,s=t.linkURL,o=t.title,r=t.imgURL,l="";return l+='<div class="top-ad-wrap" style="width: 100%; overflow: hidden;"> <div style="background:url(http://misc.jjcdn.com/p/images/loading-t.gif) center center no-repeat;"> <a href="',""!=n&&(l+=i(n)),""!=s&&(l+=i(s)),l+='" target="_blank" title="',l+=i(o),l+='" style=" display:block; width:100%; min-height: 80px; background:url(',l+=i(r),l+=') center top no-repeat; "> <img src="',l+=i(r),l+='" style="visibility: hidden;display: block" /> </a> <a href="javascript:void(0);" class="index-top-ad-close" id="J_indexTopAdClose"> <span></span> </a> </div> </div>',new d(l)})}(),define("lib/components/dialog/1.0.0/dialog",["lib/components/dialog/1.0.0/popup","lib/components/dialog/1.0.0/dialog-config"],function(t,e,a){var n=t("./popup"),i=t("./dialog-config"),s=i.cssUri;if(s){var o=t[t.toUrl?"toUrl":"resolve"];o&&(s=o(s),s='<link rel="stylesheet" href="'+s+'" />',$("base")[0]?$("base").before(s):$("head").append(s))}var r=0,l=new Date-0,c=!("minWidth"in $("html")[0].style),d="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),u=!c&&!d,h=function(t,e,a){var n=t=t||{};"string"!=typeof t&&1!==t.nodeType||(t={content:t,fixed:!d}),t=$.extend(!0,{},h.defaults,t),t.original=n;var i=t.id=t.id||l+r,s=h.get(i);return s?s.focus():(u||(t.fixed=!0),t.quickClose&&(t.modal=!0,t.backdropOpacity=0),$.isArray(t.button)||(t.button=[]),void 0!==a&&(t.cancel=a),t.cancel&&t.button.push({id:"cancel",className:t.cancelClassName,value:t.cancelValue,callback:t.cancel,display:t.cancelDisplay}),void 0!==e&&(t.ok=e),t.ok&&t.button.push({id:"ok",className:t.okClassName,value:t.okValue,callback:t.ok,autofocus:!0}),h.list[i]=new h.create(t))},p=function(){};p.prototype=n.prototype;var f=h.prototype=new p;return h.create=function(t){var e=this;$.extend(this,new n);var a=(t.original,$(this.node).html(t.innerHTML)),i=$(this.backdrop);return this.options=t,this._popup=a,$.each(t,function(t,a){"function"==typeof e[t]?e[t](a):e[t]=a}),t.zIndex&&(n.zIndex=t.zIndex),a.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").on("click",function(t){e._trigger("cancel"),t.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),t.quickClose&&i.on("onmousedown"in document?"mousedown":"click",function(){return e._trigger("cancel"),!1}),this.addEventListener("show",function(){i.css({opacity:0,background:t.backdropBackground}).animate({opacity:t.backdropOpacity},150)}),this._esc=function(t){var a=t.target,i=a.nodeName,s=/^input|textarea$/i,o=n.current===e,r=t.keyCode;!o||s.test(i)&&"button"!==a.type||27===r&&e._trigger("cancel")},$(document).on("keydown",this._esc),this.addEventListener("remove",function(){$(document).off("keydown",this._esc),delete h.list[this.id]}),r++,h.oncreate(this),this},h.create.prototype=f,$.extend(f,{content:function(t){var e=this._$("content");return"object"==typeof t?(t=$(t),e.empty("").append(t.show()),this.addEventListener("beforeremove",function(){$("body").append(t.hide())})):e.html(t),this.reset()},title:function(t){return this._$("title").text(t),this._$("header")[t?"show":"hide"](),this},width:function(t){return this._$("content").css("width",t),this.reset()},height:function(t){return this._$("content").css("height",t),this.reset()},button:function(t){t=t||[];var e=this,a="",n=0;return this.callbacks={},"string"==typeof t?(a=t,n++):$.each(t,function(t,i){var s=i.id=i.id||i.value,o="";e.callbacks[s]=i.callback,i.display===!1?o=' style="display:none"':n++,a+='<button type="button" i-id="'+s+'" class="'+(i.className?i.className:"ui-btns-nor")+'"'+o+(i.disabled?" disabled":"")+(i.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+i.value+"</button>",e._$("button").on("click","[i-id="+s+"]",function(t){var a=$(this);a.attr("disabled")||e._trigger(s),t.preventDefault()})}),this._$("button").html(a),this._$("footer")[n?"show":"hide"](),this},statusbar:function(t){return this._$("statusbar").html(t)[t?"show":"hide"](),this},_$:function(t){return this._popup.find("[i="+t+"]")},_trigger:function(t){var e=this.callbacks[t];return"function"!=typeof e||e.call(this)!==!1?this.close().remove():this}}),h.oncreate=$.noop,h.getCurrent=function(){return n.current},h.get=function(t){return void 0===t?h.list:h.list[t]},h.list={},h.defaults=i,h}),define("lib/components/dialog/1.0.0/popup",[],function(t,e,a){function n(){this.destroyed=!1,this.__popup=$("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=$("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],i++}var i=0,s=!("minWidth"in $("html")[0].style),o=!s;return $.extend(n.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(t){if(this.destroyed)return this;var e=this.__popup,a=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=t||this.follow,!this.__ready){if(e.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),s||$(window).on("resize",$.proxy(this.reset,this)),this.modal){var i={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||n.zIndex};e.addClass(this.className+"-modal"),o||$.extend(i,{position:"absolute",width:$(window).width()+"px",height:$(document).height()+"px"}),a.css(i).attr({tabindex:"0"}).on("focus",$.proxy(this.focus,this)),this.__mask=a.clone(!0).attr("style","").insertAfter(e),a.addClass(this.className+"-backdrop").insertBefore(e),this.__ready=!0}e.html()||e.html(this.innerHTML)}return e.addClass(this.className+"-show").show(),a.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(t){return!this.destroyed&&this.open&&(void 0!==t&&(this.returnValue=t),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),n.current===this&&(n.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),s||$(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var t in this)delete this[t];return this},reset:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("reset"),this},resize:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("resize"),this},focus:function(){var t=this.node,e=this.__popup,a=n.current,i=this.zIndex=n.zIndex++;if(a&&a!==this&&a.blur(!1),!$.contains(t,this.__getActive())){var s=e.find("[autofocus]")[0];!this._autofocus&&s?this._autofocus=!0:s=t,
this.__focus(s)}return e.css("zIndex",i),n.current=this,e.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var t=this.__activeElement,e=arguments[0];return e!==!1&&this.__focus(t),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(t,e){return this.__getEventListener(t).push(e),this},removeEventListener:function(t,e){for(var a=this.__getEventListener(t),n=0;n<a.length;n++)e===a[n]&&a.splice(n--,1);return this},__getEventListener:function(t){var e=this.__listener;return e||(e=this.__listener={}),e[t]||(e[t]=[]),e[t]},__dispatchEvent:function(t){var e=this.__getEventListener(t);this["on"+t]&&this["on"+t]();for(var a=0;a<e.length;a++)e[a].call(this)},__focus:function(t){try{this.autofocus&&!/^iframe$/i.test(t.nodeName)&&t.focus()}catch(e){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,a=e&&e.activeElement||t;return a}catch(n){}},__center:function(){var t=this.__popup,e=$(window),a=$(document),n=this.fixed,i=n?0:a.scrollLeft(),s=n?0:a.scrollTop(),o=e.width(),r=e.innerHeight(),l=t.width(),c=t.height(),d=(o-l)/2,u=(r-c)/2,h=t[0].style;h.left=Math.max(parseInt(d),i)+"px",h.top=Math.max(parseInt(u),s)+"px"},__follow:function(t){var e=t.parentNode&&$(t),a=this.__popup;if(this.__followSkin&&a.removeClass(this.__followSkin),e){var n=e.offset();if(n.left*n.top<0)return this.__center()}var i=this,s=this.fixed,o=$(window),r=$(document),l=o.width(),c=o.height(),d=r.scrollLeft(),u=r.scrollTop(),h=a.width(),p=a.height(),f=e?e.outerWidth():0,m=e?e.outerHeight():0,g=this.__offset(t),v=g.left,b=g.top,_=s?v-d:v,k=s?b-u:b,y=s?0:d,w=s?0:u,C=y+l-h,L=w+c-p,x={},J=this.align.split(" "),N=this.className+"-",T={top:"bottom",bottom:"top",left:"right",right:"left"},A={top:"top",bottom:"top",left:"left",right:"left"},I=[{top:k-p,bottom:k+m,left:_-h,right:_+f},{top:k,bottom:k-p+m,left:_,right:_-h+f}],P={left:_+f/2-h/2,top:k+m/2-p/2},B={left:[y,C],top:[w,L]};$.each(J,function(t,e){I[t][e]>B[A[e]][1]&&(e=J[t]=T[e]),I[t][e]<B[A[e]][0]&&(J[t]=T[e])}),J[1]||(A[J[1]]="left"===A[J[0]]?"top":"left",I[1][J[1]]=P[A[J[1]]]),N+=J.join("-")+" "+this.className+"-follow",i.__followSkin=N,e&&a.addClass(N),x[A[J[0]]]=parseInt(I[0][J[0]]),x[A[J[1]]]=parseInt(I[1][J[1]]),a.css(x)},__offset:function(t){var e=t.parentNode,a=e?$(t).offset():{left:t.pageX,top:t.pageY};t=e?t:t.target;var n=t.ownerDocument,i=n.defaultView||n.parentWindow;if(i==window)return a;var s=i.frameElement,o=$(n),r=o.scrollLeft(),l=o.scrollTop(),c=$(s).offset(),d=c.left,u=c.top;return{left:a.left+d-r,top:a.top+u-l}}}),n.zIndex=1024,n.current=null,n}),define("lib/components/dialog/1.0.0/dialog-config",[],{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,okClassName:"ui-btns-ok",cancel:null,cancelClassName:"ui-btns-cancel",okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><span i="close" class="ui-dialog-close">&#215;</span><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="button" class="ui-dialog-button"></div></td></tr><tr><td i="footerSub" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div></td></tr></table></div>'}),define("lib/components/khCheckbox/1.0.0/khCheckbox",[],function(t,e,a){function n(t){function e(t,e,s){var r=$(t);r.on(e,function(t){t.preventDefault();var e=$(this),r=e.attr("href"),l=e.attr("target");if(""==i(o())){try{new dialog({title:"提示",width:400,content:'<p>&nbsp;</p><p class="tc fs-14">请选择要操作的选项！</p>',fixed:!0,button:[{value:"确定",className:"ui-btns-orange",callback:function(){}}]}).showModal()}catch(c){alert("请选择要操作的选项！")}return!1}var d=r+"?params="+i(o()),u=a(s,e);(u||void 0==u)&&n(l,d)})}function a(t,e){return t(e,f)}function n(t,e){void 0==t||"_self"==t?window.location.href=e:window.open(e,"新页面")}function i(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].value);return e}function s(t){t.toggleClass("icon-box-checked"),t.hasClass("icon-box-checked")?t.siblings("input").attr("checked","checked"):t.siblings("input").removeAttr("checked")}function o(){return $("input[checked=checked][name=chkItem]")}function r(){return $("input[checked=checked]").length}function l(){return $("input[name=chkItem]").length}function c(){v.each(function(t){$(this).addClass("icon-box-checked"),$(this).siblings("input").attr("checked","checked")}),m.each(function(t){$(this).addClass("icon-box-checked")})}function d(){v.each(function(t){$(this).removeClass("icon-box-checked").siblings("input").removeAttr("checked")}),m.each(function(t){$(this).removeClass("icon-box-checked")})}function u(){m.each(function(t){$(this).removeClass("icon-box-checked")})}for(var t=t||{},h=t.mainCell||"form",p=t.button||[],f=(t.callback||function(){},"string"==typeof h?h.indexOf("#")>-1?$(h):$("#"+h):h),m=$(t.chkAll.domID)||$(".JQ_chkAll"),g=t.chkAll.callback||function(){},v=$(t.chkItem.domID)||$(".JQ_chkItem"),b=t.chkItem.callback||function(){},_=0;_<p.length;_++)e(p[_].domID,"click",p[_].callback);v.on("click",function(t){t.preventDefault(),s($(this)),l()==r()?s(m):u(),a(b,$(this))}),m.each(function(t){$(this).on("click",function(t){t.preventDefault(),s($(this)),$(this).hasClass("icon-box-checked")?c():d(),a(g,$(this))})})}a.exports=n}),define("lib/components/qrcode/1.0.0/qrcode",[],function(t,e,a){!function(t){t.fn.qrcode=function(e){function a(t){this.mode=r,this.data=t}function n(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(t,e){if(void 0==t.length)throw Error(t.length+"/"+e);for(var a=0;a<t.length&&0==t[a];)a++;this.num=Array(t.length-a+e);for(var n=0;n<t.length-a;n++)this.num[n]=t[n+a]}function s(t,e){this.totalCount=t,this.dataCount=e}function o(){this.buffer=[],this.length=0}var r;a.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},n.prototype={addData:function(t){this.dataList.push(new a(t)),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var t=1,t=1;40>t;t++){for(var e=s.getRSBlocks(t,this.errorCorrectLevel),a=new o,n=0,i=0;i<e.length;i++)n+=e[i].dataCount;for(i=0;i<this.dataList.length;i++)e=this.dataList[i],a.put(e.mode,4),a.put(e.getLength(),l.getLengthInBits(e.mode,t)),e.write(a);if(a.getLengthInBits()<=8*n)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++){this.modules[a]=Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[a][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),7<=this.typeNumber&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var a=-1;7>=a;a++)if(!(-1>=t+a||this.moduleCount<=t+a))for(var n=-1;7>=n;n++)-1>=e+n||this.moduleCount<=e+n||(this.modules[t+a][e+n]=a>=0&&6>=a&&(0==n||6==n)||n>=0&&6>=n&&(0==a||6==a)||a>=2&&4>=a&&n>=2&&4>=n)},getBestMaskPattern:function(){for(var t=0,e=0,a=0;8>a;a++){this.makeImpl(!0,a);var n=l.getLostPoint(this);(0==a||t>n)&&(t=n,e=a)}return e},createMovieClip:function(t,e,a){for(t=t.createEmptyMovieClip(e,a),this.make(),e=0;e<this.modules.length;e++)for(var a=1*e,n=0;n<this.modules[e].length;n++){var i=1*n;this.modules[e][n]&&(t.beginFill(0,100),t.moveTo(i,a),t.lineTo(i+1,a),t.lineTo(i+1,a+1),t.lineTo(i,a+1),t.endFill())}return t},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var a=0;a<t.length;a++){var n=t[e],i=t[a];if(null==this.modules[n][i])for(var s=-2;2>=s;s++)for(var o=-2;2>=o;o++)this.modules[n+s][i+o]=-2==s||2==s||-2==o||2==o||0==s&&0==o}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),a=0;18>a;a++){var n=!t&&1==(e>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=n}for(a=0;18>a;a++)n=!t&&1==(e>>a&1),this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=n},setupTypeInfo:function(t,e){for(var a=l.getBCHTypeInfo(this.errorCorrectLevel<<3|e),n=0;15>n;n++){var i=!t&&1==(a>>n&1);6>n?this.modules[n][8]=i:8>n?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(n=0;15>n;n++)i=!t&&1==(a>>n&1),8>n?this.modules[8][this.moduleCount-n-1]=i:9>n?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var a=-1,n=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var r=0;2>r;r++)if(null==this.modules[n][o-r]){var c=!1;s<t.length&&(c=1==(t[s]>>>i&1)),l.getMask(e,n,o-r)&&(c=!c),this.modules[n][o-r]=c,i--,-1==i&&(s++,i=7)}if(n+=a,0>n||this.moduleCount<=n){n-=a,a=-a;break}}}},n.PAD0=236,n.PAD1=17,n.createData=function(t,e,a){for(var e=s.getRSBlocks(t,e),i=new o,r=0;r<a.length;r++){var c=a[r];i.put(c.mode,4),i.put(c.getLength(),l.getLengthInBits(c.mode,t)),c.write(i)}for(r=t=0;r<e.length;r++)t+=e[r].dataCount;if(i.getLengthInBits()>8*t)throw Error("code length overflow. ("+i.getLengthInBits()+">"+8*t+")");for(i.getLengthInBits()+4<=8*t&&i.put(0,4);0!=i.getLengthInBits()%8;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*t)&&(i.put(n.PAD0,8),!(i.getLengthInBits()>=8*t));)i.put(n.PAD1,8);return n.createBytes(i,e)},n.createBytes=function(t,e){for(var a=0,n=0,s=0,o=Array(e.length),r=Array(e.length),c=0;c<e.length;c++){var d=e[c].dataCount,u=e[c].totalCount-d,n=Math.max(n,d),s=Math.max(s,u);o[c]=Array(d);for(var h=0;h<o[c].length;h++)o[c][h]=255&t.buffer[h+a];for(a+=d,h=l.getErrorCorrectPolynomial(u),d=new i(o[c],h.getLength()-1).mod(h),r[c]=Array(h.getLength()-1),h=0;h<r[c].length;h++)u=h+d.getLength()-r[c].length,r[c][h]=u>=0?d.get(u):0}for(h=c=0;h<e.length;h++)c+=e[h].totalCount;for(a=Array(c),h=d=0;n>h;h++)for(c=0;c<e.length;c++)h<o[c].length&&(a[d++]=o[c][h]);for(h=0;s>h;h++)for(c=0;c<e.length;c++)h<r[c].length&&(a[d++]=r[c][h]);return a},r=4;for(var l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;0<=l.getBCHDigit(e)-l.getBCHDigit(l.G15);)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;0<=l.getBCHDigit(e)-l.getBCHDigit(l.G18);)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,a){switch(t){case 0:return 0==(e+a)%2;case 1:return 0==e%2;case 2:return 0==a%3;case 3:return 0==(e+a)%3;case 4:return 0==(Math.floor(e/2)+Math.floor(a/3))%2;case 5:return 0==e*a%2+e*a%3;case 6:return 0==(e*a%2+e*a%3)%2;case 7:return 0==(e*a%3+(e+a)%2)%2;default:throw Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new i([1],0),a=0;t>a;a++)e=e.multiply(new i([1,c.gexp(a)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case 1:return 10;case 2:return 9;case r:return 8;case 8:return 8;default:throw Error("mode:"+t)}else if(27>e)switch(t){case 1:return 12;case 2:return 11;case r:return 16;case 8:return 10;default:throw Error("mode:"+t)}else{if(!(41>e))throw Error("type:"+e);switch(t){case 1:return 14;case 2:return 13;case r:return 16;case 8:return 12;default:throw Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),a=0,n=0;e>n;n++)for(var i=0;e>i;i++){for(var s=0,o=t.isDark(n,i),r=-1;1>=r;r++)if(!(0>n+r||n+r>=e))for(var l=-1;1>=l;l++)0>i+l||i+l>=e||0==r&&0==l||o==t.isDark(n+r,i+l)&&s++;s>5&&(a+=3+s-5)}for(n=0;e-1>n;n++)for(i=0;e-1>i;i++)s=0,t.isDark(n,i)&&s++,t.isDark(n+1,i)&&s++,t.isDark(n,i+1)&&s++,t.isDark(n+1,i+1)&&s++,(0==s||4==s)&&(a+=3);for(n=0;e>n;n++)for(i=0;e-6>i;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(a+=40);for(i=0;e>i;i++)for(n=0;e-6>n;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(a+=40);for(i=s=0;e>i;i++)for(n=0;e>n;n++)t.isDark(n,i)&&s++;return t=Math.abs(100*s/e/e-50)/5,a+10*t}},c={glog:function(t){if(1>t)throw Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},d=0;8>d;d++)c.EXP_TABLE[d]=1<<d;for(d=8;256>d;d++)c.EXP_TABLE[d]=c.EXP_TABLE[d-4]^c.EXP_TABLE[d-5]^c.EXP_TABLE[d-6]^c.EXP_TABLE[d-8];for(d=0;255>d;d++)c.LOG_TABLE[c.EXP_TABLE[d]]=d;return i.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var n=0;n<t.getLength();n++)e[a+n]^=c.gexp(c.glog(this.get(a))+c.glog(t.get(n)));return new i(e,0)},mod:function(t){if(0>this.getLength()-t.getLength())return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),a=Array(this.getLength()),n=0;n<this.getLength();n++)a[n]=this.get(n);for(n=0;n<t.getLength();n++)a[n]^=c.gexp(c.glog(t.get(n))+e);return new i(a,0).mod(t)}},s.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],s.getRSBlocks=function(t,e){var a=s.getRsBlockTable(t,e);if(void 0==a)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=a.length/3,i=[],o=0;n>o;o++)for(var r=a[3*o+0],l=a[3*o+1],c=a[3*o+2],d=0;r>d;d++)i.push(new s(l,c));return i},s.getRsBlockTable=function(t,e){switch(e){case 1:return s.RS_BLOCK_TABLE[4*(t-1)+0];case 0:return s.RS_BLOCK_TABLE[4*(t-1)+1];case 3:return s.RS_BLOCK_TABLE[4*(t-1)+2];case 2:return s.RS_BLOCK_TABLE[4*(t-1)+3]}},o.prototype={get:function(t){return 1==(this.buffer[Math.floor(t/8)]>>>7-t%8&1)},put:function(t,e){for(var a=0;e>a;a++)this.putBit(1==(t>>>e-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},"string"==typeof e&&(e={text:e}),e=t.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},e),this.each(function(){var a;if("canvas"==e.render){a=new n(e.typeNumber,e.correctLevel),a.addData(e.text),a.make();var i=document.createElement("canvas");i.width=e.width,i.height=e.height;for(var s=i.getContext("2d"),o=e.width/a.getModuleCount(),r=e.height/a.getModuleCount(),l=0;l<a.getModuleCount();l++)for(var c=0;c<a.getModuleCount();c++){s.fillStyle=a.isDark(l,c)?e.foreground:e.background;var d=Math.ceil((c+1)*o)-Math.floor(c*o),u=Math.ceil((l+1)*o)-Math.floor(l*o);s.fillRect(Math.round(c*o),Math.round(l*r),d,u)}}else for(a=new n(e.typeNumber,e.correctLevel),a.addData(e.text),a.make(),i=t("<table></table>").css("width",e.width+"px").css("height",e.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",e.background),s=e.width/a.getModuleCount(),o=e.height/a.getModuleCount(),r=0;r<a.getModuleCount();r++)for(l=t("<tr></tr>").css("height",o+"px").appendTo(i),c=0;c<a.getModuleCount();c++)t("<td></td>").css("width",s+"px").css("background-color",a.isDark(r,c)?e.foreground:e.background).appendTo(l);a=i,jQuery(a).appendTo(this)})}}(jQuery)});