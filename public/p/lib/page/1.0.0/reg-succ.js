define("libpage.0.0/reg-succ",["lib/components/khValidate/1.0.0/khValidate"],function(e,t,a){function n(e){$(".select-title").each(function(t,a){t!==e&&$(this).siblings(".select-list").css({display:"none"})})}function i(e,t){var a="";t.html("");for(var n=0;n<e.length;n++)a+='<li data-parent="'+e[n].region_id+'" data-value="'+e[n].region_id+'" >'+e[n].region_name+"</li>";t.append(a)}function s(){for(var e=$(".favors-select i"),t=[],a=0,n=e.length;n>a;a++)$(e[a]).hasClass("icon-box-checked")&&t.push($(e[a]).parent().attr("data-value"));return t.toString()}function r(){$("#J_birthDay li").each(function(){$(this).show()})}function c(){$("#J_birthDay li").each(function(e){30==e?$(this).hide():$(this).show()})}function o(){var e=28;Date.prototype.isLeapYear=function(){return 0==this.getYear()%4&&(this.getYear()%100!=0||this.getYear()%400==0)};var t=$("input[name='year']").val(),a=new Date(t,0,1);a.isLeapYear()&&(e=29),$("#J_birthDay li").each(function(t){t>=e?$(this).hide():$(this).show()})}function l(e){y||$.ajax({url:cdnConfig.apiPath+"/member/sendemailcode",dataType:"jsonp",data:{email:e},success:function(e){"succ"==e.status&&(y=!0,J=!0,$(".emailCode").show(),$(".J_register_succcess_form .kh-form-wrap:eq(8)").addClass("required-code"))}})}function u(e,t){if(!C){if(P>=3)return void f(e,"您本次发送手机验证码次数已经用完,请刷新页面重试.","error");P++,m(60,$(".J_getPhoneCode"),$(".J_countDownWrap")),$.ajax({url:cdnConfig.apiPath+"/member/sendphonecode",data:{phone:t,h:$("#security").val(),m:$("#security").attr("name"),n:P,r:Math.random()},dataType:"jsonp",success:function(e){"succ"==e.status&&(w=!0,$(".phoneCode").show(),$(".J_register_succcess_form .kh-form-wrap:eq(8)").addClass("required-code")),v(e.pin)}})}}function d(){for(var e=$(".J_need"),t=0,a=e.length,n=!1;a>t;t++)if(""!=$(e[t]).val()){n=!0;break}""==$.trim($('input[name="userName"]').val())&&(n=!1),n&&g?h():(_=!1,p())}function h(){_=!0,$(".J_subBtn").removeClass("not")}function p(){_=!1,$(".J_subBtn").addClass("not")}function f(e,t,a){switch(a){case"ok":e.siblings(".icon-tip-ok").show();break;case"error":e.addClass("error").siblings(".error-tips").show().find(".tips-info").html(t)}e.on("focus",function(e){e.preventDefault(),$(this).removeClass("error").siblings(".icon-tip-ok").hide().siblings(".error-tips").hide().find(".tips-info").html("")})}function m(e,t,a){t.hide(),a.show();var n=setInterval(function(){0>=e?(clearInterval(n),t.show(),a.hide().find(".J_countDown").html(e)):(e-=1,a.find(".J_countDown").html(e))},1e3)}function v(e){var t=$("#security");t.val(e[1]),t.attr("name",e[0])}var k=e("../../components/khValidate/1.0.0/khValidate");$(document).on("click","body",function(e){e.stopPropagation(),$(".select-list").css({display:"none"})}),$(".select-title").each(function(e,t){var a=$(this);a.on("click",function(t){n(e)})}),$(".J_select_province .select-title").on("click",function(e){var t=$(this),a=t.siblings(".select-list");""==a.html()?$.ajax({url:cdnConfig.apiPath+"/region/pro",type:"get",dataType:"jsonp",success:function(e){i(e,a),a.show()},error:function(e){alert("获取数据失败，请稍后再试!")}}):"none"==a.css("display")?a.show():a.hide(),e.stopPropagation()}),$(document).on("click",".J_select_province .select-list li",function(e){e.preventDefault();var t=$(this),a=t.attr("data-parent"),n=$(".J_select_city .select-list");t.parent().siblings('input[name="province"]').val(a),t.parent().hide().siblings(".select-title").html(t.html()),$.ajax({url:cdnConfig.apiPath+"/region/city/"+a,type:"get",dataType:"jsonp",success:function(e){i(e,n),$(".J_select_city .select-title").html("所在市"),$(".J_select_area .select-title").html("所在区")}})}),$(".J_select_city .select-title").on("click",function(e){var t=$(this),a=t.siblings(".select-list");""!=a.html()&&("none"==a.css("display")?a.show():a.hide()),e.stopPropagation()}),$(document).on("click",".J_select_city .select-list li",function(e){e.preventDefault();var t=$(this),a=t.attr("data-parent"),n=$(".J_select_area .select-list");t.parent().siblings('input[name="city"]').val(a),t.parent().hide().siblings(".select-title").html(t.html()),$.ajax({url:cdnConfig.apiPath+"/region/area/"+a,type:"get",dataType:"jsonp",success:function(e){i(e,n),$(".J_select_area .select-title").html("所在区")}})}),$(".J_select_area .select-title").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(this),a=t.siblings(".select-list");""!=a.html()&&("none"==a.css("display")?a.show():a.hide())}),$(document).on("click",".J_select_area .select-list li",function(e){var t=$(this),a=t.attr("data-parent");t.parent().siblings('input[name="area"]').val(a),t.parent().hide().siblings(".select-title").html(t.html())}),$(".gender-select").each(function(){var e=$(this),t=e.find("i"),a=$('input[name="gender"]');e.on("click",function(){t.addClass("icon-radio-on"),e.siblings(".gender-select").find("i").removeClass("icon-radio-on"),a.val(e.attr("data-value"))})}),$(".favors-select").each(function(){var e=$(this),t=e.find("i"),a=$('input[name="favors"]');e.on("click",function(){t.toggleClass("icon-box-checked"),a.val(s())})}),$(".register-success-form .kh-form-wrap:eq(5)").addClass("birthday"),$(".register-success-form .kh-form-wrap:eq(1)").addClass("required"),"none"!=$(".phone-item").css("display")&&void 0!=$(".phone-item").css("display")&&$(".register-success-form .kh-form-wrap:eq(7)").addClass("required"),"none"!=$(".email-item").css("display")&&void 0!=$(".email-item").css("display")&&$(".register-success-form .kh-form-wrap:eq(7)").addClass("required"),$(".J_select_year .select-title").on("click",function(e){e.stopPropagation(),e.preventDefault();for(var t=$(this),a=t.siblings(".select-list"),n=(new Date).getFullYear(),i="",s=0;100>=s;s++){var r=parseInt(n-100+s);i+='<li><a href="javascript:void(0);" data-value="'+r+'">'+r+"</a></li>"}a.append(i),""!=a.html()&&("none"==a.css("display")?a.show():a.hide())}),$(document).on("click",".J_select_year .select-list li",function(e){var t=$(this),a=t.find("a").attr("data-value");t.parent().siblings('input[name="year"]').val(a),t.parent().hide().siblings(".select-title").html(t.html());for(var n=$(".J_select_month .select-list"),i="",s=0;12>s;s++){var r=s+1;i+='<li><a href="javascript:void(0);" data-value="'+r+'">'+r+"</a></li>"}n.append(i)}),$(".J_select_month .select-title").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(this),a=t.siblings(".select-list");""!=a.html()&&("none"==a.css("display")?a.show():a.hide())});var b=!1;$(document).on("click",".J_select_month .select-list li",function(e){var t=$(this),a=t.find("a").attr("data-value"),n=$(".J_select_day .select-list");t.parent().siblings('input[name="month"]').val(a),t.parent().hide().siblings(".select-title").html(t.html());var i=parseInt(t.text());if(!b){for(var s="",l=0;31>l;l++){var u=l+1;s+='<li><a href="javascript:void(0);" data-value="'+u+'">'+u+"</a></li>"}n.append(s),b=!0}switch(i){case 1:r();break;case 2:o();break;case 3:r();break;case 4:c();break;case 5:r();break;case 6:c();break;case 7:r();break;case 8:r();break;case 9:c();break;case 10:r();break;case 11:c();break;case 12:r()}}),$(".J_select_day .select-title").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(this),a=t.siblings(".select-list");""!=a.html()&&("none"==a.css("display")?a.show():a.hide())}),$(document).on("click",".J_select_day .select-list li",function(e){var t=$(this),a=t.find("a").attr("data-value");t.parent().siblings('input[name="day"]').val(a),t.parent().hide().siblings(".select-title").html(t.html())});var _=!1,g=!1,y=!1,J=!1;$(".J_getMailcode").on("click",function(){var e=$('input[name="email"]'),t=$.trim(e.val());""==t?f(e,"请输入邮箱地址","error"):k.chkEmail(t)?(g=!1,$(".J_subBtn").addClass("not"),l(t)):f(e,"您输入的邮箱格式不正确，请重新输入","error")}),$('input[name="emailCode"]').on("blur",function(){if(J){var e=$(this),t=$.trim(e.val()),a=$('input[name="email"]').val();""==t?f(e,"请输入邮箱验证码","error"):$.ajax({url:cdnConfig.apiPath+"/member/validateemailcode",dataType:"jsonp",data:{email:a,emailcode:t},success:function(t){"succ"==t.status?($(".J_subBtn").removeClass("not"),f(e,"","ok"),g=!0,h()):($(".J_subBtn").addClass("not"),f(e,"验证码错误","error"),g=!1,p())},error:function(){}})}});var C=!1,w=!1,P=0;$(".J_getPhonecode").on("click",function(){var e=$('input[name="phone"]'),t=$.trim(e.val());""==t?f(e,"请输入手机号码","error"):k.chkPhone(t)?(g=!1,$(".J_subBtn").addClass("not"),u(e,t)):f(e,"您输入的手机号码格式不正确，请重新输入","error")}),$('input[name="phoneCode"]').on("blur",function(){if(w){var e=$(this),t=$.trim(e.val());6!=t.length?(f(e,"请输入6位手机验证码","error"),g=!1):$.ajax({url:cdnConfig.apiPath+"/member/validateiphonecode",dataType:"jsonp",data:{phonecode:t},success:function(t){"succ"==t.status?($(".J_subBtn").removeClass("not"),f(e,"","ok"),g=!0,d()):($(".J_subBtn").addClass("not"),f(e,"验证码错误","error"),g=!1,p())},error:function(){}})}}),$(".J_need").each(function(){var e=$(this);e.on("blur",function(){d()})}),$(".phoneCode").on("blur",function(){d()}),$(".mailCode").on("blur",function(){d()}),$(".J_subBtn").on("click",function(){if(_&&(!J||!w)){if(!g)return;$(".J_register_succcess_form").submit()}})}),define("lib/components/khValidate/1.0.0/khValidate",[],function(e,t,a){var n={chkEnName:function(e){var t=/^[a-zA-Z|0-9]{3,20}$/;return t.test(e)},chkCnName:function(e){var t=/^[\u2E80-\u9FFF]{2,20}$/;return t.test(e)},chkIsChinese:function(e){var t=/[\u4E00-\u9FA5\uF900-\uFA2D]/;return t.test(e)},chkUserName:function(e){var t=/^[\u2E80-\u9FFF|0-9|a-zA-Z|_]{2,20}$/;return t.test(e)},chkTelephone:function(e){var t=/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/;return t.test(e)},chkPhone:function(e){var t=/^(13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/;return t.test(e)},chkPass:function(e){var t=/^[a-zA-Z0-9_-]{6,20}$/;return t.test(e)},chkPassNew:function(e){var t=/^[^\u2E80-\uFFA0\s]{6,20}$/;return t.test(e)},chkNumber:function(e,t){var a;switch(t){case 4:a=/^[0-9]{4}$/;break;case 5:a=/^[0-9]{5}$/;break;case 6:a=/^[0-9]{6}$/;break;case 7:a=/^[0-9]{7}$/;break;case 8:a=/^[0-9]{8}$/;break;case 9:a=/^[0-9]{9}$/;break;case 10:a=/^[0-9]{10}$/;break;case 11:a=/^[0-9]{11}$/;break;case 12:a=/^[0-9]{12}$/;break;case 13:a=/^[0-9]{13}$/;break;case 14:a=/^[0-9]{14}$/;break;case 15:a=/^[0-9]{15}$/;break;case 16:a=/^[0-9]{16}$/;break;case 17:a=/^[0-9]{17}$/;break;case 18:a=/^[0-9]{18}$/;break;default:a=/^[0-9]{6}$/}return a.test(e)},chkAliAcount:function(e){var t=/^[0-9]{11}|^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;return t.test(e)},chkBankName:function(e){var t=/^[\u2E80-\u9FFF]{4,20}$/;return t.test(e)},chkBankAcount:function(e){var t=/^[0-9]{15,23}$/;return t.test(e)},chkBankOrderNum:function(e){var t=/^[0-9]{8,}$/;return t.test(e)},chkPrice:function(e){var t=/^[0-9]{1,10}[\.][0-9]{2}$/;return t.test(e)},chkEmail:function(e){var t=/^([a-zA-Z0-9_\.-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;return t.test(e)},chkURL:function(e){var t=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;return t.test(e)},chkIP:function(e){var t=/((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)/;return t.test(e)},chkScript:function(e){var t=/^[A-Za-z0-9|_|-|\u4E00-\u9FA5\uF900-\uFA2D|@|#|,|.|;]+$/;return t.test(e)}};a.exports=n});