define(function(require,exports,module){function khCheckbox(config){function addEventListen(domID,type,fun){var obj=$(domID);obj.on(type,function(event){event.preventDefault();var that=$(this),thatURL=that.attr("href"),targetType=that.attr("target");if(""==joinParam(getChkItems())){try{new dialog({title:"提示",width:400,content:'<p>&nbsp;</p><p class="tc fs-14">请选择要操作的选项！</p>',fixed:!0,button:[{value:"确定",className:"ui-btns-orange",callback:function(){}}]}).showModal()}catch(e){alert("请选择要操作的选项！")}return!1}var openURL=thatURL+"?params="+joinParam(getChkItems()),doCall=doCallback(fun,that);(doCall||void 0==doCall)&&openWin(targetType,openURL)})}function doCallback(callback,btnObj){return callback(btnObj,mainObj)}function openWin(targetType,openURL){void 0==targetType||"_self"==targetType?window.location.href=openURL:window.open(openURL,"新页面")}function joinParam(objArr){for(var temp=[],i=0;i<objArr.length;i++)temp.push(objArr[i].value);return temp}function toggleCheck(obj){obj.toggleClass("icon-box-checked"),obj.hasClass("icon-box-checked")?obj.siblings("input").attr("checked","checked"):obj.siblings("input").removeAttr("checked")}function getChkItems(){return $("input[checked=checked][name=chkItem]")}function getChkNum(){return $("input[checked=checked]").length}function getItemNum(){return $("input[name=chkItem]").length}function chkAllItem(){chkItem.each(function(index){$(this).addClass("icon-box-checked"),$(this).siblings("input").attr("checked","checked")}),chkAllObj.each(function(index){$(this).addClass("icon-box-checked")})}function reChkAllItem(){chkItem.each(function(index){$(this).removeClass("icon-box-checked").siblings("input").removeAttr("checked")}),chkAllObj.each(function(index){$(this).removeClass("icon-box-checked")})}function reChkAll(){chkAllObj.each(function(index){$(this).removeClass("icon-box-checked")})}for(var config=config||{},mainCell=config.mainCell||"form",button=config.button||[],mainObj=(config.callback||function(){},"string"==typeof mainCell?mainCell.indexOf("#")>-1?$(mainCell):$("#"+mainCell):mainCell),chkAllObj=$(config.chkAll.domID)||$(".JQ_chkAll"),chkAllCallback=config.chkAll.callback||function(){},chkItem=$(config.chkItem.domID)||$(".JQ_chkItem"),itemCallback=config.chkItem.callback||function(){},i=0;i<button.length;i++)addEventListen(button[i].domID,"click",button[i].callback);chkItem.on("click",function(event){event.preventDefault(),toggleCheck($(this)),getItemNum()==getChkNum()?toggleCheck(chkAllObj):reChkAll(),doCallback(itemCallback,$(this))}),chkAllObj.each(function(index){$(this).on("click",function(event){event.preventDefault(),toggleCheck($(this)),$(this).hasClass("icon-box-checked")?chkAllItem():reChkAllItem(),doCallback(chkAllCallback,$(this))})})}module.exports=khCheckbox});