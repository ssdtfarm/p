define("libpage.0.0/account-information",["lib/template/tempcomment","lib/template/tempaccount","lib/components/minBar/1.0.1/minBar","lib/components/dialog/1.0.0/dialog","lib/components/dialog/1.0.0/popup","lib/components/dialog/1.0.0/dialog-config","lib/components/khValidate/1.0.0/khValidate"],function(t,e,a){function n(){var t,e,a=$("input[name=old_passwd]"),n=$("input[name=new_passwd]");$("input[name=confirmNewPass]");$("input[name=old_passwd]").on("blur",function(e){return c(a,"old")?(t=$("input[name=old_passwd]").val(),$.ajax({url:cdnConfig.apiPath+"/member/validatepwd",data:{old_passwd:t},dataType:"jsonp",success:function(t){"succ"==t.status?u(a,"","ok"):u(a,"密码错误，请重新输入！","no")}}),!1):void 0}),u(n,"请设置6-20位数字、字母或符号的新密码（不包括空格）",""),$("input[name=new_passwd]").on("blur",function(t){e=n.val(),e.length>20&&n.val(e.substr(0,20)),i("new")}).on("keyup",function(){e=n.val(),e.length>20&&n.val(e.substr(0,20))}).one("focus",function(){u(n,"请设置6-20位数字、字母或符号的新密码（不包括空格）","")}),$("input[name=confirmNewPass]").on("blur",function(t){i("confirm")})}function i(t){var e=$("input[name=new_passwd]"),a=$("input[name=confirmNewPass]"),n=e.val(),i=a.val();"new"==t&&c(e,t),"confirm"==t&&""==i&&u(a,"请再次确认您的密码!","no"),""!=i&&(n!=i?u(a,"两次输入的密码不一致，请重新输入！","no"):(c(e,t)&&u(e,"请设置6-20位数字、字母或符号的新密码（不包括空格）","ok"),u(a,"","ok")))}function s(t){var e=($("#J_oldPass").siblings(".edit-pass-tip"),$("#J_newPass").siblings(".edit-pass-tip"),$("#J_confirmNewPass").siblings(".edit-pass-tip"),$("input[name=old_passwd]")),a=$("input[name=new_passwd]"),n=$("input[name=confirmNewPass]"),i=$("input[name=old_passwd]").val(),s=$("input[name=new_passwd]").val(),l=$("input[name=confirmNewPass]").val();return c(e,"old")?($.ajax({url:cdnConfig.apiPath+"/member/validatepwd",data:{old_passwd:i},dataType:"jsonp",success:function(t){if("succ"==t.status){if(c(a,"new")&&c(n,"confirm"),c(a,"new")&&c(n,"confirm")){if(s!=l)return u(n,"两次输入的密码不一致，请重新输入！","no"),!1;o()}}else u(e,"密码错误，请重新输入！","no")}}),!1):void 0}function o(){var t=$("input[name=old_passwd]"),e=$("input[name=new_passwd]"),a=$("input[name=confirmNewPass]"),n=$("#J_editPassForm").attr("action");$.ajax({url:n,type:"post",data:$("#J_editPassForm").serialize(),dataType:"json",success:function(n){if("success"==n.status)switch(n.data.code){case 2:window.location.href=cdnConfig.passport;break;case 3:u(t,"密码错误，请重新输入！","no");break;case 4:u(a,"两次输入的密码不一致，请重新输入！","no");break;case 5:u(e,"请设置6-20位数字、字母或符号的新密码（不包括空格）！","no");break;case 200:window.location.reload()}}})}function c(t,e){var a=t.val(),n="";switch(e){case"old":n="请输入原登录密码!";break;case"new":n="请设置6-20位数字、字母或符号的新密码（不包括空格）";break;case"confirm":n="请再次确认您的密码!"}if(""!=a){if(_.chkPassNew(a))return"old"==e?!0:"confirm"==e?!0:(u(t,"请设置6-20位数字、字母或符号的新密码（不包括空格）","ok"),!0);if("old"==e&&(n="密码错误，请重新输入！"),"confirm"==e)return;return u(t,n,"no"),!1}return"new"==e?void u(t,n,""):(u(t,n,"no"),!1)}function l(t){var e={mail:""},a=$("input[name=stepTwoMail]"),n=$.trim(a.val()),i=$("input[name=stepTwoMailCode]"),s=$.trim(i.val());return""!=n&&_.chkEmail(n)?(u(a,"","ok"),""!=s&&_.chkNumber(s,6)?void $.ajax({url:cdnConfig.apiPath+"/member/validateemailcode",data:{emailcode:s},dataType:"jsonp",success:function(a){return"succ"!=a.status?(u(i,"验证码错误或已失效，请重新获取!","no"),!1):void(s==a.data.phonecode?(e.mail=n,$.post(cdnConfig.my+"/user/bindinfo",{type:"email",val:n},function(a){if("succ"==a.status)t.content(v("tplSetMailThree",e)),t.button([{value:"完成",className:"ui-btns-orange",callback:function(){return window.location.reload(),!1}}]);else{new g({title:"提示",content:'<p>&nbsp;</p><p class="tc fs-14">修改/设置邮箱失败，请重试</p>',width:400,height:60,fixed:!0,button:[{value:"确定",className:"ui-btns-orange",callback:function(){}}]}).showModal()}},"json")):u(i,"验证码错误或已失效，请重新获取!","no"))}}):(""==s?u(i,"请输入验证码！","no"):u(i,"验证码错误或者已过期！","no"),!1)):(""==i?u(a,"请输入邮箱！","no"):u(a,"邮箱格式有误！","no"),!1)}function r(t){var e={phone:""},a=$("input[name=stepTwoPhone]"),n=$("input[name=stepTwoPhoneCode]"),i=$.trim($("input[name=stepTwoPhone]").val()),s=$.trim($("input[name=stepTwoPhoneCode]").val());return""!=i&&_.chkPhone(i)?""!=s&&_.chkNumber(s,6)?($.ajax({url:cdnConfig.apiPath+"/member/validateiphonecode",data:{phoneNum:i,phonecode:s},dataType:"jsonp",success:function(a){return"succ"==a.status&&s==a.data.phonecode?(e.phone=i,$.post(cdnConfig.my+"/user/bindinfo",{type:"phone",val:i},function(a){if("succ"==a.status)t.content(v("tplSetPhoneThree",e)),t.button([{value:"完成",className:"ui-btns-orange",callback:function(){t.close().remove(),window.location.reload()}}]),t.showModal();else{var n=a.data;switch(n){case 1:new g({title:"提示",content:'<p>&nbsp;</p><p class="tc fs-14">您的手机已经绑定过了哦~</p>',width:400,height:60,fixed:!0,button:[{value:"确定",className:"ui-btns-orange",callback:function(){}}]}).showModal();break;case 2:new g({title:"提示",content:'<p>&nbsp;</p><p class="tc fs-14">修改/设置手机失败，请重试</p>',width:400,height:60,fixed:!0,button:[{value:"确定",className:"ui-btns-orange",callback:function(){}}]}).showModal()}}},"json"),!1):(u(n,"手机验证码输入有误","no"),!1)}}),!1):(u(n,"手机验证码输入有误","no"),!1):(u(a,"请输入正确的手机号码","no"),!1)}function p(t){var e=$("#security");e.val(t[1]),e.attr("name",t[0])}function d(t){var e=Math.random();imgURL=cdnConfig.apiPath+"/member/imgcode?type=registercode&v="+e,t.attr("src",imgURL)}function u(t,e,a){var n=t.parent(),i=n.siblings("p.edit-pass-tip"),s='<i class="icon-tip-wrong"></i><span class="fc-c13">'+e+"</span>",o='<span class="fc-c13">'+e+"</span>",c='<i class="icon-tip-ok tip-ok"></i>';switch(a){case"no":n.addClass("error").find(".tip-ok").remove(),i.html(s);break;case"ok":if(n.find(".tip-ok").remove().end().removeClass("error").append(c),""!=e){i.html("<span>"+e+"</span>");break}i.html(o);break;default:n.removeClass("error"),i.html(e)}t.on("focus",function(e){n.removeClass("error").find(".tip-ok").remove(),"new_passwd"==t.attr("name")?i.html("请设置6-20位数字、字母或符号的新密码（不包括空格）"):i.html("")})}function h(t,e,a,n){var i=e,s=setInterval(function(){0>=e?(clearInterval(s),a.show(),n.hide(),t.html(i)):(e-=1,t.html(e))},1e3)}function f(t,e){var a=setInterval(function(){0>=e?(clearInterval(a),$("#J_sendEmailCode").html("重发邮箱验证码").show(),$("#J_codeWait").hide()):(e-=1,t.html(e))},1e3)}document.getElementById("J_memberAside").innerHTML=document.getElementById("J_templateMemberAside").innerHTML;var m=t("../../template/tempcomment"),v=t("../../template/tempaccount"),b=t("../../components/minBar/1.0.1/minBar"),g=t("../../components/dialog/1.0.0/dialog"),_=t("../../components/khValidate/1.0.0/khValidate");b({mainCell:"#J_minBar",pathConfig:cdnConfig,tpl:m,tplName:"tplMinBar",data:_globalConfig.minBar.data});var w=!1;$(document).on("click","#J_modifyNickBtn",function(t){$(this);if(t.preventDefault(),!w){var e='<tr id="J_nickName" class="account-information-item"><th class="fc-8c8">昵称：</th><td>';e+='<input id="J_nickInput" class="account-information-input"  value="'+$("#J_nickText").html()+'" placeholder="2-15个中英文或数字字符，不含特殊符号"/>',e+='<a href="javascript:void(0);" class="btn-100x30 btn-orange JQ_submitModifyNick">提交</a><a href="javascript:void(0);" class="btn-100x30 btn-gray JQ_cancelModifyNick">取消</a></td></tr>',$("#J_nickTable").append(e),w=!0}}),$(document).on("click",".JQ_submitModifyNick",function(t){t.preventDefault();var e=$(this),a=e.siblings("input").val();if(""!=a&&_.chkUserName(a))$.ajax({url:cdnConfig.apiPath+"/member/updatemem",data:{member_nicheng:a},dataType:"jsonp",success:function(t){"succ"==t.status?$("#J_nickName").remove():$("#J_nickName").remove(),window.location.reload(),w=!1}});else{var n=new g({align:"top",content:"昵称只能是2-15个中英文或数字字符，不含特殊符号！"}).show(document.getElementById("J_nickInput"));setTimeout(function(){n.close()},1500)}}),$(document).on("click",".JQ_cancelModifyNick",function(t){t.preventDefault(),$("#J_nickName").remove(),w=!1}),$(".JQ_editPassBtn").on("click",function(t){var e={actionURL:cdnConfig.my+"/user/updatemem"};t.preventDefault();var a=new g({title:"修改登录密码",content:m("tplEditPassForm",e),fixed:!0,width:400,button:[{value:"确定",className:"ui-btns-orange",callback:function(){return s(a),!1}},{value:"取消",className:"ui-btns-gray",callback:function(){}}],onshow:function(){n()}}).showModal()});var k={email:"",emailSuffix:""};$("#J_setEmail").on("click",function(t){t.preventDefault();var e=$(this);e.hasClass("first")?k.title="设置邮箱":k.title="修改邮箱";var a=new g({title:k.title,content:v("tplSetMailTwo"),width:400,fixed:!0,button:[{value:"下一步",className:"ui-btns-orange",callback:function(){return l(a),!1}},{value:"取消",className:"ui-btns-gray",callback:function(){}}]}).showModal();d($("#J_stepMailCode"))}),$(document).on("click","#J_sendEmailCode",function(){var t=$(this),e=$("#J_codeWait"),a=$("input[name=stepTwoMail]"),n=$.trim($("input[name=stepTwoMail]").val());return""!=n&&_.chkEmail(n)?(u(a,"","ok"),t.hide(),e.css({display:"inline-block"}),$.ajax({url:cdnConfig.apiPath+"/member/sendemailcode",data:{email:n,type:"3"},dataType:"jsonp",success:function(t){"succ"==t.status&&f($("#J_subMTimeWrap"),300)}}),void 0):""==n?(u(a,"请输入邮箱！","no"),!1):(u(a,"邮箱格式有误！","no"),!1)});var y={verifyCode:"",phoneCode:"",phone:""};$(".JQ_setPhone").on("click",function(t){var e=$(this),a=new g({width:400,fixed:!0});e.hasClass("first")?a.title("绑定手机"):a.title("修改绑定手机"),a.content(v("tplSetPhoneTwo",y)),a.button([{value:"下一步",className:"ui-btns-orange",callback:function(){return r(a),!1}},{value:"取消",className:"ui-btns-gray",callback:function(){}}]).showModal()});var J=0;$(document).on("click","#J_getPhoneCode",function(t){t.preventDefault();var e=$("input[name=stepTwoPhone]"),a=$("input[name=stepTwoPhoneCode]"),n=($.trim($("input[name=stepTwoPhoneCode]").val()),$.trim(e.val()));return""!=n&&_.chkPhone(n)?void $.ajax({url:cdnConfig.apiPath+"/member/checkphone",data:{phone:n,h:$("#security").val(),m:$("#security").attr("name")},dataType:"jsonp",jsonp:"callback",success:function(t){if("succ"==t.status){if(J>=3)return void showTip(e,"您本次发送手机验证码次数已经用完,请刷新页面重试.","no");J++,p(t.pin),$("#J_getPhoneCode").hide(),$("#J_codeWait").css({display:"inline-block"}),$("#J_getPhoneCode").hide(),$("#J_codeWait").css({display:"inline-block"}),h($("#J_subTimeWrap"),60,$("#J_getPhoneCode"),$("#J_codeWait")),$.ajax({url:cdnConfig.apiPath+"/member/sendphonecode",data:{phone:n,type:4,h:$("#security").val(),m:$("#security").attr("name"),n:J,r:Math.random()},dataType:"jsonp",jsonp:"callback",success:function(t){"succ"==t.status?(u(e,"手机验证码已经发送到您的手机","ok"),a.attr("data-value",t.data.phonecode)):u(a,"手机验证已经发送失败，请重试","no"),p(t.pin)}})}else u(e,"此手机号已经被注册，请更换其他手机号","no");p(t.pin)}}):(u(e,"请输入手机号码","no"),!1)})}),!function(){function t(t,e){return(/string|function/.test(typeof e)?c:o)(t,e)}function e(t,a){return"string"!=typeof t&&(a=typeof t,"number"===a?t+="":t="function"===a?e(t.call(t)):""),t}function a(t){return d[t]}function n(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function i(t,e){if(u(t))for(var a=0,n=t.length;n>a;a++)e.call(t,t[a],a,t);else for(a in t)e.call(t,t[a],a)}function s(t,e){var a=/(\/)[^/]+\1\.\.\1/,n=("./"+t).replace(/[^/]+$/,""),i=n+e;for(i=i.replace(/\/\.\//g,"/");i.match(a);)i=i.replace(a,"/");return i}function o(e,a){var n=t.get(e)||l({filename:e,name:"Render Error",message:"Template not found"});return a?n(a):n}function c(t,e){if("string"==typeof e){var a=e;e=function(){return new p(a)}}var n=r[t]=function(a){try{return new e(a,t)+""}catch(n){return l(n)()}};return n.prototype=e.prototype=h,n.toString=function(){return e+""},n}function l(t){var e="{Template Error}",a=t.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var n in t)a+="<"+n+">\n"+t[n]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+a),e}}var r=t.cache={},p=this.String,d={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},u=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},h=t.utils={$helpers:{},$include:function(t,e,a){return t=s(a,t),o(t,e)},$string:e,$escape:n,$each:i},f=t.helpers=h.$helpers;t.get=function(t){return r[t.replace(/^\.\//,"")]},t.helper=function(t,e){f[t]=e},"function"==typeof define?define("lib/template/tempcomment",[],function(e,a,n){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("tplAddressForm",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.actionURL,s=t.addressID,o=t.userName,c=t.address,l=t.telephone,r=t.mobilephone,d=t.defaultAdd,u="";return u+='<form id="J_addressForm" action="',u+=n(i),u+='" method="post"> <input type="hidden" name="addressID" value="',u+=n(s),u+='"> <table id="J_add" class="person-address-add-table"> <tbody class="person-address"> <tr class="item"> <th class="address-add-head">收货人：</th> <td> <input id="J_userName" class="person-address-add-input" name="userName" value="',u+=n(o),u+='" /> <span class="fc-f60">*</span> </td> </tr> <tr class="item"> <th class="address-add-head">详细地址：</th> <td id="J_selectAddress"></td> </tr> <tr class="item"> <th>&nbsp;</th> <td> <p> <input id="J_address" class="person-address-add-input detailed-address-input" name="address" placeholder="具体地址" value="',u+=n(c),u+='" /> <span class="fc-f60">*</span> </p> <p> <label class="person-address-add-tip">&nbsp;&nbsp;&nbsp;(不需要重复填写省/市/区)</label> </p> </td> </tr> <tr class="item"> <th class="address-add-head">固定电话：</th> <td> <input id="J_tel" class="person-address-add-input" name="tel" value="',u+=n(l),u+='" /> <label class="person-address-add-tip"><span>*</span>&nbsp;&nbsp;（示例：020-88888888-999）</label> </td> </tr> <tr class="item"> <th class="address-add-head">手机：</th> <td> <input id="J_phone" class="person-address-add-input" name="phone" value="',u+=n(r),u+='" /> <label class="person-address-add-tip"><span>*</span>&nbsp;&nbsp;（手机或固话必填一项）</label> </td> </tr> <tr class="item"> <th>&nbsp;</th> <td> <div class="defult-address-choose"> ',u+="1"==d?' <a id="J_setDefault" href="javascript:void(0);" class="icon icon-box-checked"></a> ':' <a id="J_setDefault" href="javascript:void(0);" class="icon icon-box-normal"></a> ',u+=' <span class="address-font-gray">设为默认地址</span> <input type="hidden" name="setDefault" value="',u+=n(d),u+='" /> </div> </td> </tr> </tbody> </table> </form>',new p(u)}),t("tplBottomAd",function(t,e){"use strict";var a=this,n=(a.$helpers,t.link),i=a.$escape,s=t.linkURL,o=t.title,c=t.imgURL,l="";return l+='<div class="full-ad-wrap" style="width: 100%; overflow: hidden;"> <div style="background:url(http://misc.jjcdn.com/p/images/loading-t.gif) center center no-repeat;"> <a href="',""!=n&&(l+=i(n)),""!=s&&(l+=i(s)),l+='" target="_blank" title="',l+=i(o),l+='" style=" display:block; width:100%;min-height: 80px;background:url(',l+=i(c),l+=') center top no-repeat; "> <img src="',l+=i(c),l+='" style="visibility: hidden;display: block" /> </a> <a href="javascript:void(0);" class="full-ad-close" id="J_itemBottomAdClose"><span></span></a> </div> </div>',new p(l)}),t("tplEditPassForm",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.actionURL,s="";return s+='<form id="J_editPassForm" action="',s+=n(i),s+='" method="post"> <div class="fc-8c8">为了您的账户安全，请定期更换登录密码，并确保登录密码设置与提现密码不同。</div> <input type="hidden" name="form" value="form"> <div class="a-edit-pass-tr"> <p id="J_oldPass" class="edit-input-wrap"> <input type="password" name="old_passwd" placeholder="原密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> <div class="a-edit-pass-tr fc-8c8"> <p id="J_newPass" class="edit-input-wrap"> <input type="password" name="new_passwd" placeholder="输入新密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> <div class="a-edit-pass-tr fc-8c8"> <p id="J_confirmNewPass" class="edit-input-wrap"> <input type="password" name="confirmNewPass" placeholder="再次输入新密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> </form>',new p(s)}),t("tplFloatNav",'<div id="J_floatNav" class="float-nav"> <a href="http://chat10.live800.com/live800/chatClient/chatbox.jsp?companyID=201143&jid=2104161973" class="float-nav-char-wrap JQ_floatNavNormal" target="_blank"> <span class="floag-online-chat">在线客服</span> <i class="icon-float-chat normal-icon"></i> </a> <a href="http://crm2.qq.com/page/portalpage/wpa.php?uin=4006538038&aty=0&a=0&curl=&ty=1" class="float-nav-qq JQ_floatNavNormal" target="_blank"> <span>QQ客服</span> <i class="icon-float-qq normal-icon"></i> </a> <a href="http://cart.kinhom.com/list.html" class="float-nav-cart JQ_floatNavNormal" target="_blank"> <span>购物车</span> <i class="icon-float-cart normal-icon"></i> <i class="icon-cart-num num-icon">0</i> </a> <a href="javascript:void(0);" class="float-nav-wechat JQ_floatNavWechat"> <span> <img src="http://misc.jjcdn.com/p/images/float_wechat.png" width="40" height="40" /> </span> <i class="icon-float-wechat normal-icon"></i> </a> <a href="http://www.wenjuan.com/s/qU36f2/" target="_blank" class="float-nav-feedback JQ_floatNavNormal"> <span>意见反馈</span> <i class="icon-float-feedback normal-icon"></i> </a> <a id="J_floatGoTop" href="javascript:void(0);" class="float-nav-top JQ_floatNavNormal"> <span>返回顶部</span> <i class="icon-float-top normal-icon"></i> </a> </div>'),t("tplLoginDialog",'<div class="login-dialog"> <div class="login-dialog-form"> <form action="javascript:void(0);" method="post"> <p class="login-dialog-form-tr" id="J_loginUserName"> <label>用户名：</label> <input type="text" name="loginUserName" placeholder="输入用户名/邮箱/手机"> </p> <p class="login-dialog-form-tip"></p> <p class="login-dialog-form-tr" id="J_loginPassword"> <label>密&nbsp;&nbsp;&nbsp;码：</label> <input type="password" name="loginPassword" placeholder="输入密码"> </p> <p class="login-dialog-form-tip"></p> </form> </div> </div> '),t("tplMinBar",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.live800,s=t.cdnPath,o=t.wapQQ,c=t.cart,l=t.mobile,r=t.wechat,d=t.feedback,u=t.gotop,h="";return h+=' <section id="J_minBar" class="min-bar"> <div class="min-bar-tabs"> <div class="min-bar-tab min-bar-online"> <div class="min-bar-online-icon"> <a href="',h+=n(i.clientLink),h+='" class="blankLink JQ_minBarOnline" target="_blank"> <img src="',h+=n(s),h+=n(i.iconPath),h+='" width="',h+=n(i.iconWidth),h+='" height="',h+=n(i.iconHeight),h+='" alt="',h+=n(i.iconText),h+='"/> <label class="min-bar-chat-num">',h+=n(i.chatNum),h+='</label> </a> <span class="min-bar-online-pop"> <span class="pop-close">&nbsp;</span> <a href="',h+=n(i.clientLink),h+='" class="pop-chat" target="_blank">&nbsp;</a> </span> </div> </div> <div class="min-bar-tab min-bar-qq min-text"> <div class="min-bar-qq-icon"> <a href="',h+=n(o.clientLink),h+='" class="blankLink" target="_blank"> <img src="',h+=n(s),h+=n(o.iconPath),h+='" width="',h+=n(o.iconWidth),h+='" height="',h+=n(o.iconHeight),h+='" alt="',h+=n(o.iconText),h+='"/> </a> <span class="min-bar-qq-text text">',h+=n(o.iconText),h+='</span> </div> </div> <div class="min-bar-tab min-bar-cart min-cart"> <div class="min-bar-cart-icon"> <a href="',h+=n(c.clientLink),h+='" class="icon-float-cart"> <span id="J_cartNum" class="min-bar-cart-num">',h+=n(c.chatNum),h+='</span> </a> </div> <div id="J_minBarPlugin" class="min-bar-plugin"> <div class="bar-plugin-cart"> <ul id="J_pluginCart"> </ul> <div class="plugin-cart-info"> <p class="cart-info-price"> <span class="cart-info-num"> 共 <label id="J_minBarCartNum">0</label> 件商品 </span> <span class="cart-info-total"> 合计: <small>&yen;</small> <label id="J_minBarCartTotal">0</label> </span> </p> <p class="cart-info-shipping">(不含运费)</p> <p class="cart-info-btn"> <a href="javascript:void(0);" id="J_minBarBtn" class="btn-gray" target="_blank">查看购物车</a> </p> </div> </div> </div> </div> <div class="min-bar-tab min-bar-phone min-phone"> <div class="min-bar-phone-icon"> <a href="',h+=n(l.clientLink),h+='" class="icon-float-phone">&nbsp;</a> <span class="min-bar-phone-img phone"> <img src="',h+=n(s),h+=n(l.iconPath),h+='" width="',h+=n(l.iconWidth),h+='" height="',h+=n(l.iconHeight),h+='" alt="',h+=n(l.iconText),h+='" /> </span> </div> </div> <div class="min-bar-tab min-bar-wechat min-wechat"> <div class="min-bar-wechat-icon"> <a href="',h+=n(r.clientLink),h+='" class="icon-float-wechat">&nbsp;</a> <span class="min-bar-wechat-img wechat"> <img src="',h+=n(s),h+=n(r.iconPath),h+='" width="',h+=n(r.iconWidth),h+='" height="',h+=n(r.iconHeight),h+='" alt="',h+=n(r.iconText),h+='" /> </span> </div> </div> <div class="min-bar-tab min-bar-feedback min-text"> <div class="min-bar-feedback-icon"> <a href="',h+=n(d.clientLink),h+='" class="icon-float-feedback blankLink" target="_blank">&nbsp;</a> <span class="min-bar-feedback-text text">',h+=n(d.iconText),h+='</span> </div> </div> <div class="min-bar-tab min-bar-gtop min-text"> <div class="min-bar-gtop-icon" id="J_minBarGoTop"> <a href="',h+=n(u.clientLink),h+='" class="icon-float-top">&nbsp;</a> <span class="min-bar-gtop-text text">',h+=n(u.iconText),h+='</span> </div> </div> </div> </section> <section class="min-bar-mark"></section> ',new p(h)}),t("tplSelectAddress",function(t,e){"use strict";var a=this,n=(a.$helpers,t.valCity),i=a.$escape,s=t.textPro,o=t.valPro,c=t.textCity,l=t.valArea,r=t.textArea,d="";return d+='<div id="J_selectProvience" class="select-gray fl"> <i class="select-corner icon-gray-left"></i> ',""==n?d+=' <label class="JQ_option select-option w90" data-value="0">请选择省</label> ':(d+=' <label class="JQ_option select-option w90" data-value="0">',d+=i(s),d+="</label> "),d+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_proList"></ul> <input type="hidden" name="valProvince" value="',d+=i(o),d+='" /> </div> <div class="select-gray fl JQ_addressCity"> <i class="select-corner icon-gray-left"></i> ',""==n?d+=' <label class="JQ_option select-option w90" data-value="0">请选择市</label> ':(d+=' <label class="JQ_option select-option w90" data-value="0">',d+=i(c),d+="</label> "),d+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_cityList"></ul> <input type="hidden" name="valCity" value="',d+=i(n),d+='" /> </div> <div class="select-gray fl JQ_addressArea"> <i class="select-corner icon-gray-left"></i> ',""==l?d+=' <label class="JQ_option select-option w90" data-value="0">请选择区</label> ':(d+=' <label class="JQ_option select-option w90" data-value="0">',d+=i(r),d+="</label> "),d+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_areaList"></ul> <input type="hidden" name="valArea" value="',d+=i(l),d+='" /> </div> ',new p(d)}),t("tplTopAd",function(t,e){"use strict";var a=this,n=(a.$helpers,t.link),i=a.$escape,s=t.linkURL,o=t.title,c=t.imgURL,l="";return l+='<div class="top-ad-wrap" style="width: 100%; overflow: hidden;"> <div style="background:url(http://misc.jjcdn.com/p/images/loading-t.gif) center center no-repeat;"> <a href="',""!=n&&(l+=i(n)),""!=s&&(l+=i(s)),l+='" target="_blank" title="',l+=i(o),l+='" style=" display:block; width:100%; min-height: 80px; background:url(',l+=i(c),l+=') center top no-repeat; "> <img src="',l+=i(c),l+='" style="visibility: hidden;display: block" /> </a> <a href="javascript:void(0);" class="index-top-ad-close" id="J_indexTopAdClose"> <span></span> </a> </div> </div>',new p(l)})}(),!function(){function t(t,e){return(/string|function/.test(typeof e)?c:o)(t,e)}function e(t,a){return"string"!=typeof t&&(a=typeof t,"number"===a?t+="":t="function"===a?e(t.call(t)):""),t}function a(t){return d[t]}function n(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function i(t,e){if(u(t))for(var a=0,n=t.length;n>a;a++)e.call(t,t[a],a,t);else for(a in t)e.call(t,t[a],a)}function s(t,e){var a=/(\/)[^/]+\1\.\.\1/,n=("./"+t).replace(/[^/]+$/,""),i=n+e;for(i=i.replace(/\/\.\//g,"/");i.match(a);)i=i.replace(a,"/");return i}function o(e,a){var n=t.get(e)||l({filename:e,name:"Render Error",message:"Template not found"});return a?n(a):n}function c(t,e){if("string"==typeof e){var a=e;e=function(){return new p(a)}}var n=r[t]=function(a){try{return new e(a,t)+""}catch(n){return l(n)()}};return n.prototype=e.prototype=h,n.toString=function(){return e+""},n}function l(t){var e="{Template Error}",a=t.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var n in t)a+="<"+n+">\n"+t[n]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+a),e}}var r=t.cache={},p=this.String,d={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},u=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},h=t.utils={$helpers:{},$include:function(t,e,a){return t=s(a,t),o(t,e)},$string:e,$escape:n,$each:i},f=t.helpers=h.$helpers;t.get=function(t){return r[t.replace(/^\.\//,"")]},t.helper=function(t,e){f[t]=e},"function"==typeof define?define("lib/template/tempaccount",[],function(e,a,n){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("tplSetEmail",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.email,s="";return s+='<div class="set-email-form">  <p class="fc-333">系统将向您的邮箱 ',s+=n(i),s+=' 发送一封验证邮件，请您登录邮箱，点击邮件中的链接完成邮箱验证。</p>  <p id="J_sendBtnWrap" class="email-btn-tr"> <a id="J_sendMail" href="javascript:void(0);" class="send-btn orange" target="_blank">发送验证邮件</a> </p>  <p id="J_sendMailSub" class="tc fs-14"> <span id="J_subWrap" class="fc-f60"></span> </p>  <p class="fc-8c8 tc mt-10"> <label>如果您超过5分钟未收到邮件，您可以重新发送验证邮件</label> </p>  <p class="email-send-tip"> 为什么要验证邮箱？<br> 1. 验证邮箱可加强账户安全，您可以使用已验证手机快速找回密码或支付密码；<br> 2. 已验证邮箱可用于接收金海马商城优惠信息、会员资讯等。 </p> </div>',new p(s)}),t("tplSetMailOne",'<div class="set-phone-form"> <input type="hidden" name="setPhoneOneRes"> <p class="set-phone-steps"> <span class="step-on">验证身份</span> <span class="step-off">验证邮箱</span> <span class="step-off">完成绑定</span> </p> <p class="tc fc-333 step-tip">为了确保您的帐号安全，请先验证您的身份。</p> <div class="step-tr"> <p id="J_stepPass" class="step-input-wrap w178"> <input type="password" name="stepMailPass" placeholder="请输入登录密码" class="JQ_editPassOption"> </p> <p class="edit-pass-tip"></p> </div> <div class="step-tr clearfix"> <p id="J_setCode" class="step-input-wrap w78 fl"> <input type="text" name="stepMailCode" placeholder="验证码" class="JQ_editPassOption"> </p> <p class="step-code-wrap fl"> <img id="J_stepMailCode" src="http://misc.jjcdn.com/p/images/testYZM.png" width="90" height="26" /> <a id="J_getMailCode" href="javascript:void(0);" class="change-code-btn">换一张</a> </p> <div class="clear"></div> <p class="edit-pass-tip"></p> </div> </div>'),t("tplSetMailThree",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.mail,s="";return s+='<div class="set-phone-form"> <p class="set-phone-steps">  <span class="step-on">验证邮箱</span> <span class="step-on">完成绑定</span> </p> <p class="tc fc-333 fs-14 step-tip"> <i class="icon-face-smile-orange"></i> <b>恭喜您，邮箱<label id="J_mailBind" class="fc-f60">',s+=n(i),s+='</label>绑定成功！</b> </p> <p class="tc fc-8c8 step-tip">现在开始，您可以用该邮箱来登录金海马商城了</p> </div>',new p(s)}),t("tplSetMailTwo",'<div class="set-phone-form"> <p class="set-phone-steps">  <span class="step-on">验证邮箱</span> <span class="step-off">完成绑定</span> </p> <p class="tc fc-333 step-tip">请确保您的邮箱能正常使用，验证成功，邮箱才能生效。</p> <div class="step-tr"> <p id="J_stepPhone" class="step-input-wrap w178"> <input type="text" name="stepTwoMail" placeholder="请输入邮箱" class="JQ_editPassOption"> </p> <p class="edit-pass-tip"></p> </div> <div class="step-tr clearfix"> <p id="J_stepPhoneCode" class="step-input-wrap w78 fl"> <input type="text" name="stepTwoMailCode" placeholder="输入验证码" class="JQ_editPassOption"> </p> <p class="step-code-wrap fl"> <a id="J_sendEmailCode" href="javascript:void(0);" class="phone-code-btn"> 发送邮箱验证码 </a> <a id="J_codeWait" href="javascript:void(0);" class="phone-code-btn-gray hide"> <label id="J_subMTimeWrap" class="fc-f60">300</label>秒 </a> </p> <div class="clear"></div> <p class="edit-pass-tip"></p> </div> </div>'),t("tplSetPhoneOne",'<div class="set-phone-form"> <input type="hidden" name="setPhoneOneRes"> <p class="set-phone-steps"> <span class="step-on">验证身份</span> <span class="step-off">验证手机</span> <span class="step-off">完成绑定</span> </p> <p class="tc fc-333 step-tip">为了确保您的帐号安全，请先验证您的身份。</p> <div class="step-tr"> <p id="J_stepPass" class="step-input-wrap w178"> <input type="password" name="stepPass" placeholder="请输入登录密码" class="JQ_editPassOption"> </p> <p class="edit-pass-tip"></p> </div> <div class="step-tr clearfix"> <p id="J_setCode" class="step-input-wrap w78 fl"> <input type="text" name="stepCode" placeholder="验证码" class="JQ_editPassOption"> </p> <p class="step-code-wrap fl"> <img id="J_stepRCode" src="http://misc.jjcdn.com/p/images/testYZM.png" width="90" height="26" /> <a id="J_getNewCode" href="javascript:void(0);" class="change-code-btn">换一张</a> </p> <div class="clear"></div> <p class="edit-pass-tip"></p> </div> </div>'),t("tplSetPhoneThree",function(t,e){"use strict";var a=this,n=(a.$helpers,a.$escape),i=t.phone,s="";return s+='<div class="set-phone-form"> <p class="set-phone-steps">  <span class="step-on">验证手机</span> <span class="step-on">完成绑定</span> </p> <p class="tc fc-333 fs-14 step-tip"> <i class="icon-face-smile-orange"></i> <b>恭喜您，手机<label id="J_mobilePhone" class="fc-f60">',s+=n(i),s+='</label>绑定成功！</b> </p> <p class="tc fc-8c8 step-tip">现在开始，您可以用该手机号码来登录金海马商城了</p> </div>',new p(s)}),t("tplSetPhoneTwo",'<div class="set-phone-form"> <p class="set-phone-steps">  <span class="step-on">验证手机</span> <span class="step-off">完成绑定</span> </p> <p class="tc fc-333 step-tip">请确保您的手机能正常接收短信，验证成功，新手机才能生效。</p> <div class="step-tr"> <p id="J_stepPhone" class="step-input-wrap w178"> <input type="text" name="stepTwoPhone" placeholder="请输入手机号码" class="JQ_editPassOption"> </p> <p class="edit-pass-tip"></p> </div> <div class="step-tr clearfix"> <p id="J_stepPhoneCode" class="step-input-wrap w78 fl"> <input type="text" name="stepTwoPhoneCode" placeholder="输入验证码" class="JQ_editPassOption"> </p> <p class="step-code-wrap fl"> <a id="J_getPhoneCode" href="javascript:void(0);" class="phone-code-btn"> 获取手机验证码 </a> <a id="J_codeWait" href="javascript:void(0);" class="phone-code-btn-gray"> <label id="J_subTimeWrap" class="fc-f60">60</label>秒 </a> </p> <div class="clear"></div> <p class="edit-pass-tip"></p> </div> </div>')}(),define("lib/components/minBar/1.0.1/minBar",[],function(t,e,a){function n(t){function e(){a(O),b(),m("#J_minBarPlugin"),i($(window).innerWidth()),$(window).resize(function(){i($(window).innerWidth())}),A.each(function(t){var e=$(this);e.on("mouseover",function(t){e.find("span.text").stop(!0,!0).delay(300).animate({right:"40px",opacity:1},300)}).on("mouseleave",function(t){e.find("span.text").stop(!0,!0).animate({right:"-80px",opacity:.1},300)}).on("click",function(t){var a=e.find("a.blankLink").attr("href");try{(a.indexOf("http")>-1||a.indexOf("https")>-1)&&window.open(a)}catch(n){}})}),N.hover(function(){$("#J_minBarPlugin").stop(!0,!0).fadeIn(300),r()},function(){$("#J_minBarPlugin").stop(!0,!0).hide()}),x.on("mouseenter",function(t){$(this).find(".min-bar-wechat-img").stop(!0,!0).css({display:"block"}).delay(200).animate({width:"140px",height:"164px",padding:"5px",top:"-40px",opacity:1},300)}).on("mouseleave",function(t){$(this).find(".min-bar-wechat-img").stop(!0,!0).css({display:"none"}).animate({width:"36px",height:"36px",opacity:0},300)}),P.on("mouseenter",function(t){$(this).find(".min-bar-phone-img").stop(!0,!0).css({display:"block"}).delay(200).animate({width:"160px",height:"250px",top:"-80px",opacity:1},300)}).on("mouseleave",function(t){$(this).find(".min-bar-phone-img").stop(!0,!0).css({display:"none"}).animate({width:"36px",height:"36px",opacity:0},300)}),J.on("click",function(t){$("body,html").stop(!0,!0).animate({scrollTop:0},300)}),E.on("click",function(t){t.preventDefault(),M.fadeOut(300),clearTimeout(F),I?z||(z=!0,a(S)):(I=!0,a(D))}),j.hover(function(){M.stop(!0,!0).fadeIn(300),clearTimeout(F),I?z||(z=!0,a(S)):(I=!0,a(D))},function(){
M.stop(!0,!0).fadeOut(300),clearTimeout(F),I?z||(z=!0,a(S)):(I=!0,a(D))}),L.on("click",function(t){M.fadeOut(300),clearTimeout(F),I?z||(z=!0,a(S)):(I=!0,a(D))}),$(document).on("click",".JQ_minBarDelete",function(t){t.preventDefault();var e=$(this).attr("data-id"),a=$(this).parents("li");$.ajax({url:cdnConfig.cartApiPath+"/delete/"+e,dataType:"jsonp",success:function(t){"succ"==t.status?(a.addClass("delItem"),a.fadeOut(300,function(){$(".delItem").remove(),p(),m("#J_minBarPlugin")})):(p(),m("#J_minBarPlugin"))}})})}function a(t){setTimeout(function(){M.fadeIn(200),n(5e3)},t)}function n(t){t=isNaN(t)?5e3:t,F=setTimeout(function(){M.fadeOut(200),I?z||(z=!0,a(S)):(I=!0,a(D))},t)}function i(t){isNaN(t)?t=$(window).innerWidth():t,Q>t?(c(),o(),N.on("mouseenter",function(t){t.stopPropagation(),s(),l()}),j.on("mouseenter",function(t){t.stopPropagation(),s(),l()}),T.on("mouseenter",function(t){t.stopPropagation(),s(),l()}),J.on("mouseenter",function(t){t.stopPropagation(),s(),l()}),y.on("mouseleave",function(t){t.stopPropagation(),t.preventDefault(),o(),c()})):(l(),s())}function s(){B.stop(!0,!0).delay(300).animate({right:"0px"},300)}function o(){B.stop(!0,!0).delay(300).animate({right:"-40px"},300)}function c(){P.stop(!0,!0).animate({right:"-40px"}),x.stop(!0,!0).animate({right:"-40px"}),C.stop(!0,!0).animate({right:"-40px"})}function l(){P.stop(!0,!0).delay(300).animate({right:"0px"}),x.stop(!0,!0).delay(300).animate({right:"0px"}),C.stop(!0,!0).delay(300).animate({right:"0px"})}function r(){$.ajax({url:cdnConfig.apiPath+"/cart/minilist",dataType:"jsonp",success:function(t){var e="";if("200"==t.code){var a=t.data.list;if(a.length>0)for(var n=0;n<a.length;n++)e+="<li>",e+='<div class="plugin-cart-list-img">',e+='<a href="'+a[n].link+'" target="_blank">',e+='<img src="'+a[n].src+'" width="90" height="60" alt="'+a[n].title+'"/>',e+="</a>",e+="</div>",e+='<div class="plugin-cart-list-title">',e+='<a href="'+a[n].link+'" target="_blank" title="'+a[n].title+'">'+a[n].title+"</a>",e+="</div>",e+='<div class="plugin-cart-list-info">',e+='<p class="list-price">&yen; <span class="JQ_minCartItemPrice">'+a[n].price+"</span></p>",e+='<p class="list-num">x <span class="JQ_minCartItemNum">'+a[n].num+"</span></p>",e+='<input type="hidden" class="JQ_minCartItemTotal" value="'+a[n].price*a[n].num+'" />',e+="</div>",e+='<a class="cart-list-delete-btn JQ_minBarDelete" data-id="'+a[n].cart_id+'" href="javascript:void(0);" target="_blank">x</a>',e+="</li>",v(e,"no")}else e="<li>您的购物车空空的~</li>",v(e,"yes");p(),m("#J_minBarPlugin")},error:function(t){}})}function p(){f(".JQ_minCartItemTotal","#J_minBarCartTotal"),h(".JQ_minCartItemNum","#J_minBarCartNum"),u("#J_minBarBtn","#J_minBarCartNum")}function d(t,e){$(t).html(e)}function u(t,e){var a="http://cart.kinhom.com/list.html",n=$(e),i=$(t);parseInt(n.html())>0?i.removeClass("btn-gray").addClass("btn-orange").attr("href",a):i.removeClass("btn-orange").addClass("btn-gray").attr("href","javascript:void(0);")}function h(t,e){var a=$(e),n=0;if($(t).length>0)$(t).each(function(){n+=parseInt($(this).html())});else{var i="<li>您的购物车空空的~</li>";v(i,"yes"),u("#J_minBarBtn","#J_minBarCartNum")}a.html(n),d("#J_cartNum",n)}function f(t,e){var a=$(e),n=0;$(t).length>0?($(t).each(function(){n+=parseInt($(this).val())}),a.html(n)):a.html(0)}function m(t){var e=$(t),a=e.innerHeight();e.css({top:"50%","margin-top":"-"+parseInt(a/2)+"px"})}function v(t,e){switch(e){case"yes":$("#J_pluginCart").addClass("plugin-cart-empty").removeClass("plugin-cart-list").html(t);break;case"no":$("#J_pluginCart").removeClass("plugin-cart-empty").addClass("plugin-cart-list").html(t)}}function b(){$.ajax({url:cdnConfig.apiPath+"/cart/statistics",dataType:"jsonp",success:function(t){"succ"==t.status?d("#J_cartNum",t.data.num):d("#J_cartNum",0)},error:function(t){}})}var g=t.mainCell||"#J_minBar",_=t.tpl||function(){},w=t.tplName||"comment/tplMinBar",k=t.data||{};$("body").append(_(w,k));var y=g.indexOf("#")>-1?$(g):$("#"+g),J=y.find(".min-bar-gtop"),x=y.find(".min-wechat"),P=y.find(".min-phone"),C=y.find(".min-bar-feedback"),N=y.find(".min-cart"),T=y.find(".min-bar-qq"),j=y.find(".min-bar-online"),B=$(".min-bar-mark"),M=$(".min-bar-online-pop"),E=$(".pop-close"),L=$(".pop-chat"),Q=1280,A=y.find(".min-text"),I=!1,z=!1,O="30000",D="180000",S="180000";e();var F}a.exports=n}),define("lib/components/dialog/1.0.0/dialog",["lib/components/dialog/1.0.0/popup","lib/components/dialog/1.0.0/dialog-config"],function(t,e,a){var n=t("./popup"),i=t("./dialog-config"),s=i.cssUri;if(s){var o=t[t.toUrl?"toUrl":"resolve"];o&&(s=o(s),s='<link rel="stylesheet" href="'+s+'" />',$("base")[0]?$("base").before(s):$("head").append(s))}var c=0,l=new Date-0,r=!("minWidth"in $("html")[0].style),p="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),d=!r&&!p,u=function(t,e,a){var n=t=t||{};"string"!=typeof t&&1!==t.nodeType||(t={content:t,fixed:!p}),t=$.extend(!0,{},u.defaults,t),t.original=n;var i=t.id=t.id||l+c,s=u.get(i);return s?s.focus():(d||(t.fixed=!0),t.quickClose&&(t.modal=!0,t.backdropOpacity=0),$.isArray(t.button)||(t.button=[]),void 0!==a&&(t.cancel=a),t.cancel&&t.button.push({id:"cancel",className:t.cancelClassName,value:t.cancelValue,callback:t.cancel,display:t.cancelDisplay}),void 0!==e&&(t.ok=e),t.ok&&t.button.push({id:"ok",className:t.okClassName,value:t.okValue,callback:t.ok,autofocus:!0}),u.list[i]=new u.create(t))},h=function(){};h.prototype=n.prototype;var f=u.prototype=new h;return u.create=function(t){var e=this;$.extend(this,new n);var a=(t.original,$(this.node).html(t.innerHTML)),i=$(this.backdrop);return this.options=t,this._popup=a,$.each(t,function(t,a){"function"==typeof e[t]?e[t](a):e[t]=a}),t.zIndex&&(n.zIndex=t.zIndex),a.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").on("click",function(t){e._trigger("cancel"),t.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),t.quickClose&&i.on("onmousedown"in document?"mousedown":"click",function(){return e._trigger("cancel"),!1}),this.addEventListener("show",function(){i.css({opacity:0,background:t.backdropBackground}).animate({opacity:t.backdropOpacity},150)}),this._esc=function(t){var a=t.target,i=a.nodeName,s=/^input|textarea$/i,o=n.current===e,c=t.keyCode;!o||s.test(i)&&"button"!==a.type||27===c&&e._trigger("cancel")},$(document).on("keydown",this._esc),this.addEventListener("remove",function(){$(document).off("keydown",this._esc),delete u.list[this.id]}),c++,u.oncreate(this),this},u.create.prototype=f,$.extend(f,{content:function(t){var e=this._$("content");return"object"==typeof t?(t=$(t),e.empty("").append(t.show()),this.addEventListener("beforeremove",function(){$("body").append(t.hide())})):e.html(t),this.reset()},title:function(t){return this._$("title").text(t),this._$("header")[t?"show":"hide"](),this},width:function(t){return this._$("content").css("width",t),this.reset()},height:function(t){return this._$("content").css("height",t),this.reset()},button:function(t){t=t||[];var e=this,a="",n=0;return this.callbacks={},"string"==typeof t?(a=t,n++):$.each(t,function(t,i){var s=i.id=i.id||i.value,o="";e.callbacks[s]=i.callback,i.display===!1?o=' style="display:none"':n++,a+='<button type="button" i-id="'+s+'" class="'+(i.className?i.className:"ui-btns-nor")+'"'+o+(i.disabled?" disabled":"")+(i.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+i.value+"</button>",e._$("button").on("click","[i-id="+s+"]",function(t){var a=$(this);a.attr("disabled")||e._trigger(s),t.preventDefault()})}),this._$("button").html(a),this._$("footer")[n?"show":"hide"](),this},statusbar:function(t){return this._$("statusbar").html(t)[t?"show":"hide"](),this},_$:function(t){return this._popup.find("[i="+t+"]")},_trigger:function(t){var e=this.callbacks[t];return"function"!=typeof e||e.call(this)!==!1?this.close().remove():this}}),u.oncreate=$.noop,u.getCurrent=function(){return n.current},u.get=function(t){return void 0===t?u.list:u.list[t]},u.list={},u.defaults=i,u}),define("lib/components/dialog/1.0.0/popup",[],function(t,e,a){function n(){this.destroyed=!1,this.__popup=$("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=$("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],i++}var i=0,s=!("minWidth"in $("html")[0].style),o=!s;return $.extend(n.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(t){if(this.destroyed)return this;var e=this.__popup,a=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=t||this.follow,!this.__ready){if(e.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),s||$(window).on("resize",$.proxy(this.reset,this)),this.modal){var i={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||n.zIndex};e.addClass(this.className+"-modal"),o||$.extend(i,{position:"absolute",width:$(window).width()+"px",height:$(document).height()+"px"}),a.css(i).attr({tabindex:"0"}).on("focus",$.proxy(this.focus,this)),this.__mask=a.clone(!0).attr("style","").insertAfter(e),a.addClass(this.className+"-backdrop").insertBefore(e),this.__ready=!0}e.html()||e.html(this.innerHTML)}return e.addClass(this.className+"-show").show(),a.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(t){return!this.destroyed&&this.open&&(void 0!==t&&(this.returnValue=t),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),n.current===this&&(n.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),s||$(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var t in this)delete this[t];return this},reset:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("reset"),this},resize:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("resize"),this},focus:function(){var t=this.node,e=this.__popup,a=n.current,i=this.zIndex=n.zIndex++;if(a&&a!==this&&a.blur(!1),!$.contains(t,this.__getActive())){var s=e.find("[autofocus]")[0];!this._autofocus&&s?this._autofocus=!0:s=t,this.__focus(s)}return e.css("zIndex",i),n.current=this,e.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var t=this.__activeElement,e=arguments[0];return e!==!1&&this.__focus(t),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(t,e){return this.__getEventListener(t).push(e),this},removeEventListener:function(t,e){for(var a=this.__getEventListener(t),n=0;n<a.length;n++)e===a[n]&&a.splice(n--,1);return this},__getEventListener:function(t){var e=this.__listener;return e||(e=this.__listener={}),e[t]||(e[t]=[]),e[t]},__dispatchEvent:function(t){var e=this.__getEventListener(t);this["on"+t]&&this["on"+t]();for(var a=0;a<e.length;a++)e[a].call(this)},__focus:function(t){try{this.autofocus&&!/^iframe$/i.test(t.nodeName)&&t.focus()}catch(e){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,a=e&&e.activeElement||t;return a}catch(n){}},__center:function(){var t=this.__popup,e=$(window),a=$(document),n=this.fixed,i=n?0:a.scrollLeft(),s=n?0:a.scrollTop(),o=e.width(),c=e.innerHeight(),l=t.width(),r=t.height(),p=(o-l)/2,d=(c-r)/2,u=t[0].style;u.left=Math.max(parseInt(p),i)+"px",u.top=Math.max(parseInt(d),s)+"px"},__follow:function(t){var e=t.parentNode&&$(t),a=this.__popup;if(this.__followSkin&&a.removeClass(this.__followSkin),e){var n=e.offset();if(n.left*n.top<0)return this.__center()}var i=this,s=this.fixed,o=$(window),c=$(document),l=o.width(),r=o.height(),p=c.scrollLeft(),d=c.scrollTop(),u=a.width(),h=a.height(),f=e?e.outerWidth():0,m=e?e.outerHeight():0,v=this.__offset(t),b=v.left,g=v.top,_=s?b-p:b,w=s?g-d:g,k=s?0:p,y=s?0:d,J=k+l-u,x=y+r-h,P={},C=this.align.split(" "),N=this.className+"-",T={top:"bottom",bottom:"top",left:"right",right:"left"},j={top:"top",bottom:"top",left:"left",right:"left"},B=[{top:w-h,bottom:w+m,left:_-u,right:_+f},{top:w,bottom:w-h+m,left:_,right:_-u+f}],M={left:_+f/2-u/2,top:w+m/2-h/2},E={left:[k,J],top:[y,x]};$.each(C,function(t,e){B[t][e]>E[j[e]][1]&&(e=C[t]=T[e]),B[t][e]<E[j[e]][0]&&(C[t]=T[e])}),C[1]||(j[C[1]]="left"===j[C[0]]?"top":"left",B[1][C[1]]=M[j[C[1]]]),N+=C.join("-")+" "+this.className+"-follow",i.__followSkin=N,e&&a.addClass(N),P[j[C[0]]]=parseInt(B[0][C[0]]),P[j[C[1]]]=parseInt(B[1][C[1]]),a.css(P)},__offset:function(t){var e=t.parentNode,a=e?$(t).offset():{left:t.pageX,top:t.pageY};t=e?t:t.target;var n=t.ownerDocument,i=n.defaultView||n.parentWindow;if(i==window)return a;var s=i.frameElement,o=$(n),c=o.scrollLeft(),l=o.scrollTop(),r=$(s).offset(),p=r.left,d=r.top;return{left:a.left+p-c,top:a.top+d-l}}}),n.zIndex=1024,n.current=null,n}),define("lib/components/dialog/1.0.0/dialog-config",[],{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,okClassName:"ui-btns-ok",cancel:null,cancelClassName:"ui-btns-cancel",okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><span i="close" class="ui-dialog-close">&#215;</span><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="button" class="ui-dialog-button"></div></td></tr><tr><td i="footerSub" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div></td></tr></table></div>'}),define("lib/components/khValidate/1.0.0/khValidate",[],function(t,e,a){var n={chkEnName:function(t){var e=/^[a-zA-Z|0-9]{3,20}$/;return e.test(t)},chkCnName:function(t){var e=/^[\u2E80-\u9FFF]{2,20}$/;return e.test(t)},chkIsChinese:function(t){var e=/[\u4E00-\u9FA5\uF900-\uFA2D]/;return e.test(t)},chkUserName:function(t){var e=/^[\u2E80-\u9FFF|0-9|a-zA-Z|_]{2,20}$/;return e.test(t)},chkTelephone:function(t){var e=/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/;return e.test(t)},chkPhone:function(t){var e=/^(13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/;return e.test(t)},chkPass:function(t){var e=/^[a-zA-Z0-9_-]{6,20}$/;return e.test(t)},chkPassNew:function(t){var e=/^[^\u2E80-\uFFA0\s]{6,20}$/;return e.test(t)},chkNumber:function(t,e){var a;switch(e){case 4:a=/^[0-9]{4}$/;break;case 5:a=/^[0-9]{5}$/;break;case 6:a=/^[0-9]{6}$/;break;case 7:a=/^[0-9]{7}$/;break;case 8:a=/^[0-9]{8}$/;break;case 9:a=/^[0-9]{9}$/;break;case 10:a=/^[0-9]{10}$/;break;case 11:a=/^[0-9]{11}$/;break;case 12:a=/^[0-9]{12}$/;break;case 13:a=/^[0-9]{13}$/;break;case 14:a=/^[0-9]{14}$/;break;case 15:a=/^[0-9]{15}$/;break;case 16:a=/^[0-9]{16}$/;break;case 17:a=/^[0-9]{17}$/;break;case 18:a=/^[0-9]{18}$/;break;default:a=/^[0-9]{6}$/}return a.test(t)},chkAliAcount:function(t){var e=/^[0-9]{11}|^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;return e.test(t)},chkBankName:function(t){var e=/^[\u2E80-\u9FFF]{4,20}$/;return e.test(t)},chkBankAcount:function(t){var e=/^[0-9]{15,23}$/;return e.test(t)},chkBankOrderNum:function(t){var e=/^[0-9]{8,}$/;return e.test(t)},chkPrice:function(t){var e=/^[0-9]{1,10}[\.][0-9]{2}$/;return e.test(t)},chkEmail:function(t){var e=/^([a-zA-Z0-9_\.-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;return e.test(t)},chkURL:function(t){var e=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;return e.test(t)},chkIP:function(t){var e=/((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)/;return e.test(t)},chkScript:function(t){var e=/^[A-Za-z0-9|_|-|\u4E00-\u9FA5\uF900-\uFA2D|@|#|,|.|;]+$/;return e.test(t)}};a.exports=n});