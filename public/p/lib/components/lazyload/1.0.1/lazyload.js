define(function(require,exports,module){!function($,window,document,undefined){"use strict";function _executeLazy(instance,configuration,items,event){function _initialize(){if(_isRetinaDisplay=window.devicePixelRatio>1,null!==configuration("defaultImage")||null!==configuration("placeholder"))for(var i=0;i<items.length;i++){var element=$(items[i]),tag=items[i].tagName.toLowerCase(),propertyName="background-image";element.data("plugin_"+instance.name,instance),"img"==tag&&configuration("defaultImage")&&!element.attr("src")?element.attr("src",configuration("defaultImage")):"img"==tag||!configuration("placeholder")||element.css(propertyName)&&"none"!=element.css(propertyName)||element.css(propertyName,"url("+configuration("placeholder")+")")}configuration("delay")>=0&&setTimeout(function(){_lazyLoadImages(!0)},configuration("delay")),(configuration("delay")<0||configuration("combined"))&&(_lazyLoadImages(),event.e=_throttle(configuration("throttle"),function(event){"resize"===event.type&&(_actualWidth=_actualHeight=-1),_addToQueue(function(){_lazyLoadImages(event.all)},instance,!0)}),$(configuration("appendScroll")).on("scroll."+instance.name+" resize."+instance.name,event.e))}function _lazyLoadImages(allImages){if(!items.length)return instance.destroy();for(var loadedImages=!1,i=0;i<items.length;i++)(function(item){if(_isInLoadableArea(item)||allImages){var element=$(item),tag=item.tagName.toLowerCase();if(element.data(configuration("handledName")))return;element.attr(configuration("attribute"))&&("img"==tag&&element.attr(configuration("attribute"))!=element.attr("src")||"img"!=tag&&element.attr(configuration("attribute"))!=element.css("background-image"))&&(element.is(":visible")||!configuration("visibleOnly"))&&(loadedImages=!0,element.data(configuration("handledName"),!0),_addToQueue(function(){_handleItem(element,tag)}))}})(items[i]);loadedImages&&_addToQueue(function(){items=$(items).filter(function(){return!$(this).data(configuration("handledName"))})})}function _handleItem(element,tag){var imageObj=$(new Image);++_awaitingAfterLoad,imageObj.error(function(){_triggerCallback("onError",element),_reduceAwaiting()}),imageObj.one("load",function(){element.hide(),"img"==tag?element.attr("src",imageObj.attr("src")):element.css("background-image","url("+imageObj.attr("src")+")"),element[configuration("effect")](configuration("effectTime")),configuration("removeAttribute")&&element.removeAttr(configuration("attribute")+" "+configuration("retinaAttribute")),_triggerCallback("afterLoad",element),imageObj.off("error").remove(),_reduceAwaiting()}),_triggerCallback("beforeLoad",element),imageObj.attr("src",element.attr(configuration(_isRetinaDisplay&&element.attr(configuration("retinaAttribute"))?"retinaAttribute":"attribute"))),imageObj.complete&&imageObj.load()}function _isInLoadableArea(element){var elementBound=element.getBoundingClientRect(),threshold=configuration("threshold"),vertical=_getActualHeight()+threshold>elementBound.top&&-threshold<elementBound.bottom,horizontal=_getActualWidth()+threshold>elementBound.left&&-threshold<elementBound.right;return"vertical"==configuration("scrollDirection")?vertical:"horizontal"==configuration("scrollDirection")?horizontal:vertical&&horizontal}function _getActualWidth(){return _actualWidth=_getDimension(_actualWidth,"Width")}function _getActualHeight(){return _actualHeight=_getDimension(_actualHeight,"Height")}function _getDimension(buffer,type){return buffer>=0?buffer:window["inner"+type]||(document.documentElement||document.body)["client"+type]||document.body["offset"+type]||configuration("fallback"+type)}function _throttle(delay,callback){var timeout,lastExecute=0;return function(event,ignoreThrottle){function run(){lastExecute=+new Date,callback.call(undefined,event)}var elapsed=+new Date-lastExecute;timeout&&clearTimeout(timeout),elapsed>delay||!configuration("enableThrottle")||ignoreThrottle?run():timeout=setTimeout(run,delay-elapsed)}}function _reduceAwaiting(){--_awaitingAfterLoad,items.size()||_awaitingAfterLoad||_triggerCallback("onFinishedAll",null)}function _triggerCallback(callback,element){(callback=configuration(callback))&&(element?_addToQueue(function(){callback(element)},instance):_addToQueue(callback,instance))}function _setQueueTimer(){_queueTimer=setTimeout(function(){_addToQueue(),_queueItems.length&&_setQueueTimer()},2)}function _addToQueue(callable,context,isLazyMagic){return callable?configuration("enableQueueing")?(isLazyMagic&&_queueContainsMagic||(_queueItems.push([callable,context,isLazyMagic]),isLazyMagic&&(_queueContainsMagic=!0)),void(1==_queueItems.length&&_setQueueTimer())):void callable.call(context||window):void((callable=_queueItems.shift())&&(callable[2]&&(_queueContainsMagic=!1),callable[0].call(callable[1]||window)))}var _awaitingAfterLoad=0,_actualWidth=-1,_actualHeight=-1,_isRetinaDisplay=!1,_queueTimer=null,_queueItems=[],_queueContainsMagic=!1;!function(){if(configuration("onError"))for(var i=0;i<items.length;i++)_addToQueue(function(){$(this).on("error."+instance.name,function(){_triggerCallback("onError",$(this))})},items[i]);"event"==configuration("bind")?_initialize():$(window).load(_initialize)}()}function LazyPlugin(elements,settings){settings&&$.extend(this.configuration,settings);var _instance=this,_items=elements,_event={e:null},_configuration=function(entryName){return _instance.configuration[entryName]};return _instance.update=function(useThrottle){_event.e&&_event.e({},!useThrottle)},_instance.loadAll=function(){_event.e&&_event.e({all:!0})},_instance.destroy=function(){$(_configuration("appendScroll")).off("."+_instance.name,_event.e),_items={},_event.e=null},_executeLazy(_instance,_configuration,_items,_event),_configuration("chainable")?elements:_instance}$.fn.Lazy=$.fn.lazy=function(settings){return new LazyPlugin(this,settings)},$.extend(LazyPlugin.prototype,{name:"lazy",configuration:{chainable:!0,bind:"load",threshold:500,fallbackWidth:2e3,fallbackHeight:2e3,visibleOnly:!1,appendScroll:window,scrollDirection:"both",defaultImage:"data:image/gif;base64,R0lGODlhQAFAAbMLALOzs+Hh4dbW1rq6uoGBgTQ0NAEBARsbG8TExJeXl1RUVP///wAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCNDY3OEE2OTA3NTQxMUU1QTU5QUIyMjdFNjUyQkNDMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCNDY3OEE2QTA3NTQxMUU1QTU5QUIyMjdFNjUyQkNDMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkI0Njc4QTY3MDc1NDExRTVBNTlBQjIyN0U2NTJCQ0MxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkI0Njc4QTY4MDc1NDExRTVBNTlBQjIyN0U2NTJCQ0MxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp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",placeholder:null,delay:-1,combined:!1,attribute:"data-original",retinaAttribute:"data-retina",removeAttribute:!0,handledName:"handled",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,enableQueueing:!0,beforeLoad:null,afterLoad:null,onError:null,onFinishedAll:null}})}(jQuery,window,document)});