define("libpage.0.1/cart-confirm",["lib/template/tempcomment","lib/template/tempcart","lib/components/khSelect/1.0.0/khSelect","lib/components/dialog/1.0.0/dialog","lib/components/dialog/1.0.0/popup","lib/components/dialog/1.0.0/dialog-config","lib/components/khValidate/1.0.0/khValidate","lib/components/khSelectAddress/1.0.0/khSelectAddress"],function(t,e,a){function i(t){var e='<a href="javascript:void(0);" id="J_submitBtn" class="submit-cart-btn">提交订单<i class="icon-point-right"></i></a>',a='<a href="javascript:void(0);" id="J_grayBtn" class="submit-cart-btn" style="background-color: #ccc; cursor: default;">提交订单<i class="icon-point-right"></i></a>';"true"==t?($("#J_submitBtn").css({"background-color":"#f60"}).attr("id","J_submitBtn"),0==$(".btns-item").children("#J_submitBtn").length&&($(".btns-item").children("#J_grayBtn").remove(),$(".btns-item").append(e))):"false"==t&&($(".btns-item").children("#J_submitBtn").remove(),0==$(".btns-item").children("#J_grayBtn").length&&$(".btns-item").append(a))}function s(t){function e(t,e){0==t.list.length||(e.html(g("tplAddressList",t)),$(".JQ_radio").each(function(){if($(this).hasClass("icon-radio-on")){var t=$(this).parent("dt").attr("data-value").split(",")[1];o(t)}}))}var a=$(t);$.ajax({url:cdnConfig.cartApiPath+"/cart/address",dataType:"jsonp",success:function(t){if("succ"==t.status&&0!=t.data.list.length?e(t.data,a):a.html('<input type="hidden" name="addressID" value="" /><p>&nbsp;</p><p class="vtm tc fs-14">暂无收货地址</p><p class="tc fs-14"><a class="JQ_addNewAddress" href="'+cdnConfig.my+'/user/addressdo?type=1">添加地址</a></p>'),1==_){var i,s,n=$(".J_noticePhone"),l=$("input[name='rePhoneNum']"),o=$.trim($("input[name=addressID]").val());if(""!=o)for(i=0;i<t.data.list.length;i++)1==t.data.list[i].def?(s=t.data.list[i].mobile,n.html(s),l.val(s)):(s=t.data.list[0].mobile,n.html(s),l.val(s));else $(".retainage-notice").html('<div class="notice-bg"><span class="iblock pl-10 pr-10">没有您的详细地址和联系方式哦！<a href="javascript:void(0);" class="edit JQ_toToAdd">添加</a></span></div>'),$(".JQ_toToAdd").on("click",function(){var t=$(".ship-address-top").offset().top;$("html,body").stop().animate({scrollTop:t},300)})}}})}function n(){function t(t,e,a){var i=new J({content:'<span class="fc-f60">'+t+"</span>",align:a}).show(document.getElementById(e));setTimeout(function(){i.remove()},1500)}var e=window.location.href;$("#J_addressForm").append('<input type="hidden" name="url" value="'+e+'" />');var a=$.trim($("input[name=userName]").val()),i=$.trim($("input[name=address]").val()),s=$.trim($("input[name=tel]").val()),n=$.trim($("input[name=phone]").val()),l=$.trim($("input[name=valProvince]").val()),o=$.trim($("input[name=valCity]").val()),r=$.trim($("input[name=valArea]").val());return""==a?(t("请输入收货人!","J_userName","right"),$("input[name=userName]").focus(),!1):k.chkUserName(a)?""==l||""==o||""==r?(t("请选择您所在的地区!","J_selectAddress","left"),!1):""==i?(t("请输入具体地址!","J_address","left"),!1):/^[A-Za-z0-9\u4e00-\u9fa5\(\)\（\）\-_\\—]{2,200}$/.test(i)?""==s&&""==n?(t("手机固话至少必填一个！","J_tel","right"),t("手机固话至少必填一个！","J_phone","right"),!1):""==s||k.chkTelephone(s)?""==n||k.chkPhone(n)?void $("#J_addressForm").submit():(t("手机格式有误！","J_phone","right"),!1):(t("固话格式有误！","J_tel","right"),!1):(t("请勿输入非法字符!","J_address","left"),!1):(t("收货人姓名不能有特殊符号!","J_userName","right"),$("input[name=username]").focus(),!1)}function l(t){var e=t.parents(".ship-address-list");e.find(".JQ_setDefault").remove(),e.find(".JQ_modifyAddress").before('<span class="default-address-text JQ_defaultText">默认地址</span>'),e.find(".JQ_labelIcon").addClass("icon-label-f60"),e.find(".JQ_default").val(1),e.siblings(".ship-address-list").each(function(t){var e=$(this);e.find(".JQ_labelIcon").removeClass("icon-label-f60").addClass("icon-empty"),e.find(".JQ_defaultText").remove(),e.find(".JQ_setDefault").remove(),e.find(".JQ_default").val(0),e.find(".JQ_modifyAddress").before('<a href="javascript:void(0);" class="list-set-label JQ_setDefault">设为默认地址</a>')})}function o(t){function e(){$(".btns-item").html('<span class="J_agreeDeposit"><i class="icon icon-box-normal "></i>同意支付定金<sapn class="fc-f60">（定金恕不退还）</sapn></span><a href="javascript:void(0);" id="J_grayBtn" class="submit-cart-btn" style="background-color: #ccc; cursor: default;">提交订单<i class="icon-point-right"></i></a>')}var a={labelName:"",list:""};$.ajax({url:cdnConfig.cartApiPath+"/cart/ship/"+t,dataType:"jsonp",success:function(t){if("succ"==t.status){a.labelName=t.data.list[0].name,a.list=t.data.list,r(a,"#J_shiping");var s=t.data.list[0].price;$("#J_shipPrice").html(s.toFixed(2)),1==_?(e(),v("true")):i("true"),m()}else a.labelName="此地址不支持配送",a.list=[],$("#J_shipPrice").html("0.00"),r(a,"#J_shiping"),1==_?(e(),i("false")):i("false"),m()}})}function r(t,e){var a=$(e);a.html(g("tplSelectShip",t)),y({mainCell:"#J_shiping",callback:function(t,e,a){var i=a.attr("data-price");$("#J_shipPrice").html(parseFloat(i).toFixed(2)),m()}})}function c(){var t=0;$(".JQ_subtotal").each(function(){t+=parseFloat($(this).html())}),$("#J_totalPrice").html(t.toFixed(2))}function d(t){var e=$(t),a=e.find("textArea"),i=e.find("#J_textMount"),s=i.attr("data-max");$(".JQ_placeHolder").on("click",function(){$(this).hide(),a.focus()}),a.on("focus",function(){$(".JQ_placeHolder").hide()}),a.on("blur",function(){""==$.trim($(this).val())&&$(".JQ_placeHolder").show()}),a.on("keyup",function(){var t=$(this).val();t.length<=s?i.html(t.length):$(this).val(t.substr(0,200))})}function p(){var t={labelName:"暂无可用现金券",list:[]};$.ajax({url:cdnConfig.cartApiPath+"/cart/cash",dataType:"jsonp",success:function(e){"succ"==e.status?t.list=e.data.list:(t.labelName=e.data.msg,t.list.length=0,$("#J_cash .JQ_option").html(e.data.msg)),$("#J_useCashWrap").append(g("tplCartCash",t)),y({mainCell:"#J_cash",callback:function(t,e,a){$("#J_cashPrice").html(a.attr("data-price")),$("input[name=selectCashPrice]").val(a.attr("data-price")),m()}})}})}function u(){var t={labelName:"暂无可用优惠券",list:[]};$.ajax({url:cdnConfig.cartApiPath+"/cart/coupon",dataType:"jsonp",success:function(e){"succ"==e.status?t.list=e.data.list:(t.labelName=e.data.msg,t.list.length=0,$("#J_coupon .JQ_option").html(e.data.msg)),$("#J_useCouponWrap").append(g("tplCoupon",t)),y({mainCell:"#J_coupon",callback:function(t,e,a){$("#J_couponPrice").html(a.attr("data-price")),$("input[name=selectCouponPrice]").val(a.attr("data-price")),m()}})}})}function h(t){var e=($(t),$("#J_shopPoints").html());0==e?$("input[name=shopPoints]").attr("disabled","disabled"):($("input[name=shopPoints]").attr("data-max",e),$("input[name=shopPoints]").removeAttr("disabled")),f()}function f(){var t=$("input[name=shopPoints]"),e=t.attr("data-max"),a=$("#J_toUse"),i=new J({align:"bottom"});t.on("keyup",function(t){t.preventDefault();var s=$(this),n=$(this).val();isNaN(n)?(s.val(0),a.html(parseFloat(s.val()/100).toFixed(2)),$("#J_pointsPrice").html(parseFloat(s.val()/100).toFixed(2))):parseFloat(n)>parseFloat(e)?(i.content('<p class="mt-10">最多只能使用'+e+"积分</p>"),i.show(document.getElementById("J_shopPoints")),setTimeout(function(){i.close()},3e3),s.val(e),a.html(parseFloat(e/100).toFixed(2)),$("#J_pointsPrice").html(parseFloat(e/100).toFixed(2))):(a.html(parseFloat(s.val()/100).toFixed(2)),$("#J_pointsPrice").html(parseFloat(s.val()/100).toFixed(2))),m()})}function m(){var t=0,e=$(".JQ_orderPoints"),a=$.trim($("#J_totalPrice").html()),i=$.trim($("#J_cashPrice").html()),s=$.trim($("#J_couponPrice").html()),n=$.trim($("#J_redWalletPrice").html()),l=$.trim($("#J_pointsPrice").html()),o=$.trim($("#J_shipPrice").html());if(2==_){t=parseFloat(a)+parseFloat(o);var r=Math.floor(t);e.html(r)}else t=1==_?parseFloat(a):parseFloat(a)-parseFloat(i)-parseFloat(s)-parseFloat(n)-parseFloat(l)+parseFloat(o);$(".JQ_payPrice").html(t.toFixed(2))}function v(t){"true"==t?$(".J_agreeDeposit").on("click",function(){var t=$(this),e=t.find(".icon");e.hasClass("icon-box-checked")?(e.removeClass("icon-box-checked"),i("false")):(e.addClass("icon-box-checked"),i("true"))}):(icon.removeClass("icon-box-checked"),i("false"))}var _,b=t("../../template/tempcomment"),g=t("../../template/tempcart"),y=t("../../components/khSelect/1.0.0/khSelect"),J=t("../../components/dialog/1.0.0/dialog"),k=t("../../components/khValidate/1.0.0/khValidate"),w=t("../../components/khSelectAddress/1.0.0/khSelectAddress");if($("body").find(".JQ_preType")){var x=($("#J_prosell").val(),$(".JQ_preType").attr("data-preSellType")),C=$(".JQ_preType").attr("data-balanceType");1==x&&1==C?_=1:1==x&&2==C&&(_=2)}else _=0;p(),u(),h("#J_shopPoints"),y({mainCell:"#J_privilege"}),s("#J_addressWrap"),$(document).on("click",".JQ_chkAddress",function(){var t=$(this).parents("dl"),e=$(this).attr("data-value").split(",")[0],a=$(this).attr("data-value").split(",")[1];$("input[name=addressID]").val(e),o(a),$(this).find(".JQ_radio").hasClass("icon-radio-on")||($(this).find(".JQ_radio").addClass("icon-radio-on"),t.siblings("dl").find(".JQ_radio").removeClass("icon-radio-on"))});var Q,A={actionURL:"",userName:"",valPro:"",textPro:"",valCity:"",textCity:"",valArea:"",textArea:"",address:"",telephone:"",mobilephone:"",defaultAdd:0,addressID:0};$(document).on("click",".JQ_addNewAddress",function(t){for(var e in A)A[e]="";t.preventDefault(),A.actionURL=$(this).attr("href");var a=b("tplAddressForm",A);Q=new J({title:"新增收货地址",width:560,fixed:!0,button:[{value:"保存收货人信息",className:"ui-btns-orange",callback:function(){return n(),!1}},{value:"取消",className:"ui-btns-gray",callback:function(){}}]}),Q.content(a),Q.showModal(),$("#J_selectAddress").html(b("tplSelectAddress",A)),w({selectModule:y}),$("#J_setDefault").on("click",function(){$(this).hasClass("icon-box-normal")?($(this).removeClass("icon-box-normal").addClass("icon-box-checked"),$(this).siblings("input").val("1")):($(this).removeClass("icon-box-checked").addClass("icon-box-normal"),$(this).siblings("input").val("0"))})}),$(document).on("click",".JQ_modifyAddress",function(t){var e=$(this).parents("dl");A.actionURL=$(this).attr("href"),A.userName=e.find(".JQ_userName").attr("title"),A.valPro=e.find(".JQ_area").attr("data-value").split(",")[0],A.valCity=e.find(".JQ_area").attr("data-value").split(",")[1],A.valArea=e.find(".JQ_area").attr("data-value").split(",")[2],A.textPro=e.find(".JQ_area").attr("data-value").split(",")[3],A.textCity=e.find(".JQ_area").attr("data-value").split(",")[4],A.textArea=e.find(".JQ_area").attr("data-value").split(",")[5],A.address=e.find(".JQ_address").attr("title"),A.addressID=e.find(".JQ_chkAddress").attr("data-value").split(",")[0],A.telephone=e.find(".JQ_telephone").attr("data-value").split(",")[1],A.mobilephone=e.find(".JQ_telephone").attr("data-value").split(",")[0],A.defaultAdd=e.find(".JQ_default").val(),t.preventDefault();var a=b("tplAddressForm",A);Q=new J({title:"编辑收货地址",width:560,fixed:!0,button:[{value:"保存收货人信息",className:"ui-btns-orange",callback:function(){return n(),!1}},{value:"取消",className:"ui-btns-gray",callback:function(){}}]}),Q.content(a),Q.showModal(),$("#J_selectAddress").html(b("tplSelectAddress",A)),w({selectModule:y}),$("#J_setDefault").on("click",function(){$(this).hasClass("icon-box-normal")?($(this).removeClass("icon-box-normal").addClass("icon-box-checked"),$(this).siblings("input").val("1")):($(this).removeClass("icon-box-checked").addClass("icon-box-normal"),$(this).siblings("input").val("0"))})}),$(document).on("click",".JQ_setDefault",function(t){var e=$(this),a=e.parent(".JQ_chkAddress").attr("data-value").split(",")[0],i=new J({fixed:!0});$.ajax({url:cdnConfig.cartApiPath+"/cart/setdefault/"+a,dataType:"jsonp",success:function(t){"succ"==t.status?(i.content('<p>&nbsp;</p><p class="fs-14 fc-333 tc w130">设置成功!</p>'),i.showModal(),setTimeout(function(){i.close()},1e3),l(e)):(i.content('<p class="fs-14 fc-333 tc">设置失败!</p>'),i.showModal(),setTimeout(function(){i.close()},1e3))}})}),$(document).on("click","#J_submitBtn",function(t){var e=$.trim($("input[name=addressID]").val()),a=$(".ship-address").offset().top,i=new J({title:"提示",content:'<p>&nbsp;</p><p class="tc fs-14">您还没有收货地址，请添加后提交订单。</p>',width:400,height:60,fixed:!0,button:[{value:"确定",className:"ui-btns-orange",callback:function(){$("html,body").stop().animate({scrollTop:a},300)}}]}),s=new J({fixed:!0,width:190,height:40,content:'<p>&nbsp;</p><p class="fc-333 fs-14 tc">请稍等...</p>'});""!=e?(s.showModal(),$("#J_form").submit()):i.showModal()}),c(),d("#J_summary");var N="";$(".JQ_useCash").on("click",function(){var t=$(this);t.hasClass("icon-box-checked")?(t.removeClass("icon-box-checked"),$("#J_cashWrap").hide(),N=$("input[name=selectCash]").val(),$("input[name=selectCash]").val(""),$("#J_cashPrice").html("0.00"),m()):(t.addClass("icon-box-checked"),$("#J_cashWrap").css({display:"inline"}),$("input[name=selectCash]").val(N),$("#J_cashPrice").html($("input[name=selectCashPrice]").val()),m())});var P="";$(".JQ_useConpon").on("click",function(){var t=$(this);$(".JQ_useRedWallet").hasClass("icon-box-checked")?alert("优惠券和红包不能同时使用哦！"):t.hasClass("icon-box-checked")?(t.removeClass("icon-box-checked"),$("#J_couponWrap").hide(),P=$("input[name=selectCoupon]").val(),$("input[name=selectCoupon]").val(""),$("#J_couponPrice").html("0.00"),m()):(t.addClass("icon-box-checked"),$("#J_couponWrap").css({display:"inline"}),$("input[name=selectCoupon]").val(P),$("#J_couponPrice").html($("input[name=selectCouponPrice]").val()),m())});var j="";$(".JQ_useRedWallet").on("click",function(){var t=$(this);$(".JQ_useConpon").hasClass("icon-box-checked")?alert("优惠券和红包不能同时使用哦！"):t.hasClass("icon-box-checked")?(t.removeClass("icon-box-checked"),$("#J_redWalletWrap").hide(),j=$("input[name=selectRedWallet]").val(),$("input[name=selectRedWallet]").val(""),$("#J_redWalletPrice").html("0.00"),m()):(t.addClass("icon-box-checked"),$("#J_redWalletWrap").css({display:"inline"}),$("input[name=selectRedWallet]").val(j),$("#J_redWalletPrice").html($("input[name=selectRedWalletPrice]").val()),m())}),$(function(){y({mainCell:"#J_redWallet",callback:function(t,e,a){$("#J_redWalletPrice").html(a.attr("data-price")),$("input[name=selectRedWalletPrice]").val(a.attr("data-price")),m()}})}),$(".JQ_usePoints").on("click",function(){var t=$(this);t.hasClass("icon-box-checked")?(t.removeClass("icon-box-checked"),$(".list-points").hide(),$("input[name=shopPoints]").val(0),$("#J_toUse").html(0),$("#J_pointsPrice").html("0.00"),m()):(t.addClass("icon-box-checked"),$(".list-points").show())}),function(){var t=$(".J_noticeEdit"),e=$(".J_noticeSave"),a=$(".J_noticeCancle"),i=$(".J_noticeModify"),s=$(".J_noticePhone"),n=$(".J_noticeMsg"),l=$("input[name='rePhoneNum']");t.on("click",function(){t.addClass("pre-sale-hide"),s.addClass("pre-sale-hide"),e.removeClass("pre-sale-hide"),a.removeClass("pre-sale-hide"),i.removeClass("pre-sale-hide")}),a.on("click",function(){t.removeClass("pre-sale-hide"),s.removeClass("pre-sale-hide"),e.addClass("pre-sale-hide"),a.addClass("pre-sale-hide"),i.addClass("pre-sale-hide"),n.hide()}),e.on("click",function(){var o=$.trim(i.val());""==o?n.html("请输入尾款提醒手机号码").show():/^(13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/.test(o)?(l.val(o),s.html(o).removeClass("pre-sale-hide"),t.removeClass("pre-sale-hide"),e.addClass("pre-sale-hide"),a.addClass("pre-sale-hide"),i.val("").addClass("pre-sale-hide")):n.html("请输入正确的手机号码").show()}),i.on("focus",function(){n.hide()}),i.on("blur",function(){var t=$.trim(i.val());""==t?n.html("请输入尾款提醒手机号码").show():/^(13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/.test(t)||n.html("请输入正确的手机号码").show()})}()}),!function(){function t(t,e){return(/string|function/.test(typeof e)?o:l)(t,e)}function e(t,a){return"string"!=typeof t&&(a=typeof t,"number"===a?t+="":t="function"===a?e(t.call(t)):""),t}function a(t){return p[t]}function i(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function s(t,e){if(u(t))for(var a=0,i=t.length;i>a;a++)e.call(t,t[a],a,t);else for(a in t)e.call(t,t[a],a)}function n(t,e){var a=/(\/)[^/]+\1\.\.\1/,i=("./"+t).replace(/[^/]+$/,""),s=i+e;for(s=s.replace(/\/\.\//g,"/");s.match(a);)s=s.replace(a,"/");return s}function l(e,a){var i=t.get(e)||r({filename:e,name:"Render Error",message:"Template not found"});return a?i(a):i}function o(t,e){if("string"==typeof e){var a=e;e=function(){return new d(a)}}var i=c[t]=function(a){try{return new e(a,t)+""}catch(i){return r(i)()}};return i.prototype=e.prototype=h,i.toString=function(){return e+""},i}function r(t){var e="{Template Error}",a=t.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var i in t)a+="<"+i+">\n"+t[i]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+a),e}}var c=t.cache={},d=this.String,p={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},u=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},h=t.utils={$helpers:{},$include:function(t,e,a){return t=n(a,t),l(t,e)},$string:e,$escape:i,$each:s},f=t.helpers=h.$helpers;t.get=function(t){return c[t.replace(/^\.\//,"")]},t.helper=function(t,e){f[t]=e},"function"==typeof define?define("lib/template/tempcomment",[],function(e,a,i){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("tplAddressForm",function(t,e){"use strict";var a=this,i=(a.$helpers,a.$escape),s=t.actionURL,n=t.addressID,l=t.userName,o=t.address,r=t.telephone,c=t.mobilephone,p=t.defaultAdd,u="";return u+='<form id="J_addressForm" action="',u+=i(s),u+='" method="post"> <input type="hidden" name="addressID" value="',u+=i(n),u+='"> <table id="J_add" class="person-address-add-table"> <tbody class="person-address"> <tr class="item"> <th class="address-add-head">收货人：</th> <td> <input id="J_userName" class="person-address-add-input" name="userName" value="',u+=i(l),u+='" /> <span class="fc-f60">*</span> </td> </tr> <tr class="item"> <th class="address-add-head">详细地址：</th> <td id="J_selectAddress"></td> </tr> <tr class="item"> <th>&nbsp;</th> <td> <p> <input id="J_address" class="person-address-add-input detailed-address-input" name="address" placeholder="具体地址" value="',u+=i(o),u+='" /> <span class="fc-f60">*</span> </p> <p> <label class="person-address-add-tip">&nbsp;&nbsp;&nbsp;(不需要重复填写省/市/区)</label> </p> </td> </tr> <tr class="item"> <th class="address-add-head">固定电话：</th> <td> <input id="J_tel" class="person-address-add-input" name="tel" value="',u+=i(r),u+='" /> <label class="person-address-add-tip"><span>*</span>&nbsp;&nbsp;（示例：020-88888888-999）</label> </td> </tr> <tr class="item"> <th class="address-add-head">手机：</th> <td> <input id="J_phone" class="person-address-add-input" name="phone" value="',u+=i(c),u+='" /> <label class="person-address-add-tip"><span>*</span>&nbsp;&nbsp;（手机或固话必填一项）</label> </td> </tr> <tr class="item"> <th>&nbsp;</th> <td> <div class="defult-address-choose"> ',u+="1"==p?' <a id="J_setDefault" href="javascript:void(0);" class="icon icon-box-checked"></a> ':' <a id="J_setDefault" href="javascript:void(0);" class="icon icon-box-normal"></a> ',u+=' <span class="address-font-gray">设为默认地址</span> <input type="hidden" name="setDefault" value="',u+=i(p),u+='" /> </div> </td> </tr> </tbody> </table> </form>',new d(u)}),t("tplBottomAd",function(t,e){"use strict";var a=this,i=(a.$helpers,t.link),s=a.$escape,n=t.linkURL,l=t.title,o=t.imgURL,r="";return r+='<div class="full-ad-wrap" style="width: 100%; overflow: hidden;"> <div style="background:url(http://misc.jjcdn.com/p/images/loading-t.gif) center center no-repeat;"> <a href="',""!=i&&(r+=s(i)),""!=n&&(r+=s(n)),r+='" target="_blank" title="',r+=s(l),r+='" style=" display:block; width:100%;min-height: 80px;background:url(',r+=s(o),r+=') center top no-repeat; "> <img src="',r+=s(o),r+='" style="visibility: hidden;display: block" /> </a> <a href="javascript:void(0);" class="full-ad-close" id="J_itemBottomAdClose"><span></span></a> </div> </div>',new d(r)}),t("tplEditPassForm",function(t,e){"use strict";var a=this,i=(a.$helpers,a.$escape),s=t.actionURL,n="";return n+='<form id="J_editPassForm" action="',n+=i(s),n+='" method="post"> <div class="fc-8c8">为了您的账户安全，请定期更换登录密码，并确保登录密码设置与提现密码不同。</div> <input type="hidden" name="form" value="form"> <div class="a-edit-pass-tr"> <p id="J_oldPass" class="edit-input-wrap"> <input type="password" name="old_passwd" placeholder="原密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> <div class="a-edit-pass-tr fc-8c8"> <p id="J_newPass" class="edit-input-wrap"> <input type="password" name="new_passwd" placeholder="输入新密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> <div class="a-edit-pass-tr fc-8c8"> <p id="J_confirmNewPass" class="edit-input-wrap"> <input type="password" name="confirmNewPass" placeholder="再次输入新密码" class="JQ_editPassOption" /> </p> <p class="edit-pass-tip"></p> </div> </form>',new d(n)}),t("tplFloatNav",'<div id="J_floatNav" class="float-nav"> <a href="http://chat10.live800.com/live800/chatClient/chatbox.jsp?companyID=201143&jid=2104161973" class="float-nav-char-wrap JQ_floatNavNormal" target="_blank"> <span class="floag-online-chat">在线客服</span> <i class="icon-float-chat normal-icon"></i> </a> <a href="http://crm2.qq.com/page/portalpage/wpa.php?uin=4006538038&aty=0&a=0&curl=&ty=1" class="float-nav-qq JQ_floatNavNormal" target="_blank"> <span>QQ客服</span> <i class="icon-float-qq normal-icon"></i> </a> <a href="http://cart.kinhom.com/list.html" class="float-nav-cart JQ_floatNavNormal" target="_blank"> <span>购物车</span> <i class="icon-float-cart normal-icon"></i> <i class="icon-cart-num num-icon">0</i> </a> <a href="javascript:void(0);" class="float-nav-wechat JQ_floatNavWechat"> <span> <img src="http://misc.jjcdn.com/p/images/float_wechat.png" width="40" height="40" /> </span> <i class="icon-float-wechat normal-icon"></i> </a> <a href="http://www.wenjuan.com/s/qU36f2/" target="_blank" class="float-nav-feedback JQ_floatNavNormal"> <span>意见反馈</span> <i class="icon-float-feedback normal-icon"></i> </a> <a id="J_floatGoTop" href="javascript:void(0);" class="float-nav-top JQ_floatNavNormal"> <span>返回顶部</span> <i class="icon-float-top normal-icon"></i> </a> </div>'),t("tplLoginDialog",'<div class="login-dialog"> <div class="login-dialog-form"> <form action="javascript:void(0);" method="post"> <p class="login-dialog-form-tr" id="J_loginUserName"> <label>用户名：</label> <input type="text" name="loginUserName" placeholder="输入用户名/邮箱/手机"> </p> <p class="login-dialog-form-tip"></p> <p class="login-dialog-form-tr" id="J_loginPassword"> <label>密&nbsp;&nbsp;&nbsp;码：</label> <input type="password" name="loginPassword" placeholder="输入密码"> </p> <p class="login-dialog-form-tip"></p> </form> </div> </div> '),t("tplMinBar",function(t,e){"use strict";var a=this,i=(a.$helpers,a.$escape),s=t.live800,n=t.cdnPath,l=t.wapQQ,o=t.cart,r=t.mobile,c=t.wechat,p=t.feedback,u=t.gotop,h="";return h+=' <section id="J_minBar" class="min-bar"> <div class="min-bar-tabs"> <div class="min-bar-tab min-bar-online"> <div class="min-bar-online-icon"> <a href="',h+=i(s.clientLink),h+='" class="blankLink JQ_minBarOnline" target="_blank"> <img src="',h+=i(n),h+=i(s.iconPath),h+='" width="',h+=i(s.iconWidth),h+='" height="',h+=i(s.iconHeight),h+='" alt="',h+=i(s.iconText),h+='"/> <label class="min-bar-chat-num">',h+=i(s.chatNum),h+='</label> </a> <span class="min-bar-online-pop"> <span class="pop-close">&nbsp;</span> <a href="',h+=i(s.clientLink),h+='" class="pop-chat" target="_blank">&nbsp;</a> </span> </div> </div> <div class="min-bar-tab min-bar-qq min-text"> <div class="min-bar-qq-icon"> <a href="',h+=i(l.clientLink),h+='" class="blankLink" target="_blank"> <img src="',h+=i(n),h+=i(l.iconPath),h+='" width="',h+=i(l.iconWidth),h+='" height="',h+=i(l.iconHeight),h+='" alt="',h+=i(l.iconText),h+='"/> </a> <span class="min-bar-qq-text text">',h+=i(l.iconText),h+='</span> </div> </div> <div class="min-bar-tab min-bar-cart min-cart"> <div class="min-bar-cart-icon"> <a href="',h+=i(o.clientLink),h+='" class="icon-float-cart"> <span id="J_cartNum" class="min-bar-cart-num">',h+=i(o.chatNum),h+='</span> </a> </div> <div id="J_minBarPlugin" class="min-bar-plugin"> <div class="bar-plugin-cart"> <ul id="J_pluginCart"> </ul> <div class="plugin-cart-info"> <p class="cart-info-price"> <span class="cart-info-num"> 共 <label id="J_minBarCartNum">0</label> 件商品 </span> <span class="cart-info-total"> 合计: <small>&yen;</small> <label id="J_minBarCartTotal">0</label> </span> </p> <p class="cart-info-shipping">(不含运费)</p> <p class="cart-info-btn"> <a href="javascript:void(0);" id="J_minBarBtn" class="btn-gray" target="_blank">查看购物车</a> </p> </div> </div> </div> </div> <div class="min-bar-tab min-bar-phone min-phone"> <div class="min-bar-phone-icon"> <a href="',h+=i(r.clientLink),h+='" class="icon-float-phone">&nbsp;</a> <span class="min-bar-phone-img phone"> <img src="',h+=i(n),h+=i(r.iconPath),h+='" width="',h+=i(r.iconWidth),h+='" height="',h+=i(r.iconHeight),h+='" alt="',h+=i(r.iconText),h+='" /> </span> </div> </div> <div class="min-bar-tab min-bar-wechat min-wechat"> <div class="min-bar-wechat-icon"> <a href="',h+=i(c.clientLink),h+='" class="icon-float-wechat">&nbsp;</a> <span class="min-bar-wechat-img wechat"> <img src="',h+=i(n),h+=i(c.iconPath),h+='" width="',h+=i(c.iconWidth),h+='" height="',h+=i(c.iconHeight),h+='" alt="',h+=i(c.iconText),h+='" /> </span> </div> </div> <div class="min-bar-tab min-bar-feedback min-text"> <div class="min-bar-feedback-icon"> <a href="',h+=i(p.clientLink),h+='" class="icon-float-feedback blankLink" target="_blank">&nbsp;</a> <span class="min-bar-feedback-text text">',h+=i(p.iconText),h+='</span> </div> </div> <div class="min-bar-tab min-bar-gtop min-text"> <div class="min-bar-gtop-icon" id="J_minBarGoTop"> <a href="',h+=i(u.clientLink),h+='" class="icon-float-top">&nbsp;</a> <span class="min-bar-gtop-text text">',h+=i(u.iconText),h+='</span> </div> </div> </div> </section> <section class="min-bar-mark"></section> ',new d(h)}),t("tplSelectAddress",function(t,e){"use strict";var a=this,i=(a.$helpers,t.valCity),s=a.$escape,n=t.textPro,l=t.valPro,o=t.textCity,r=t.valArea,c=t.textArea,p="";return p+='<div id="J_selectProvience" class="select-gray fl"> <i class="select-corner icon-gray-left"></i> ',""==i?p+=' <label class="JQ_option select-option w90" data-value="0">请选择省</label> ':(p+=' <label class="JQ_option select-option w90" data-value="0">',p+=s(n),p+="</label> "),p+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_proList"></ul> <input type="hidden" name="valProvince" value="',p+=s(l),p+='" /> </div> <div class="select-gray fl JQ_addressCity"> <i class="select-corner icon-gray-left"></i> ',""==i?p+=' <label class="JQ_option select-option w90" data-value="0">请选择市</label> ':(p+=' <label class="JQ_option select-option w90" data-value="0">',p+=s(o),p+="</label> "),p+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_cityList"></ul> <input type="hidden" name="valCity" value="',p+=s(i),p+='" /> </div> <div class="select-gray fl JQ_addressArea"> <i class="select-corner icon-gray-left"></i> ',""==r?p+=' <label class="JQ_option select-option w90" data-value="0">请选择区</label> ':(p+=' <label class="JQ_option select-option w90" data-value="0">',p+=s(c),p+="</label> "),p+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_areaList"></ul> <input type="hidden" name="valArea" value="',p+=s(r),p+='" /> </div> ',new d(p)}),t("tplTopAd",function(t,e){"use strict";var a=this,i=(a.$helpers,t.link),s=a.$escape,n=t.linkURL,l=t.title,o=t.imgURL,r="";return r+='<div class="top-ad-wrap" style="width: 100%; overflow: hidden;"> <div style="background:url(http://misc.jjcdn.com/p/images/loading-t.gif) center center no-repeat;"> <a href="',""!=i&&(r+=s(i)),""!=n&&(r+=s(n)),r+='" target="_blank" title="',r+=s(l),r+='" style=" display:block; width:100%; min-height: 80px; background:url(',r+=s(o),r+=') center top no-repeat; "> <img src="',r+=s(o),r+='" style="visibility: hidden;display: block" /> </a> <a href="javascript:void(0);" class="index-top-ad-close" id="J_indexTopAdClose"> <span></span> </a> </div> </div>',new d(r)})}(),!function(){function t(t,e){return(/string|function/.test(typeof e)?o:l)(t,e)}function e(t,a){return"string"!=typeof t&&(a=typeof t,"number"===a?t+="":t="function"===a?e(t.call(t)):""),t}function a(t){return p[t]}function i(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function s(t,e){if(u(t))for(var a=0,i=t.length;i>a;a++)e.call(t,t[a],a,t);else for(a in t)e.call(t,t[a],a)}function n(t,e){var a=/(\/)[^/]+\1\.\.\1/,i=("./"+t).replace(/[^/]+$/,""),s=i+e;for(s=s.replace(/\/\.\//g,"/");s.match(a);)s=s.replace(a,"/");return s}function l(e,a){var i=t.get(e)||r({filename:e,name:"Render Error",message:"Template not found"});return a?i(a):i}function o(t,e){if("string"==typeof e){var a=e;e=function(){return new d(a)}}var i=c[t]=function(a){try{return new e(a,t)+""}catch(i){return r(i)()}};return i.prototype=e.prototype=h,i.toString=function(){return e+""},i}function r(t){var e="{Template Error}",a=t.stack||"";if(a)a=a.split("\n").slice(0,2).join("\n");else for(var i in t)a+="<"+i+">\n"+t[i]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+a),e}}var c=t.cache={},d=this.String,p={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},u=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},h=t.utils={$helpers:{},$include:function(t,e,a){return t=n(a,t),l(t,e)},$string:e,$escape:i,$each:s},f=t.helpers=h.$helpers;t.get=function(t){return c[t.replace(/^\.\//,"")]},t.helper=function(t,e){f[t]=e},"function"==typeof define?define("lib/template/tempcart",[],function(e,a,i){return t}):"undefined"!=typeof exports?module.exports=t:this.template=t,t("tplAddressList",function(t,e){"use strict";for(var a=this,i=(a.$helpers,t.i),s=t.list,n=a.$escape,l="",i=0;i<s.length;i++)l+=" ",0==i&&(l+=' <input type="hidden" name="addressID" value="',l+=n(s[i].addressID),l+='" /> '),l+=' <dl class="ship-address-list"> <dt class="JQ_chkAddress" data-value="',l+=n(s[i].addressID),l+=",",l+=n(s[i].areaID),l+='"> <a href="javascript:void(0);" class="icon-radio-off ',0==i&&(l+="icon-radio-on"),l+=' JQ_radio"></a> ',l+=1==s[i].def?' <i class="JQ_labelIcon icon-label-f60"></i> ':' <i class="JQ_labelIcon icon-empty"></i> ',l+=' <label class="JQ_userName address-name" title="',l+=n(s[i].name),l+='">',l+=n(s[i].name),l+='</label> <span class="JQ_area address-area" title="',l+=n(s[i].proName),l+=n(s[i].cityName),l+=n(s[i].areaName),l+='" data-value="',l+=n(s[i].proID),l+=",",l+=n(s[i].cityID),l+=",",l+=n(s[i].areaID),l+=",",l+=n(s[i].proName),l+=",",l+=n(s[i].cityName),l+=",",l+=n(s[i].areaName),l+='"> ',l+=n(s[i].proName),l+=n(s[i].cityName),l+=n(s[i].areaName),l+=' </span> <span class="JQ_address address-detail" title="',l+=n(s[i].address),l+='"> ',l+=n(s[i].address),l+=' </span> <span class="JQ_telephone address-phone" title="手机/电话：',l+=n(s[i].mobile),l+="/",l+=n(s[i].telphone),l+='" data-value="',l+=n(s[i].mobile),l+=",",l+=n(s[i].telphone),l+='"> 手机/电话：',l+=n(s[i].mobile),l+="/",l+=n(s[i].telphone),l+=' </span> <input type="hidden" class="JQ_default" value="',l+=n(s[i].def),l+='"> ',1==s[i].def?l+=' <span class="default-address-text JQ_defaultText">默认地址</span> ':(l+=' <a href="javascript:void(0);" data-id="',l+=n(s[i].addressID),l+='" class="list-set-label JQ_setDefault">设为默认地址</a> '),l+=' <a href="//my.kinhom.com/user/addressdo?type=3" class="icon-modify-8c8 JQ_modifyAddress"></a> </dt> </dl> ';return new d(l)}),t("tplCartCash",function(t,e){"use strict";var a=this,i=(a.$helpers,t.list),s=a.$escape,n=t.labelName,l=t.j,o="";if(o+='<div id="J_cashWrap" style="display: none;"> <div id="J_cash" class="select-gray fl"> <i class="select-corner icon-gray-left"></i> ',0==i.length?(o+=' <label class="JQ_option select-option ">',o+=s(n),o+="</label> "):o+=' <label class="JQ_option select-option ">选择可用的现金券</label> ',
o+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"> <i class="triangle-down"></i> </a> <input type="hidden" name="selectCash" /> <input type="hidden" name="selectCashPrice" value="0.00" /> ',0!=i.length){o+=' <ul id="J_cashList"> ';for(var l=0;l<i.length;l++)o+=' <li> <a href="javascript:void(0);" data-value="',o+=s(i[l].cash),o+='" data-price="',o+=s(i[l].price),o+='"> ',o+=s(i[l].name),o+=" </a> </li> ";o+=" </ul> "}return o+=" </div> </div>",new d(o)}),t("tplCoupon",function(t,e){"use strict";var a=this,i=(a.$helpers,t.list),s=a.$escape,n=t.labelName,l=t.j,o="";if(o+='<div id="J_couponWrap" style="display: none;"> <div id="J_coupon" class="select-gray fl"> <i class="select-corner icon-gray-left"></i> ',0==i.length?(o+=' <label class="JQ_option select-option ">',o+=s(n),o+="</label> "):o+=' <label class="JQ_option select-option ">选择可用的优惠券</label> ',o+=' <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"> <i class="triangle-down"></i> </a> <input type="hidden" name="selectCoupon" /> <input type="hidden" name="selectCouponPrice" value="0.00" /> ',0!=i.length){o+=' <ul id="J_couponList"> ';for(var l=0;l<i.length;l++)o+=' <li> <a href="javascript:void(0);" data-value="',o+=s(i[l].coupon),o+='" data-price="',o+=s(i[l].price),o+='"> ',o+=s(i[l].name),o+=" </a> </li> ";o+=" </ul> "}return o+=" </div> </div>",new d(o)}),t("tplHotList",function(t,e){"use strict";var a=this,i=(a.$helpers,t.list),s=t.i,n=t.len,l=a.$escape,o="";if(o+='<dl class="cart-hot-list clearfix"> <dt>热销单品</dt> ',0!=i.length){o+=" ";for(var s=0;n=i.length,n>s;s++)o+=' <dd> <a href="',o+=l(i[s].linkURL),o+='"><img src="',o+=l(i[s].imgURL),o+='" width="190" height="127" /></a> <a href="',o+=l(i[s].linkURL),o+='" class="cart-hot-list-title">',o+=l(i[s].title),o+='</a> <p> <label class="cart-hot-list-price">&yen ',o+=l(i[s].price),o+='</label> <span class="cart-hot-list-text">已有<i>',o+=l(i[s].saleNum),o+="</i>人购买</span> </p> </dd> "}return o+=" </dl>",new d(o)}),t("tplSelectShip",function(t,e){"use strict";var a=this,i=(a.$helpers,a.$escape),s=t.labelName,n=t.list,l=t.j,o=t.len,r="";if(r+='<i class="select-corner icon-gray-left"></i> <label class="JQ_option select-option">',r+=i(s),r+='</label> <i class="select-corner icon-gray-right"></i> <a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"> <i class="triangle-down"></i> </a> ',0!=n.length){r+=' <input name="shipType" type="hidden" value="',r+=i(n[0].shipType),r+='" /> <ul> ';for(var l=0;o=n.length,o>l;l++)r+=' <li> <a href="javascript:void(0);" data-value="',r+=i(n[l].shipType),r+='" data-price="',r+=i(n[l].price),r+='">',r+=i(n[l].name),r+="</a> </li> ";r+=" </ul> "}else r+=" <ul></ul> ";return new d(r)})}(),define("lib/components/khSelect/1.0.0/khSelect",[],function(t,e,a){function i(t){function e(t){var e=t.attr("id");$(".select-gray").each(function(t){$(this).attr("id")!=e&&$(this).find("ul").slideUp()})}var t=t||{},a=t.mainCell||"",i=t.callback||null,s="string"==typeof a?a.indexOf("#")>-1?$(a):$("#"+a):a,n=s.find("ul"),l=s.find(".JQ_option"),o=s.find(".JQ_selectBtn"),r=n.find("a"),c=s.find("input");ulObj=s.children("ul"),s.css({display:"inline-block","min-width":parseInt(l.width()+30)+"px"}),ulObj.height()>200?ulObj.css({"overflow-y":"scroll",height:"200px","min-width":parseInt(l.width()+28)+"px"}):ulObj.css({"min-width":parseInt(l.width()+28)+"px"}),l.on("click",function(t){n.slideToggle(),t.stopPropagation(),e(s)}),o.on("click",function(t){n.slideToggle(),t.stopPropagation(),e(s)}),r.on("click",function(t){n.slideUp(),l.html($(this).html()),c.length>0&&c.val($(this).attr("data-value")),"function"==typeof i?i($(this).attr("data-value"),$(this).html(),$(this)):"",t.stopPropagation()}),$(document).on("click","body",function(t){n.slideUp(),t.stopPropagation()})}a.exports=i}),define("lib/components/dialog/1.0.0/dialog",["lib/components/dialog/1.0.0/popup","lib/components/dialog/1.0.0/dialog-config"],function(t,e,a){var i=t("./popup"),s=t("./dialog-config"),n=s.cssUri;if(n){var l=t[t.toUrl?"toUrl":"resolve"];l&&(n=l(n),n='<link rel="stylesheet" href="'+n+'" />',$("base")[0]?$("base").before(n):$("head").append(n))}var o=0,r=new Date-0,c=!("minWidth"in $("html")[0].style),d="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),p=!c&&!d,u=function(t,e,a){var i=t=t||{};"string"!=typeof t&&1!==t.nodeType||(t={content:t,fixed:!d}),t=$.extend(!0,{},u.defaults,t),t.original=i;var s=t.id=t.id||r+o,n=u.get(s);return n?n.focus():(p||(t.fixed=!0),t.quickClose&&(t.modal=!0,t.backdropOpacity=0),$.isArray(t.button)||(t.button=[]),void 0!==a&&(t.cancel=a),t.cancel&&t.button.push({id:"cancel",className:t.cancelClassName,value:t.cancelValue,callback:t.cancel,display:t.cancelDisplay}),void 0!==e&&(t.ok=e),t.ok&&t.button.push({id:"ok",className:t.okClassName,value:t.okValue,callback:t.ok,autofocus:!0}),u.list[s]=new u.create(t))},h=function(){};h.prototype=i.prototype;var f=u.prototype=new h;return u.create=function(t){var e=this;$.extend(this,new i);var a=(t.original,$(this.node).html(t.innerHTML)),s=$(this.backdrop);return this.options=t,this._popup=a,$.each(t,function(t,a){"function"==typeof e[t]?e[t](a):e[t]=a}),t.zIndex&&(i.zIndex=t.zIndex),a.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",this.cancel===!1?"none":"").on("click",function(t){e._trigger("cancel"),t.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),t.quickClose&&s.on("onmousedown"in document?"mousedown":"click",function(){return e._trigger("cancel"),!1}),this.addEventListener("show",function(){s.css({opacity:0,background:t.backdropBackground}).animate({opacity:t.backdropOpacity},150)}),this._esc=function(t){var a=t.target,s=a.nodeName,n=/^input|textarea$/i,l=i.current===e,o=t.keyCode;!l||n.test(s)&&"button"!==a.type||27===o&&e._trigger("cancel")},$(document).on("keydown",this._esc),this.addEventListener("remove",function(){$(document).off("keydown",this._esc),delete u.list[this.id]}),o++,u.oncreate(this),this},u.create.prototype=f,$.extend(f,{content:function(t){var e=this._$("content");return"object"==typeof t?(t=$(t),e.empty("").append(t.show()),this.addEventListener("beforeremove",function(){$("body").append(t.hide())})):e.html(t),this.reset()},title:function(t){return this._$("title").text(t),this._$("header")[t?"show":"hide"](),this},width:function(t){return this._$("content").css("width",t),this.reset()},height:function(t){return this._$("content").css("height",t),this.reset()},button:function(t){t=t||[];var e=this,a="",i=0;return this.callbacks={},"string"==typeof t?(a=t,i++):$.each(t,function(t,s){var n=s.id=s.id||s.value,l="";e.callbacks[n]=s.callback,s.display===!1?l=' style="display:none"':i++,a+='<button type="button" i-id="'+n+'" class="'+(s.className?s.className:"ui-btns-nor")+'"'+l+(s.disabled?" disabled":"")+(s.autofocus?' autofocus class="ui-dialog-autofocus"':"")+">"+s.value+"</button>",e._$("button").on("click","[i-id="+n+"]",function(t){var a=$(this);a.attr("disabled")||e._trigger(n),t.preventDefault()})}),this._$("button").html(a),this._$("footer")[i?"show":"hide"](),this},statusbar:function(t){return this._$("statusbar").html(t)[t?"show":"hide"](),this},_$:function(t){return this._popup.find("[i="+t+"]")},_trigger:function(t){var e=this.callbacks[t];return"function"!=typeof e||e.call(this)!==!1?this.close().remove():this}}),u.oncreate=$.noop,u.getCurrent=function(){return i.current},u.get=function(t){return void 0===t?u.list:u.list[t]},u.list={},u.defaults=s,u}),define("lib/components/dialog/1.0.0/popup",[],function(t,e,a){function i(){this.destroyed=!1,this.__popup=$("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=$("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],s++}var s=0,n=!("minWidth"in $("html")[0].style),l=!n;return $.extend(i.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(t){if(this.destroyed)return this;var e=this.__popup,a=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=t||this.follow,!this.__ready){if(e.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),n||$(window).on("resize",$.proxy(this.reset,this)),this.modal){var s={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||i.zIndex};e.addClass(this.className+"-modal"),l||$.extend(s,{position:"absolute",width:$(window).width()+"px",height:$(document).height()+"px"}),a.css(s).attr({tabindex:"0"}).on("focus",$.proxy(this.focus,this)),this.__mask=a.clone(!0).attr("style","").insertAfter(e),a.addClass(this.className+"-backdrop").insertBefore(e),this.__ready=!0}e.html()||e.html(this.innerHTML)}return e.addClass(this.className+"-show").show(),a.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(t){return!this.destroyed&&this.open&&(void 0!==t&&(this.returnValue=t),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),i.current===this&&(i.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),n||$(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var t in this)delete this[t];return this},reset:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("reset"),this},resize:function(){var t=this.follow;return t?this.__follow(t):this.__center(),this.__dispatchEvent("resize"),this},focus:function(){var t=this.node,e=this.__popup,a=i.current,s=this.zIndex=i.zIndex++;if(a&&a!==this&&a.blur(!1),!$.contains(t,this.__getActive())){var n=e.find("[autofocus]")[0];!this._autofocus&&n?this._autofocus=!0:n=t,this.__focus(n)}return e.css("zIndex",s),i.current=this,e.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var t=this.__activeElement,e=arguments[0];return e!==!1&&this.__focus(t),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(t,e){return this.__getEventListener(t).push(e),this},removeEventListener:function(t,e){for(var a=this.__getEventListener(t),i=0;i<a.length;i++)e===a[i]&&a.splice(i--,1);return this},__getEventListener:function(t){var e=this.__listener;return e||(e=this.__listener={}),e[t]||(e[t]=[]),e[t]},__dispatchEvent:function(t){var e=this.__getEventListener(t);this["on"+t]&&this["on"+t]();for(var a=0;a<e.length;a++)e[a].call(this)},__focus:function(t){try{this.autofocus&&!/^iframe$/i.test(t.nodeName)&&t.focus()}catch(e){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,a=e&&e.activeElement||t;return a}catch(i){}},__center:function(){var t=this.__popup,e=$(window),a=$(document),i=this.fixed,s=i?0:a.scrollLeft(),n=i?0:a.scrollTop(),l=e.width(),o=e.innerHeight(),r=t.width(),c=t.height(),d=(l-r)/2,p=(o-c)/2,u=t[0].style;u.left=Math.max(parseInt(d),s)+"px",u.top=Math.max(parseInt(p),n)+"px"},__follow:function(t){var e=t.parentNode&&$(t),a=this.__popup;if(this.__followSkin&&a.removeClass(this.__followSkin),e){var i=e.offset();if(i.left*i.top<0)return this.__center()}var s=this,n=this.fixed,l=$(window),o=$(document),r=l.width(),c=l.height(),d=o.scrollLeft(),p=o.scrollTop(),u=a.width(),h=a.height(),f=e?e.outerWidth():0,m=e?e.outerHeight():0,v=this.__offset(t),_=v.left,b=v.top,g=n?_-d:_,y=n?b-p:b,J=n?0:d,k=n?0:p,w=J+r-u,x=k+c-h,C={},Q=this.align.split(" "),A=this.className+"-",N={top:"bottom",bottom:"top",left:"right",right:"left"},P={top:"top",bottom:"top",left:"left",right:"left"},j=[{top:y-h,bottom:y+m,left:g-u,right:g+f},{top:y,bottom:y-h+m,left:g,right:g-u+f}],T={left:g+f/2-u/2,top:y+m/2-h/2},L={left:[J,w],top:[k,x]};$.each(Q,function(t,e){j[t][e]>L[P[e]][1]&&(e=Q[t]=N[e]),j[t][e]<L[P[e]][0]&&(Q[t]=N[e])}),Q[1]||(P[Q[1]]="left"===P[Q[0]]?"top":"left",j[1][Q[1]]=T[P[Q[1]]]),A+=Q.join("-")+" "+this.className+"-follow",s.__followSkin=A,e&&a.addClass(A),C[P[Q[0]]]=parseInt(j[0][Q[0]]),C[P[Q[1]]]=parseInt(j[1][Q[1]]),a.css(C)},__offset:function(t){var e=t.parentNode,a=e?$(t).offset():{left:t.pageX,top:t.pageY};t=e?t:t.target;var i=t.ownerDocument,s=i.defaultView||i.parentWindow;if(s==window)return a;var n=s.frameElement,l=$(i),o=l.scrollLeft(),r=l.scrollTop(),c=$(n).offset(),d=c.left,p=c.top;return{left:a.left+d-o,top:a.top+p-r}}}),i.zIndex=1024,i.current=null,i}),define("lib/components/dialog/1.0.0/dialog-config",[],{backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,okClassName:"ui-btns-ok",cancel:null,cancelClassName:"ui-btns-cancel",okValue:"ok",cancelValue:"cancel",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><span i="close" class="ui-dialog-close">&#215;</span><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="button" class="ui-dialog-button"></div></td></tr><tr><td i="footerSub" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div></td></tr></table></div>'}),define("lib/components/khValidate/1.0.0/khValidate",[],function(t,e,a){var i={chkEnName:function(t){var e=/^[a-zA-Z|0-9]{3,20}$/;return e.test(t)},chkCnName:function(t){var e=/^[\u2E80-\u9FFF]{2,20}$/;return e.test(t)},chkIsChinese:function(t){var e=/[\u4E00-\u9FA5\uF900-\uFA2D]/;return e.test(t)},chkUserName:function(t){var e=/^[\u2E80-\u9FFF|0-9|a-zA-Z|_]{2,20}$/;return e.test(t)},chkTelephone:function(t){var e=/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/;return e.test(t)},chkPhone:function(t){var e=/^(13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/;return e.test(t)},chkPass:function(t){var e=/^[a-zA-Z0-9_-]{6,20}$/;return e.test(t)},chkPassNew:function(t){var e=/^[^\u2E80-\uFFA0\s]{6,20}$/;return e.test(t)},chkNumber:function(t,e){var a;switch(e){case 4:a=/^[0-9]{4}$/;break;case 5:a=/^[0-9]{5}$/;break;case 6:a=/^[0-9]{6}$/;break;case 7:a=/^[0-9]{7}$/;break;case 8:a=/^[0-9]{8}$/;break;case 9:a=/^[0-9]{9}$/;break;case 10:a=/^[0-9]{10}$/;break;case 11:a=/^[0-9]{11}$/;break;case 12:a=/^[0-9]{12}$/;break;case 13:a=/^[0-9]{13}$/;break;case 14:a=/^[0-9]{14}$/;break;case 15:a=/^[0-9]{15}$/;break;case 16:a=/^[0-9]{16}$/;break;case 17:a=/^[0-9]{17}$/;break;case 18:a=/^[0-9]{18}$/;break;default:a=/^[0-9]{6}$/}return a.test(t)},chkAliAcount:function(t){var e=/^[0-9]{11}|^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;return e.test(t)},chkBankName:function(t){var e=/^[\u2E80-\u9FFF]{4,20}$/;return e.test(t)},chkBankAcount:function(t){var e=/^[0-9]{15,23}$/;return e.test(t)},chkBankOrderNum:function(t){var e=/^[0-9]{8,}$/;return e.test(t)},chkPrice:function(t){var e=/^[0-9]{1,10}[\.][0-9]{2}$/;return e.test(t)},chkEmail:function(t){var e=/^([a-zA-Z0-9_\.-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;return e.test(t)},chkURL:function(t){var e=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;return e.test(t)},chkIP:function(t){var e=/((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)/;return e.test(t)},chkScript:function(t){var e=/^[A-Za-z0-9|_|-|\u4E00-\u9FA5\uF900-\uFA2D|@|#|,|.|;]+$/;return e.test(t)}};a.exports=i}),define("lib/components/khSelectAddress/1.0.0/khSelectAddress",[],function(t,e,a){function i(t){function e(){$.ajax({url:"http://api.kinhom.com/region/pro",type:"get",dataType:"jsonp",success:function(t){l("#J_proList",t),o({mainCell:"#J_selectProvience",callback:function(t,e,a){s("#J_selectAddress",a.attr("data-parent"))}})},error:function(t){}})}var t=t||{};t.curPro||"",t.curCity||"",t.curArea||"";o=t.selectModule,e()}function s(t,e){var a='<div class="select-gray fl JQ_addressCity"><i class="select-corner icon-gray-left"></i><label class="JQ_option select-option w90" data-value="0">请选择市</label><i class="select-corner icon-gray-right"></i><a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_cityList"></ul><input type="hidden" name="valCity" /></div>',i='<div class="select-gray fl JQ_addressArea"><i class="select-corner icon-gray-left"></i><label class="JQ_option select-option w90" data-value="0">请选择区</label><i class="select-corner icon-gray-right"></i><a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_areaList"></ul><input type="hidden" name="valArea" /></div>',s="string"==typeof t?t.indexOf("#")>-1?$(t):$("#"+t):t;s.find(".JQ_addressCity").remove(),s.find(".JQ_addressArea").remove(),s.append(a),s.append(i),s.find(".JQ_addressCity").attr("id","J_selectCity_"+e),s.find(".JQ_addressArea").attr("id","J_selectArea_"+e),cityObj=s.find("#J_cityList");var l="";$.ajax({url:"http://api.kinhom.com/region/city/"+e,type:"get",dataType:"jsonp",success:function(t){for(var a=0;a<t.length;a++)l+='<li><a href="javascript:void(0)" data-parent="'+t[a].parent_id+'" data-value="'+t[a].region_id+'">'+t[a].region_name+"</a></li>";cityObj.append(l),o({mainCell:"J_selectCity_"+e,callback:function(t,e,a){n("#J_selectAddress",t)}}),o({mainCell:"J_selectArea_"+e})}})}function n(t,e){var a='<div class="select-gray fl JQ_addressArea"><i class="select-corner icon-gray-left"></i><label class="JQ_option select-option w90" data-value="0">请选择区</label><i class="select-corner icon-gray-right"></i><a id="J_applyType" href="javascript:void(0);" class="select-btn JQ_selectBtn"><i class="triangle-down"></i></a> <ul id="J_areaList"></ul><input type="hidden" name="valArea" /></div>',i="string"==typeof t?t.indexOf("#")>-1?$(t):$("#"+t):t;i.find(".JQ_addressArea").remove(),i.append(a),i.find(".JQ_addressArea").attr("id","J_selectArea_"+e),areaObj=i.find("#J_areaList");var s="";$.ajax({url:"http://api.kinhom.com/region/area/"+e,type:"get",dataType:"jsonp",success:function(t){for(var a=0;a<t.length;a++)s+='<li><a href="javascript:void(0)" data-parent="'+t[a].parent_id+'" data-value="'+t[a].region_id+'">'+t[a].region_name+"</a></li>";areaObj.append(s),o({mainCell:"J_selectArea_"+e})}})}function l(t,e){for(var a="",i="string"==typeof t?t.indexOf("#")>-1?$(t):$("#"+t):t,s=0;s<e.length;s++)a+='<li><a href="javascript:void(0);" data-parent="'+e[s].region_id+'" data-value="'+e[s].region_id+'">'+e[s].region_name+"</a></li>";i.append(a)}var o=function(){};a.exports=i});